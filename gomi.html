<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#0a0f14" />
    <title>ゴミ分別アシスト | Waste Sorting Assistant</title>
    <meta name="description" content="自治体PDFを取り込んで、正確なゴミ分別方法を即座に確認。カメラスキャン対応。" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>♻️</text></svg>" />
    <script type="module" crossorigin>function O1(u,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in u)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(u,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function Bd(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var Eh={exports:{}},Lr={};var Jg;function L1(){if(Jg)return Lr;Jg=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:u,type:s,key:l,ref:a!==void 0?a:null,props:o}}return Lr.Fragment=t,Lr.jsx=e,Lr.jsxs=e,Lr}var tb;function B1(){return tb||(tb=1,Eh.exports=L1()),Eh.exports}var T=B1(),_h={exports:{}},Et={};var eb;function P1(){if(eb)return Et;eb=1;var u=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function A(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,E={};function x(C,I,B){this.props=C,this.context=I,this.refs=E,this.updater=B||S}x.prototype.isReactComponent={},x.prototype.setState=function(C,I){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,I,"setState")},x.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function R(){}R.prototype=x.prototype;function M(C,I,B){this.props=C,this.context=I,this.refs=E,this.updater=B||S}var N=M.prototype=new R;N.constructor=M,v(N,x.prototype),N.isPureReactComponent=!0;var k=Array.isArray;function L(){}var P={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function Q(C,I,B){var $=B.ref;return{$$typeof:u,type:C,key:I,ref:$!==void 0?$:null,props:B}}function it(C,I){return Q(C.type,I,C.props)}function nt(C){return typeof C=="object"&&C!==null&&C.$$typeof===u}function lt(C){var I={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(B){return I[B]})}var ht=/\/+/g;function gt(C,I){return typeof C=="object"&&C!==null&&C.key!=null?lt(""+C.key):I.toString(36)}function yt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(L,L):(C.status="pending",C.then(function(I){C.status==="pending"&&(C.status="fulfilled",C.value=I)},function(I){C.status==="pending"&&(C.status="rejected",C.reason=I)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function O(C,I,B,$,et){var rt=typeof C;(rt==="undefined"||rt==="boolean")&&(C=null);var st=!1;if(C===null)st=!0;else switch(rt){case"bigint":case"string":case"number":st=!0;break;case"object":switch(C.$$typeof){case u:case t:st=!0;break;case g:return st=C._init,O(st(C._payload),I,B,$,et)}}if(st)return et=et(C),st=$===""?"."+gt(C,0):$,k(et)?(B="",st!=null&&(B=st.replace(ht,"$&/")+"/"),O(et,I,B,"",function(vt){return vt})):et!=null&&(nt(et)&&(et=it(et,B+(et.key==null||C&&C.key===et.key?"":(""+et.key).replace(ht,"$&/")+"/")+st)),I.push(et)),1;st=0;var ct=$===""?".":$+":";if(k(C))for(var ot=0;ot<C.length;ot++)$=C[ot],rt=ct+gt($,ot),st+=O($,I,B,rt,et);else if(ot=A(C),typeof ot=="function")for(C=ot.call(C),ot=0;!($=C.next()).done;)$=$.value,rt=ct+gt($,ot++),st+=O($,I,B,rt,et);else if(rt==="object"){if(typeof C.then=="function")return O(yt(C),I,B,$,et);throw I=String(C),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return st}function G(C,I,B){if(C==null)return C;var $=[],et=0;return O(C,$,"","",function(rt){return I.call(B,rt,et++)}),$}function K(C){if(C._status===-1){var I=C._result;I=I(),I.then(function(B){(C._status===0||C._status===-1)&&(C._status=1,C._result=B)},function(B){(C._status===0||C._status===-1)&&(C._status=2,C._result=B)}),C._status===-1&&(C._status=0,C._result=I)}if(C._status===1)return C._result.default;throw C._result}var X=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},V={map:G,forEach:function(C,I,B){G(C,function(){I.apply(this,arguments)},B)},count:function(C){var I=0;return G(C,function(){I++}),I},toArray:function(C){return G(C,function(I){return I})||[]},only:function(C){if(!nt(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Et.Activity=p,Et.Children=V,Et.Component=x,Et.Fragment=e,Et.Profiler=a,Et.PureComponent=M,Et.StrictMode=s,Et.Suspense=d,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Et.__COMPILER_RUNTIME={__proto__:null,c:function(C){return P.H.useMemoCache(C)}},Et.cache=function(C){return function(){return C.apply(null,arguments)}},Et.cacheSignal=function(){return null},Et.cloneElement=function(C,I,B){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var $=v({},C.props),et=C.key;if(I!=null)for(rt in I.key!==void 0&&(et=""+I.key),I)!F.call(I,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&I.ref===void 0||($[rt]=I[rt]);var rt=arguments.length-2;if(rt===1)$.children=B;else if(1<rt){for(var st=Array(rt),ct=0;ct<rt;ct++)st[ct]=arguments[ct+2];$.children=st}return Q(C.type,et,$)},Et.createContext=function(C){return C={$$typeof:l,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:o,_context:C},C},Et.createElement=function(C,I,B){var $,et={},rt=null;if(I!=null)for($ in I.key!==void 0&&(rt=""+I.key),I)F.call(I,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(et[$]=I[$]);var st=arguments.length-2;if(st===1)et.children=B;else if(1<st){for(var ct=Array(st),ot=0;ot<st;ot++)ct[ot]=arguments[ot+2];et.children=ct}if(C&&C.defaultProps)for($ in st=C.defaultProps,st)et[$]===void 0&&(et[$]=st[$]);return Q(C,rt,et)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(C){return{$$typeof:h,render:C}},Et.isValidElement=nt,Et.lazy=function(C){return{$$typeof:g,_payload:{_status:-1,_result:C},_init:K}},Et.memo=function(C,I){return{$$typeof:f,type:C,compare:I===void 0?null:I}},Et.startTransition=function(C){var I=P.T,B={};P.T=B;try{var $=C(),et=P.S;et!==null&&et(B,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(L,X)}catch(rt){X(rt)}finally{I!==null&&B.types!==null&&(I.types=B.types),P.T=I}},Et.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Et.use=function(C){return P.H.use(C)},Et.useActionState=function(C,I,B){return P.H.useActionState(C,I,B)},Et.useCallback=function(C,I){return P.H.useCallback(C,I)},Et.useContext=function(C){return P.H.useContext(C)},Et.useDebugValue=function(){},Et.useDeferredValue=function(C,I){return P.H.useDeferredValue(C,I)},Et.useEffect=function(C,I){return P.H.useEffect(C,I)},Et.useEffectEvent=function(C){return P.H.useEffectEvent(C)},Et.useId=function(){return P.H.useId()},Et.useImperativeHandle=function(C,I,B){return P.H.useImperativeHandle(C,I,B)},Et.useInsertionEffect=function(C,I){return P.H.useInsertionEffect(C,I)},Et.useLayoutEffect=function(C,I){return P.H.useLayoutEffect(C,I)},Et.useMemo=function(C,I){return P.H.useMemo(C,I)},Et.useOptimistic=function(C,I){return P.H.useOptimistic(C,I)},Et.useReducer=function(C,I,B){return P.H.useReducer(C,I,B)},Et.useRef=function(C){return P.H.useRef(C)},Et.useState=function(C){return P.H.useState(C)},Et.useSyncExternalStore=function(C,I,B){return P.H.useSyncExternalStore(C,I,B)},Et.useTransition=function(){return P.H.useTransition()},Et.version="19.2.3",Et}var nb;function Pd(){return nb||(nb=1,_h.exports=P1()),_h.exports}var z=Pd();const at=Bd(z),zd=O1({__proto__:null,default:at},[z]);var Ch={exports:{}},Br={},Th={exports:{}},Mh={};var ib;function z1(){return ib||(ib=1,(function(u){function t(O,G){var K=O.length;O.push(G);t:for(;0<K;){var X=K-1>>>1,V=O[X];if(0<a(V,G))O[X]=G,O[K]=V,K=X;else break t}}function e(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var G=O[0],K=O.pop();if(K!==G){O[0]=K;t:for(var X=0,V=O.length,C=V>>>1;X<C;){var I=2*(X+1)-1,B=O[I],$=I+1,et=O[$];if(0>a(B,K))$<V&&0>a(et,B)?(O[X]=et,O[$]=K,X=$):(O[X]=B,O[I]=K,X=I);else if($<V&&0>a(et,K))O[X]=et,O[$]=K,X=$;else break t}}return G}function a(O,G){var K=O.sortIndex-G.sortIndex;return K!==0?K:O.id-G.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;u.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();u.unstable_now=function(){return l.now()-h}}var d=[],f=[],g=1,p=null,y=3,A=!1,S=!1,v=!1,E=!1,x=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var G=e(f);G!==null;){if(G.callback===null)s(f);else if(G.startTime<=O)s(f),G.sortIndex=G.expirationTime,t(d,G);else break;G=e(f)}}function k(O){if(v=!1,N(O),!S)if(e(d)!==null)S=!0,L||(L=!0,lt());else{var G=e(f);G!==null&&yt(k,G.startTime-O)}}var L=!1,P=-1,F=5,Q=-1;function it(){return E?!0:!(u.unstable_now()-Q<F)}function nt(){if(E=!1,L){var O=u.unstable_now();Q=O;var G=!0;try{t:{S=!1,v&&(v=!1,R(P),P=-1),A=!0;var K=y;try{e:{for(N(O),p=e(d);p!==null&&!(p.expirationTime>O&&it());){var X=p.callback;if(typeof X=="function"){p.callback=null,y=p.priorityLevel;var V=X(p.expirationTime<=O);if(O=u.unstable_now(),typeof V=="function"){p.callback=V,N(O),G=!0;break e}p===e(d)&&s(d),N(O)}else s(d);p=e(d)}if(p!==null)G=!0;else{var C=e(f);C!==null&&yt(k,C.startTime-O),G=!1}}break t}finally{p=null,y=K,A=!1}G=void 0}}finally{G?lt():L=!1}}}var lt;if(typeof M=="function")lt=function(){M(nt)};else if(typeof MessageChannel<"u"){var ht=new MessageChannel,gt=ht.port2;ht.port1.onmessage=nt,lt=function(){gt.postMessage(null)}}else lt=function(){x(nt,0)};function yt(O,G){P=x(function(){O(u.unstable_now())},G)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(O){O.callback=null},u.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<O?Math.floor(1e3/O):5},u.unstable_getCurrentPriorityLevel=function(){return y},u.unstable_next=function(O){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var K=y;y=G;try{return O()}finally{y=K}},u.unstable_requestPaint=function(){E=!0},u.unstable_runWithPriority=function(O,G){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=y;y=O;try{return G()}finally{y=K}},u.unstable_scheduleCallback=function(O,G,K){var X=u.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=K+V,O={id:g++,callback:G,priorityLevel:O,startTime:K,expirationTime:V,sortIndex:-1},K>X?(O.sortIndex=K,t(f,O),e(d)===null&&O===e(f)&&(v?(R(P),P=-1):v=!0,yt(k,K-X))):(O.sortIndex=V,t(d,O),S||A||(S=!0,L||(L=!0,lt()))),O},u.unstable_shouldYield=it,u.unstable_wrapCallback=function(O){var G=y;return function(){var K=y;y=G;try{return O.apply(this,arguments)}finally{y=K}}}})(Mh)),Mh}var sb;function j1(){return sb||(sb=1,Th.exports=z1()),Th.exports}var Rh={exports:{}},Fe={};var ab;function I1(){if(ab)return Fe;ab=1;var u=Pd();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:f,implementation:g}}var l=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Fe.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fe.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,g)},Fe.flushSync=function(d){var f=l.T,g=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=g,s.d.f()}},Fe.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Fe.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Fe.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,p=h(g,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:A}):g==="script"&&s.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Fe.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Fe.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,p=h(g,f.crossOrigin);s.d.L(d,g,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Fe.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Fe.requestFormReset=function(d){s.d.r(d)},Fe.unstable_batchedUpdates=function(d,f){return d(f)},Fe.useFormState=function(d,f,g){return l.H.useFormState(d,f,g)},Fe.useFormStatus=function(){return l.H.useHostTransitionStatus()},Fe.version="19.2.3",Fe}var rb;function Ry(){if(rb)return Rh.exports;rb=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Rh.exports=I1(),Rh.exports}var ob;function F1(){if(ob)return Br;ob=1;var u=j1(),t=Pd(),e=Ry();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function h(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(s(188))}function f(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var r=n,c=i;;){var m=r.return;if(m===null)break;var b=m.alternate;if(b===null){if(c=m.return,c!==null){r=c;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===r)return d(m),n;if(b===c)return d(m),i;b=b.sibling}throw Error(s(188))}if(r.return!==c.return)r=m,c=b;else{for(var w=!1,_=m.child;_;){if(_===r){w=!0,r=m,c=b;break}if(_===c){w=!0,c=m,r=b;break}_=_.sibling}if(!w){for(_=b.child;_;){if(_===r){w=!0,r=b,c=m;break}if(_===c){w=!0,c=b,r=m;break}_=_.sibling}if(!w)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:i}function g(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=g(n),i!==null)return i;n=n.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),M=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function lt(n){return n===null||typeof n!="object"?null:(n=nt&&n[nt]||n["@@iterator"],typeof n=="function"?n:null)}var ht=Symbol.for("react.client.reference");function gt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ht?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case v:return"Fragment";case x:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case L:return"SuspenseList";case Q:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case M:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case N:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return i=n.displayName||null,i!==null?i:gt(n.type)||"Memo";case F:i=n._payload,n=n._init;try{return gt(n(i))}catch{}}return null}var yt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},X=[],V=-1;function C(n){return{current:n}}function I(n){0>V||(n.current=X[V],X[V]=null,V--)}function B(n,i){V++,X[V]=n.current,n.current=i}var $=C(null),et=C(null),rt=C(null),st=C(null);function ct(n,i){switch(B(rt,i),B(et,n),B($,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Sg(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Sg(i),n=xg(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}I($),B($,n)}function ot(){I($),I(et),I(rt)}function vt(n){n.memoizedState!==null&&B(st,n);var i=$.current,r=xg(i,n.type);i!==r&&(B(et,n),B($,r))}function Rt(n){et.current===n&&(I($),I(et)),st.current===n&&(I(st),Dr._currentValue=K)}var It,fe;function ee(n){if(It===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);It=i&&i[1]||"",fe=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+n+fe}var Os=!1;function Fn(n,i){if(!n||Os)return"";Os=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(W){var Y=W}Reflect.construct(n,[],tt)}else{try{tt.call()}catch(W){Y=W}n.call(tt.prototype)}}else{try{throw Error()}catch(W){Y=W}(tt=n())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(W){if(W&&Y&&typeof W.stack=="string")return[W.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=c.DetermineComponentFrameRoot(),w=b[0],_=b[1];if(w&&_){var D=w.split(`
`),q=_.split(`
`);for(m=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;m<q.length&&!q[m].includes("DetermineComponentFrameRoot");)m++;if(c===D.length||m===q.length)for(c=D.length-1,m=q.length-1;1<=c&&0<=m&&D[c]!==q[m];)m--;for(;1<=c&&0<=m;c--,m--)if(D[c]!==q[m]){if(c!==1||m!==1)do if(c--,m--,0>m||D[c]!==q[m]){var Z=`
`+D[c].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=c&&0<=m);break}}}finally{Os=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?ee(r):""}function ti(n,i){switch(n.tag){case 26:case 27:case 5:return ee(n.type);case 16:return ee("Lazy");case 13:return n.child!==i&&i!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return Fn(n.type,!1);case 11:return Fn(n.type.render,!1);case 1:return Fn(n.type,!0);case 31:return ee("Activity");default:return""}}function Fa(n){try{var i="",r=null;do i+=ti(n,r),r=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ln=Object.prototype.hasOwnProperty,Ua=u.unstable_scheduleCallback,Ha=u.unstable_cancelCallback,Ue=u.unstable_shouldYield,Ei=u.unstable_requestPaint,He=u.unstable_now,dc=u.unstable_getCurrentPriorityLevel,is=u.unstable_ImmediatePriority,ro=u.unstable_UserBlockingPriority,ss=u.unstable_NormalPriority,Ga=u.unstable_LowPriority,ei=u.unstable_IdlePriority,oo=u.log,_i=u.unstable_setDisableYieldValue,as=null,Ge=null;function Ln(n){if(typeof oo=="function"&&_i(n),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(as,n)}catch{}}var je=Math.clz32?Math.clz32:Un,fc=Math.log,qa=Math.LN2;function Un(n){return n>>>=0,n===0?32:31-(fc(n)/qa|0)|0}var Ls=256,Bs=262144,rs=4194304;function Hn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xt(n,i,r){var c=n.pendingLanes;if(c===0)return 0;var m=0,b=n.suspendedLanes,w=n.pingedLanes;n=n.warmLanes;var _=c&134217727;return _!==0?(c=_&~b,c!==0?m=Hn(c):(w&=_,w!==0?m=Hn(w):r||(r=_&~n,r!==0&&(m=Hn(r))))):(_=c&~b,_!==0?m=Hn(_):w!==0?m=Hn(w):r||(r=c&~n,r!==0&&(m=Hn(r)))),m===0?0:i!==0&&i!==m&&(i&b)===0&&(b=m&-m,r=i&-i,b>=r||b===32&&(r&4194048)!==0)?i:m}function ne(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Se(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var n=rs;return rs<<=1,(rs&62914560)===0&&(rs=4194304),n}function Ci(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function se(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function $e(n,i,r,c,m,b){var w=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var _=n.entanglements,D=n.expirationTimes,q=n.hiddenUpdates;for(r=w&~r;0<r;){var Z=31-je(r),tt=1<<Z;_[Z]=0,D[Z]=-1;var Y=q[Z];if(Y!==null)for(q[Z]=null,Z=0;Z<Y.length;Z++){var W=Y[Z];W!==null&&(W.lane&=-536870913)}r&=~tt}c!==0&&os(n,c,0),b!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=b&~(w&~i))}function os(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-je(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function Ke(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var c=31-je(r),m=1<<c;m&i|n[c]&i&&(n[c]|=i),r&=~m}}function We(n,i){var r=i&-i;return r=(r&42)!==0?1:Ps(r),(r&(n.suspendedLanes|i))!==0?0:r}function Ps(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Bn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function mc(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:Yg(n.type))}function lf(n,i){var r=G.p;try{return G.p=n,i()}finally{G.p=r}}var Ti=Math.random().toString(36).slice(2),Te="__reactFiber$"+Ti,Qe="__reactProps$"+Ti,zs="__reactContainer$"+Ti,pc="__reactEvents$"+Ti,Sv="__reactListeners$"+Ti,xv="__reactHandles$"+Ti,cf="__reactResources$"+Ti,Va="__reactMarker$"+Ti;function gc(n){delete n[Te],delete n[Qe],delete n[pc],delete n[Sv],delete n[xv]}function js(n){var i=n[Te];if(i)return i;for(var r=n.parentNode;r;){if(i=r[zs]||r[Te]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=Dg(n);n!==null;){if(r=n[Te])return r;n=Dg(n)}return i}n=r,r=n.parentNode}return null}function Is(n){if(n=n[Te]||n[zs]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Ya(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Fs(n){var i=n[cf];return i||(i=n[cf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xe(n){n[Va]=!0}var uf=new Set,hf={};function ls(n,i){Us(n,i),Us(n+"Capture",i)}function Us(n,i){for(hf[n]=i,n=0;n<i.length;n++)uf.add(i[n])}var Ev=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),df={},ff={};function _v(n){return ln.call(ff,n)?!0:ln.call(df,n)?!1:Ev.test(n)?ff[n]=!0:(df[n]=!0,!1)}function lo(n,i,r){if(_v(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function co(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function ni(n,i,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+c)}}function vn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mf(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Cv(n,i,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,b=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){r=""+w,b.call(this,w)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(w){r=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function bc(n){if(!n._valueTracker){var i=mf(n)?"checked":"value";n._valueTracker=Cv(n,i,""+n[i])}}function pf(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return n&&(c=mf(n)?n.checked?"true":"false":n.value),n=c,n!==r?(i.setValue(n),!0):!1}function uo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Tv=/[\n"\\]/g;function An(n){return n.replace(Tv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function yc(n,i,r,c,m,b,w,_){n.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.type=w:n.removeAttribute("type"),i!=null?w==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+vn(i)):n.value!==""+vn(i)&&(n.value=""+vn(i)):w!=="submit"&&w!=="reset"||n.removeAttribute("value"),i!=null?vc(n,w,vn(i)):r!=null?vc(n,w,vn(r)):c!=null&&n.removeAttribute("value"),m==null&&b!=null&&(n.defaultChecked=!!b),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.name=""+vn(_):n.removeAttribute("name")}function gf(n,i,r,c,m,b,w,_){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),i!=null||r!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){bc(n);return}r=r!=null?""+vn(r):"",i=i!=null?""+vn(i):r,_||i===n.value||(n.value=i),n.defaultValue=i}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=_?n.checked:!!c,n.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(n.name=w),bc(n)}function vc(n,i,r){i==="number"&&uo(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Hs(n,i,r,c){if(n=n.options,i){i={};for(var m=0;m<r.length;m++)i["$"+r[m]]=!0;for(r=0;r<n.length;r++)m=i.hasOwnProperty("$"+n[r].value),n[r].selected!==m&&(n[r].selected=m),m&&c&&(n[r].defaultSelected=!0)}else{for(r=""+vn(r),i=null,m=0;m<n.length;m++){if(n[m].value===r){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function bf(n,i,r){if(i!=null&&(i=""+vn(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+vn(r):""}function yf(n,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(yt(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=vn(i),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),bc(n)}function Gs(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var Mv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vf(n,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,r):typeof r!="number"||r===0||Mv.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function Af(n,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in i)c=i[m],i.hasOwnProperty(m)&&r[m]!==c&&vf(n,m,c)}else for(var b in i)i.hasOwnProperty(b)&&vf(n,b,i[b])}function Ac(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(n){return Dv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ii(){}var wc=null;function Sc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qs=null,Vs=null;function wf(n){var i=Is(n);if(i&&(n=i.stateNode)){var r=n[Qe]||null;t:switch(n=i.stateNode,i.type){case"input":if(yc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+An(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==n&&c.form===n.form){var m=c[Qe]||null;if(!m)throw Error(s(90));yc(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===n.form&&pf(c)}break t;case"textarea":bf(n,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&Hs(n,!!r.multiple,i,!1)}}}var xc=!1;function Sf(n,i,r){if(xc)return n(i,r);xc=!0;try{var c=n(i);return c}finally{if(xc=!1,(qs!==null||Vs!==null)&&(Jo(),qs&&(i=qs,n=Vs,Vs=qs=null,wf(i),n)))for(i=0;i<n.length;i++)wf(n[i])}}function Xa(n,i){var r=n.stateNode;if(r===null)return null;var c=r[Qe]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=!1;if(si)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Ec=!1}var Mi=null,_c=null,fo=null;function xf(){if(fo)return fo;var n,i=_c,r=i.length,c,m="value"in Mi?Mi.value:Mi.textContent,b=m.length;for(n=0;n<r&&i[n]===m[n];n++);var w=r-n;for(c=1;c<=w&&i[r-c]===m[b-c];c++);return fo=m.slice(n,1<c?1-c:void 0)}function mo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function po(){return!0}function Ef(){return!1}function Ze(n){function i(r,c,m,b,w){this._reactName=r,this._targetInst=m,this.type=c,this.nativeEvent=b,this.target=w,this.currentTarget=null;for(var _ in n)n.hasOwnProperty(_)&&(r=n[_],this[_]=r?r(b):b[_]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?po:Ef,this.isPropagationStopped=Ef,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),i}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=Ze(cs),Ka=p({},cs,{view:0,detail:0}),Nv=Ze(Ka),Cc,Tc,Wa,bo=p({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wa&&(Wa&&n.type==="mousemove"?(Cc=n.screenX-Wa.screenX,Tc=n.screenY-Wa.screenY):Tc=Cc=0,Wa=n),Cc)},movementY:function(n){return"movementY"in n?n.movementY:Tc}}),_f=Ze(bo),kv=p({},bo,{dataTransfer:0}),Ov=Ze(kv),Lv=p({},Ka,{relatedTarget:0}),Mc=Ze(Lv),Bv=p({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Pv=Ze(Bv),zv=p({},cs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jv=Ze(zv),Iv=p({},cs,{data:0}),Cf=Ze(Iv),Fv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gv(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Hv[n])?!!i[n]:!1}function Rc(){return Gv}var qv=p({},Ka,{key:function(n){if(n.key){var i=Fv[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=mo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Uv[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rc,charCode:function(n){return n.type==="keypress"?mo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?mo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Vv=Ze(qv),Yv=p({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=Ze(Yv),Xv=p({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rc}),$v=Ze(Xv),Kv=p({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wv=Ze(Kv),Qv=p({},bo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Zv=Ze(Qv),Jv=p({},cs,{newState:0,oldState:0}),tA=Ze(Jv),eA=[9,13,27,32],Dc=si&&"CompositionEvent"in window,Qa=null;si&&"documentMode"in document&&(Qa=document.documentMode);var nA=si&&"TextEvent"in window&&!Qa,Mf=si&&(!Dc||Qa&&8<Qa&&11>=Qa),Rf=" ",Df=!1;function Nf(n,i){switch(n){case"keyup":return eA.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ys=!1;function iA(n,i){switch(n){case"compositionend":return kf(i);case"keypress":return i.which!==32?null:(Df=!0,Rf);case"textInput":return n=i.data,n===Rf&&Df?null:n;default:return null}}function sA(n,i){if(Ys)return n==="compositionend"||!Dc&&Nf(n,i)?(n=xf(),fo=_c=Mi=null,Ys=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mf&&i.locale!=="ko"?null:i.data;default:return null}}var aA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Of(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!aA[n.type]:i==="textarea"}function Lf(n,i,r,c){qs?Vs?Vs.push(c):Vs=[c]:qs=c,i=rl(i,"onChange"),0<i.length&&(r=new go("onChange","change",null,r,c),n.push({event:r,listeners:i}))}var Za=null,Ja=null;function rA(n){gg(n,0)}function yo(n){var i=Ya(n);if(pf(i))return n}function Bf(n,i){if(n==="change")return i}var Pf=!1;if(si){var Nc;if(si){var kc="oninput"in document;if(!kc){var zf=document.createElement("div");zf.setAttribute("oninput","return;"),kc=typeof zf.oninput=="function"}Nc=kc}else Nc=!1;Pf=Nc&&(!document.documentMode||9<document.documentMode)}function jf(){Za&&(Za.detachEvent("onpropertychange",If),Ja=Za=null)}function If(n){if(n.propertyName==="value"&&yo(Ja)){var i=[];Lf(i,Ja,n,Sc(n)),Sf(rA,i)}}function oA(n,i,r){n==="focusin"?(jf(),Za=i,Ja=r,Za.attachEvent("onpropertychange",If)):n==="focusout"&&jf()}function lA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yo(Ja)}function cA(n,i){if(n==="click")return yo(i)}function uA(n,i){if(n==="input"||n==="change")return yo(i)}function hA(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var cn=typeof Object.is=="function"?Object.is:hA;function tr(n,i){if(cn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var m=r[c];if(!ln.call(i,m)||!cn(n[m],i[m]))return!1}return!0}function Ff(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Uf(n,i){var r=Ff(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=i&&c>=i)return{node:r,offset:i-n};n=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Ff(r)}}function Hf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Hf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Gf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=uo(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=uo(n.document)}return i}function Oc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var dA=si&&"documentMode"in document&&11>=document.documentMode,Xs=null,Lc=null,er=null,Bc=!1;function qf(n,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bc||Xs==null||Xs!==uo(c)||(c=Xs,"selectionStart"in c&&Oc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),er&&tr(er,c)||(er=c,c=rl(Lc,"onSelect"),0<c.length&&(i=new go("onSelect","select",null,i,r),n.push({event:i,listeners:c}),i.target=Xs)))}function us(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var $s={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Pc={},Vf={};si&&(Vf=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function hs(n){if(Pc[n])return Pc[n];if(!$s[n])return n;var i=$s[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in Vf)return Pc[n]=i[r];return n}var Yf=hs("animationend"),Xf=hs("animationiteration"),$f=hs("animationstart"),fA=hs("transitionrun"),mA=hs("transitionstart"),pA=hs("transitioncancel"),Kf=hs("transitionend"),Wf=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");function Pn(n,i){Wf.set(n,i),ls(i,[n])}var vo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},wn=[],Ks=0,jc=0;function Ao(){for(var n=Ks,i=jc=Ks=0;i<n;){var r=wn[i];wn[i++]=null;var c=wn[i];wn[i++]=null;var m=wn[i];wn[i++]=null;var b=wn[i];if(wn[i++]=null,c!==null&&m!==null){var w=c.pending;w===null?m.next=m:(m.next=w.next,w.next=m),c.pending=m}b!==0&&Qf(r,m,b)}}function wo(n,i,r,c){wn[Ks++]=n,wn[Ks++]=i,wn[Ks++]=r,wn[Ks++]=c,jc|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ic(n,i,r,c){return wo(n,i,r,c),So(n)}function ds(n,i){return wo(n,null,null,i),So(n)}function Qf(n,i,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var m=!1,b=n.return;b!==null;)b.childLanes|=r,c=b.alternate,c!==null&&(c.childLanes|=r),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(m=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,m&&i!==null&&(m=31-je(r),n=b.hiddenUpdates,c=n[m],c===null?n[m]=[i]:c.push(i),i.lane=r|536870912),b):null}function So(n){if(50<xr)throw xr=0,$u=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Ws={};function gA(n,i,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(n,i,r,c){return new gA(n,i,r,c)}function Fc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ai(n,i){var r=n.alternate;return r===null?(r=un(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Zf(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function xo(n,i,r,c,m,b){var w=0;if(c=n,typeof n=="function")Fc(n)&&(w=1);else if(typeof n=="string")w=w1(n,r,$.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Q:return n=un(31,r,i,m),n.elementType=Q,n.lanes=b,n;case v:return fs(r.children,m,b,i);case E:w=8,m|=24;break;case x:return n=un(12,r,i,m|2),n.elementType=x,n.lanes=b,n;case k:return n=un(13,r,i,m),n.elementType=k,n.lanes=b,n;case L:return n=un(19,r,i,m),n.elementType=L,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:w=10;break t;case R:w=9;break t;case N:w=11;break t;case P:w=14;break t;case F:w=16,c=null;break t}w=29,r=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=un(w,r,i,m),i.elementType=n,i.type=c,i.lanes=b,i}function fs(n,i,r,c){return n=un(7,n,c,i),n.lanes=r,n}function Uc(n,i,r){return n=un(6,n,null,i),n.lanes=r,n}function Jf(n){var i=un(18,null,null,0);return i.stateNode=n,i}function Hc(n,i,r){return i=un(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var tm=new WeakMap;function Sn(n,i){if(typeof n=="object"&&n!==null){var r=tm.get(n);return r!==void 0?r:(i={value:n,source:i,stack:Fa(i)},tm.set(n,i),i)}return{value:n,source:i,stack:Fa(i)}}var Qs=[],Zs=0,Eo=null,nr=0,xn=[],En=0,Ri=null,Gn=1,qn="";function ri(n,i){Qs[Zs++]=nr,Qs[Zs++]=Eo,Eo=n,nr=i}function em(n,i,r){xn[En++]=Gn,xn[En++]=qn,xn[En++]=Ri,Ri=n;var c=Gn;n=qn;var m=32-je(c)-1;c&=~(1<<m),r+=1;var b=32-je(i)+m;if(30<b){var w=m-m%5;b=(c&(1<<w)-1).toString(32),c>>=w,m-=w,Gn=1<<32-je(i)+m|r<<m|c,qn=b+n}else Gn=1<<b|r<<m|c,qn=n}function Gc(n){n.return!==null&&(ri(n,1),em(n,1,0))}function qc(n){for(;n===Eo;)Eo=Qs[--Zs],Qs[Zs]=null,nr=Qs[--Zs],Qs[Zs]=null;for(;n===Ri;)Ri=xn[--En],xn[En]=null,qn=xn[--En],xn[En]=null,Gn=xn[--En],xn[En]=null}function nm(n,i){xn[En++]=Gn,xn[En++]=qn,xn[En++]=Ri,Gn=i.id,qn=i.overflow,Ri=n}var Me=null,Jt=null,Pt=!1,Di=null,_n=!1,Vc=Error(s(519));function Ni(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ir(Sn(i,n)),Vc}function im(n){var i=n.stateNode,r=n.type,c=n.memoizedProps;switch(i[Te]=n,i[Qe]=c,r){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(r=0;r<_r.length;r++)Ot(_r[r],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":Ot("invalid",i),gf(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ot("invalid",i);break;case"textarea":Ot("invalid",i),yf(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Ag(i.textContent,r)?(c.popover!=null&&(Ot("beforetoggle",i),Ot("toggle",i)),c.onScroll!=null&&Ot("scroll",i),c.onScrollEnd!=null&&Ot("scrollend",i),c.onClick!=null&&(i.onclick=ii),i=!0):i=!1,i||Ni(n,!0)}function sm(n){for(Me=n.return;Me;)switch(Me.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:Me=Me.return}}function Js(n){if(n!==Me)return!1;if(!Pt)return sm(n),Pt=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||ch(n.type,n.memoizedProps)),r=!r),r&&Jt&&Ni(n),sm(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Jt=Rg(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Jt=Rg(n)}else i===27?(i=Jt,Vi(n.type)?(n=mh,mh=null,Jt=n):Jt=i):Jt=Me?Tn(n.stateNode.nextSibling):null;return!0}function ms(){Jt=Me=null,Pt=!1}function Yc(){var n=Di;return n!==null&&(nn===null?nn=n:nn.push.apply(nn,n),Di=null),n}function ir(n){Di===null?Di=[n]:Di.push(n)}var Xc=C(null),ps=null,oi=null;function ki(n,i,r){B(Xc,i._currentValue),i._currentValue=r}function li(n){n._currentValue=Xc.current,I(Xc)}function $c(n,i,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===r)break;n=n.return}}function Kc(n,i,r,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var b=m.dependencies;if(b!==null){var w=m.child;b=b.firstContext;t:for(;b!==null;){var _=b;b=m;for(var D=0;D<i.length;D++)if(_.context===i[D]){b.lanes|=r,_=b.alternate,_!==null&&(_.lanes|=r),$c(b.return,r,n),c||(w=null);break t}b=_.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=r,b=w.alternate,b!==null&&(b.lanes|=r),$c(w,r,n),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===n){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function ta(n,i,r,c){n=null;for(var m=i,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var _=m.type;cn(m.pendingProps.value,w.value)||(n!==null?n.push(_):n=[_])}}else if(m===st.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Dr):n=[Dr])}m=m.return}n!==null&&Kc(i,n,r,c),i.flags|=262144}function _o(n){for(n=n.firstContext;n!==null;){if(!cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function gs(n){ps=n,oi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Re(n){return am(ps,n)}function Co(n,i){return ps===null&&gs(n),am(n,i)}function am(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},oi===null){if(n===null)throw Error(s(308));oi=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else oi=oi.next=i;return r}var bA=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},yA=u.unstable_scheduleCallback,vA=u.unstable_NormalPriority,me={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wc(){return{controller:new bA,data:new Map,refCount:0}}function sr(n){n.refCount--,n.refCount===0&&yA(vA,function(){n.controller.abort()})}var ar=null,Qc=0,ea=0,na=null;function AA(n,i){if(ar===null){var r=ar=[];Qc=0,ea=th(),na={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Qc++,i.then(rm,rm),i}function rm(){if(--Qc===0&&ar!==null){na!==null&&(na.status="fulfilled");var n=ar;ar=null,ea=0,na=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function wA(n,i){var r=[],c={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var m=0;m<r.length;m++)(0,r[m])(i)},function(m){for(c.status="rejected",c.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),c}var om=O.S;O.S=function(n,i){qp=He(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&AA(n,i),om!==null&&om(n,i)};var bs=C(null);function Zc(){var n=bs.current;return n!==null?n:Qt.pooledCache}function To(n,i){i===null?B(bs,bs.current):B(bs,i.pool)}function lm(){var n=Zc();return n===null?null:{parent:me._currentValue,pool:n}}var ia=Error(s(460)),Jc=Error(s(474)),Mo=Error(s(542)),Ro={then:function(){}};function cm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function um(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(ii,ii),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,dm(n),n;default:if(typeof i.status=="string")i.then(ii,ii);else{if(n=Qt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=c}},function(c){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,dm(n),n}throw vs=i,ia}}function ys(n){try{var i=n._init;return i(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(vs=r,ia):r}}var vs=null;function hm(){if(vs===null)throw Error(s(459));var n=vs;return vs=null,n}function dm(n){if(n===ia||n===Mo)throw Error(s(483))}var sa=null,rr=0;function Do(n){var i=rr;return rr+=1,sa===null&&(sa=[]),um(sa,n,i)}function or(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function No(n,i){throw i.$$typeof===y?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function fm(n){function i(U,j){if(n){var H=U.deletions;H===null?(U.deletions=[j],U.flags|=16):H.push(j)}}function r(U,j){if(!n)return null;for(;j!==null;)i(U,j),j=j.sibling;return null}function c(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function m(U,j){return U=ai(U,j),U.index=0,U.sibling=null,U}function b(U,j,H){return U.index=H,n?(H=U.alternate,H!==null?(H=H.index,H<j?(U.flags|=67108866,j):H):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function w(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function _(U,j,H,J){return j===null||j.tag!==6?(j=Uc(H,U.mode,J),j.return=U,j):(j=m(j,H),j.return=U,j)}function D(U,j,H,J){var At=H.type;return At===v?Z(U,j,H.props.children,J,H.key):j!==null&&(j.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===F&&ys(At)===j.type)?(j=m(j,H.props),or(j,H),j.return=U,j):(j=xo(H.type,H.key,H.props,null,U.mode,J),or(j,H),j.return=U,j)}function q(U,j,H,J){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=Hc(H,U.mode,J),j.return=U,j):(j=m(j,H.children||[]),j.return=U,j)}function Z(U,j,H,J,At){return j===null||j.tag!==7?(j=fs(H,U.mode,J,At),j.return=U,j):(j=m(j,H),j.return=U,j)}function tt(U,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Uc(""+j,U.mode,H),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return H=xo(j.type,j.key,j.props,null,U.mode,H),or(H,j),H.return=U,H;case S:return j=Hc(j,U.mode,H),j.return=U,j;case F:return j=ys(j),tt(U,j,H)}if(yt(j)||lt(j))return j=fs(j,U.mode,H,null),j.return=U,j;if(typeof j.then=="function")return tt(U,Do(j),H);if(j.$$typeof===M)return tt(U,Co(U,j),H);No(U,j)}return null}function Y(U,j,H,J){var At=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return At!==null?null:_(U,j,""+H,J);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===At?D(U,j,H,J):null;case S:return H.key===At?q(U,j,H,J):null;case F:return H=ys(H),Y(U,j,H,J)}if(yt(H)||lt(H))return At!==null?null:Z(U,j,H,J,null);if(typeof H.then=="function")return Y(U,j,Do(H),J);if(H.$$typeof===M)return Y(U,j,Co(U,H),J);No(U,H)}return null}function W(U,j,H,J,At){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return U=U.get(H)||null,_(j,U,""+J,At);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return U=U.get(J.key===null?H:J.key)||null,D(j,U,J,At);case S:return U=U.get(J.key===null?H:J.key)||null,q(j,U,J,At);case F:return J=ys(J),W(U,j,H,J,At)}if(yt(J)||lt(J))return U=U.get(H)||null,Z(j,U,J,At,null);if(typeof J.then=="function")return W(U,j,H,Do(J),At);if(J.$$typeof===M)return W(U,j,H,Co(j,J),At);No(j,J)}return null}function dt(U,j,H,J){for(var At=null,Ft=null,bt=j,Dt=j=0,Bt=null;bt!==null&&Dt<H.length;Dt++){bt.index>Dt?(Bt=bt,bt=null):Bt=bt.sibling;var Ut=Y(U,bt,H[Dt],J);if(Ut===null){bt===null&&(bt=Bt);break}n&&bt&&Ut.alternate===null&&i(U,bt),j=b(Ut,j,Dt),Ft===null?At=Ut:Ft.sibling=Ut,Ft=Ut,bt=Bt}if(Dt===H.length)return r(U,bt),Pt&&ri(U,Dt),At;if(bt===null){for(;Dt<H.length;Dt++)bt=tt(U,H[Dt],J),bt!==null&&(j=b(bt,j,Dt),Ft===null?At=bt:Ft.sibling=bt,Ft=bt);return Pt&&ri(U,Dt),At}for(bt=c(bt);Dt<H.length;Dt++)Bt=W(bt,U,Dt,H[Dt],J),Bt!==null&&(n&&Bt.alternate!==null&&bt.delete(Bt.key===null?Dt:Bt.key),j=b(Bt,j,Dt),Ft===null?At=Bt:Ft.sibling=Bt,Ft=Bt);return n&&bt.forEach(function(Wi){return i(U,Wi)}),Pt&&ri(U,Dt),At}function St(U,j,H,J){if(H==null)throw Error(s(151));for(var At=null,Ft=null,bt=j,Dt=j=0,Bt=null,Ut=H.next();bt!==null&&!Ut.done;Dt++,Ut=H.next()){bt.index>Dt?(Bt=bt,bt=null):Bt=bt.sibling;var Wi=Y(U,bt,Ut.value,J);if(Wi===null){bt===null&&(bt=Bt);break}n&&bt&&Wi.alternate===null&&i(U,bt),j=b(Wi,j,Dt),Ft===null?At=Wi:Ft.sibling=Wi,Ft=Wi,bt=Bt}if(Ut.done)return r(U,bt),Pt&&ri(U,Dt),At;if(bt===null){for(;!Ut.done;Dt++,Ut=H.next())Ut=tt(U,Ut.value,J),Ut!==null&&(j=b(Ut,j,Dt),Ft===null?At=Ut:Ft.sibling=Ut,Ft=Ut);return Pt&&ri(U,Dt),At}for(bt=c(bt);!Ut.done;Dt++,Ut=H.next())Ut=W(bt,U,Dt,Ut.value,J),Ut!==null&&(n&&Ut.alternate!==null&&bt.delete(Ut.key===null?Dt:Ut.key),j=b(Ut,j,Dt),Ft===null?At=Ut:Ft.sibling=Ut,Ft=Ut);return n&&bt.forEach(function(k1){return i(U,k1)}),Pt&&ri(U,Dt),At}function Kt(U,j,H,J){if(typeof H=="object"&&H!==null&&H.type===v&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:t:{for(var At=H.key;j!==null;){if(j.key===At){if(At=H.type,At===v){if(j.tag===7){r(U,j.sibling),J=m(j,H.props.children),J.return=U,U=J;break t}}else if(j.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===F&&ys(At)===j.type){r(U,j.sibling),J=m(j,H.props),or(J,H),J.return=U,U=J;break t}r(U,j);break}else i(U,j);j=j.sibling}H.type===v?(J=fs(H.props.children,U.mode,J,H.key),J.return=U,U=J):(J=xo(H.type,H.key,H.props,null,U.mode,J),or(J,H),J.return=U,U=J)}return w(U);case S:t:{for(At=H.key;j!==null;){if(j.key===At)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){r(U,j.sibling),J=m(j,H.children||[]),J.return=U,U=J;break t}else{r(U,j);break}else i(U,j);j=j.sibling}J=Hc(H,U.mode,J),J.return=U,U=J}return w(U);case F:return H=ys(H),Kt(U,j,H,J)}if(yt(H))return dt(U,j,H,J);if(lt(H)){if(At=lt(H),typeof At!="function")throw Error(s(150));return H=At.call(H),St(U,j,H,J)}if(typeof H.then=="function")return Kt(U,j,Do(H),J);if(H.$$typeof===M)return Kt(U,j,Co(U,H),J);No(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(r(U,j.sibling),J=m(j,H),J.return=U,U=J):(r(U,j),J=Uc(H,U.mode,J),J.return=U,U=J),w(U)):r(U,j)}return function(U,j,H,J){try{rr=0;var At=Kt(U,j,H,J);return sa=null,At}catch(bt){if(bt===ia||bt===Mo)throw bt;var Ft=un(29,bt,null,U.mode);return Ft.lanes=J,Ft.return=U,Ft}}}var As=fm(!0),mm=fm(!1),Oi=!1;function tu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eu(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Li(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Bi(n,i,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ht&2)!==0){var m=c.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),c.pending=i,i=So(n),Qf(n,null,r),i}return wo(n,c,i,r),So(n)}function lr(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,Ke(n,r)}}function nu(n,i){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var m=null,b=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};b===null?m=b=w:b=b.next=w,r=r.next}while(r!==null);b===null?m=b=i:b=b.next=i}else m=b=i;r={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var iu=!1;function cr(){if(iu){var n=na;if(n!==null)throw n}}function ur(n,i,r,c){iu=!1;var m=n.updateQueue;Oi=!1;var b=m.firstBaseUpdate,w=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var D=_,q=D.next;D.next=null,w===null?b=q:w.next=q,w=D;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,_=Z.lastBaseUpdate,_!==w&&(_===null?Z.firstBaseUpdate=q:_.next=q,Z.lastBaseUpdate=D))}if(b!==null){var tt=m.baseState;w=0,Z=q=D=null,_=b;do{var Y=_.lane&-536870913,W=Y!==_.lane;if(W?(Lt&Y)===Y:(c&Y)===Y){Y!==0&&Y===ea&&(iu=!0),Z!==null&&(Z=Z.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var dt=n,St=_;Y=i;var Kt=r;switch(St.tag){case 1:if(dt=St.payload,typeof dt=="function"){tt=dt.call(Kt,tt,Y);break t}tt=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=St.payload,Y=typeof dt=="function"?dt.call(Kt,tt,Y):dt,Y==null)break t;tt=p({},tt,Y);break t;case 2:Oi=!0}}Y=_.callback,Y!==null&&(n.flags|=64,W&&(n.flags|=8192),W=m.callbacks,W===null?m.callbacks=[Y]:W.push(Y))}else W={lane:Y,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Z===null?(q=Z=W,D=tt):Z=Z.next=W,w|=Y;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;W=_,_=W.next,W.next=null,m.lastBaseUpdate=W,m.shared.pending=null}}while(!0);Z===null&&(D=tt),m.baseState=D,m.firstBaseUpdate=q,m.lastBaseUpdate=Z,b===null&&(m.shared.lanes=0),Fi|=w,n.lanes=w,n.memoizedState=tt}}function pm(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function gm(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)pm(r[n],i)}var aa=C(null),ko=C(0);function bm(n,i){n=bi,B(ko,n),B(aa,i),bi=n|i.baseLanes}function su(){B(ko,bi),B(aa,aa.current)}function au(){bi=ko.current,I(aa),I(ko)}var hn=C(null),Cn=null;function Pi(n){var i=n.alternate;B(ue,ue.current&1),B(hn,n),Cn===null&&(i===null||aa.current!==null||i.memoizedState!==null)&&(Cn=n)}function ru(n){B(ue,ue.current),B(hn,n),Cn===null&&(Cn=n)}function ym(n){n.tag===22?(B(ue,ue.current),B(hn,n),Cn===null&&(Cn=n)):zi()}function zi(){B(ue,ue.current),B(hn,hn.current)}function dn(n){I(hn),Cn===n&&(Cn=null),I(ue)}var ue=C(0);function Oo(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||dh(r)||fh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ci=0,Mt=null,Xt=null,pe=null,Lo=!1,ra=!1,ws=!1,Bo=0,hr=0,oa=null,SA=0;function oe(){throw Error(s(321))}function ou(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!cn(n[r],i[r]))return!1;return!0}function lu(n,i,r,c,m,b){return ci=b,Mt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,O.H=n===null||n.memoizedState===null?ep:xu,ws=!1,b=r(c,m),ws=!1,ra&&(b=Am(i,r,c,m)),vm(n),b}function vm(n){O.H=mr;var i=Xt!==null&&Xt.next!==null;if(ci=0,pe=Xt=Mt=null,Lo=!1,hr=0,oa=null,i)throw Error(s(300));n===null||ge||(n=n.dependencies,n!==null&&_o(n)&&(ge=!0))}function Am(n,i,r,c){Mt=n;var m=0;do{if(ra&&(oa=null),hr=0,ra=!1,25<=m)throw Error(s(301));if(m+=1,pe=Xt=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}O.H=np,b=i(r,c)}while(ra);return b}function xA(){var n=O.H,i=n.useState()[0];return i=typeof i.then=="function"?dr(i):i,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(Mt.flags|=1024),i}function cu(){var n=Bo!==0;return Bo=0,n}function uu(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function hu(n){if(Lo){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Lo=!1}ci=0,pe=Xt=Mt=null,ra=!1,hr=Bo=0,oa=null}function qe(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Mt.memoizedState=pe=n:pe=pe.next=n,pe}function he(){if(Xt===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var i=pe===null?Mt.memoizedState:pe.next;if(i!==null)pe=i,Xt=n;else{if(n===null)throw Mt.alternate===null?Error(s(467)):Error(s(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},pe===null?Mt.memoizedState=pe=n:pe=pe.next=n}return pe}function Po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dr(n){var i=hr;return hr+=1,oa===null&&(oa=[]),n=um(oa,n,i),i=Mt,(pe===null?i.memoizedState:pe.next)===null&&(i=i.alternate,O.H=i===null||i.memoizedState===null?ep:xu),n}function zo(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return dr(n);if(n.$$typeof===M)return Re(n)}throw Error(s(438,String(n)))}function du(n){var i=null,r=Mt.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=Mt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=Po(),Mt.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),c=0;c<n;c++)r[c]=it;return i.index++,r}function ui(n,i){return typeof i=="function"?i(n):i}function jo(n){var i=he();return fu(i,Xt,n)}function fu(n,i,r){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var m=n.baseQueue,b=c.pending;if(b!==null){if(m!==null){var w=m.next;m.next=b.next,b.next=w}i.baseQueue=m=b,c.pending=null}if(b=n.baseState,m===null)n.memoizedState=b;else{i=m.next;var _=w=null,D=null,q=i,Z=!1;do{var tt=q.lane&-536870913;if(tt!==q.lane?(Lt&tt)===tt:(ci&tt)===tt){var Y=q.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),tt===ea&&(Z=!0);else if((ci&Y)===Y){q=q.next,Y===ea&&(Z=!0);continue}else tt={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(_=D=tt,w=b):D=D.next=tt,Mt.lanes|=Y,Fi|=Y;tt=q.action,ws&&r(b,tt),b=q.hasEagerState?q.eagerState:r(b,tt)}else Y={lane:tt,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(_=D=Y,w=b):D=D.next=Y,Mt.lanes|=tt,Fi|=tt;q=q.next}while(q!==null&&q!==i);if(D===null?w=b:D.next=_,!cn(b,n.memoizedState)&&(ge=!0,Z&&(r=na,r!==null)))throw r;n.memoizedState=b,n.baseState=w,n.baseQueue=D,c.lastRenderedState=b}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function mu(n){var i=he(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var c=r.dispatch,m=r.pending,b=i.memoizedState;if(m!==null){r.pending=null;var w=m=m.next;do b=n(b,w.action),w=w.next;while(w!==m);cn(b,i.memoizedState)||(ge=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),r.lastRenderedState=b}return[b,c]}function wm(n,i,r){var c=Mt,m=he(),b=Pt;if(b){if(r===void 0)throw Error(s(407));r=r()}else r=i();var w=!cn((Xt||m).memoizedState,r);if(w&&(m.memoizedState=r,ge=!0),m=m.queue,bu(Em.bind(null,c,m,n),[n]),m.getSnapshot!==i||w||pe!==null&&pe.memoizedState.tag&1){if(c.flags|=2048,la(9,{destroy:void 0},xm.bind(null,c,m,r,i),null),Qt===null)throw Error(s(349));b||(ci&127)!==0||Sm(c,i,r)}return r}function Sm(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=Mt.updateQueue,i===null?(i=Po(),Mt.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function xm(n,i,r,c){i.value=r,i.getSnapshot=c,_m(i)&&Cm(n)}function Em(n,i,r){return r(function(){_m(i)&&Cm(n)})}function _m(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!cn(n,r)}catch{return!0}}function Cm(n){var i=ds(n,2);i!==null&&sn(i,n,2)}function pu(n){var i=qe();if(typeof n=="function"){var r=n;if(n=r(),ws){Ln(!0);try{r()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:n},i}function Tm(n,i,r,c){return n.baseState=r,fu(n,Xt,typeof c=="function"?c:ui)}function EA(n,i,r,c,m){if(Uo(n))throw Error(s(485));if(n=i.action,n!==null){var b={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){b.listeners.push(w)}};O.T!==null?r(!0):b.isTransition=!1,c(b),r=i.pending,r===null?(b.next=i.pending=b,Mm(i,b)):(b.next=r.next,i.pending=r.next=b)}}function Mm(n,i){var r=i.action,c=i.payload,m=n.state;if(i.isTransition){var b=O.T,w={};O.T=w;try{var _=r(m,c),D=O.S;D!==null&&D(w,_),Rm(n,i,_)}catch(q){gu(n,i,q)}finally{b!==null&&w.types!==null&&(b.types=w.types),O.T=b}}else try{b=r(m,c),Rm(n,i,b)}catch(q){gu(n,i,q)}}function Rm(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Dm(n,i,c)},function(c){return gu(n,i,c)}):Dm(n,i,r)}function Dm(n,i,r){i.status="fulfilled",i.value=r,Nm(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,Mm(n,r)))}function gu(n,i,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,Nm(i),i=i.next;while(i!==c)}n.action=null}function Nm(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function km(n,i){return i}function Om(n,i){if(Pt){var r=Qt.formState;if(r!==null){t:{var c=Mt;if(Pt){if(Jt){e:{for(var m=Jt,b=_n;m.nodeType!==8;){if(!b){m=null;break e}if(m=Tn(m.nextSibling),m===null){m=null;break e}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){Jt=Tn(m.nextSibling),c=m.data==="F!";break t}}Ni(c)}c=!1}c&&(i=r[0])}}return r=qe(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:i},r.queue=c,r=Zm.bind(null,Mt,c),c.dispatch=r,c=pu(!1),b=Su.bind(null,Mt,!1,c.queue),c=qe(),m={state:i,dispatch:null,action:n,pending:null},c.queue=m,r=EA.bind(null,Mt,m,b,r),m.dispatch=r,c.memoizedState=n,[i,r,!1]}function Lm(n){var i=he();return Bm(i,Xt,n)}function Bm(n,i,r){if(i=fu(n,i,km)[0],n=jo(ui)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=dr(i)}catch(w){throw w===ia?Mo:w}else c=i;i=he();var m=i.queue,b=m.dispatch;return r!==i.memoizedState&&(Mt.flags|=2048,la(9,{destroy:void 0},_A.bind(null,m,r),null)),[c,b,n]}function _A(n,i){n.action=i}function Pm(n){var i=he(),r=Xt;if(r!==null)return Bm(i,r,n);he(),i=i.memoizedState,r=he();var c=r.queue.dispatch;return r.memoizedState=n,[i,c,!1]}function la(n,i,r,c){return n={tag:n,create:r,deps:c,inst:i,next:null},i=Mt.updateQueue,i===null&&(i=Po(),Mt.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,i.lastEffect=n),n}function zm(){return he().memoizedState}function Io(n,i,r,c){var m=qe();Mt.flags|=n,m.memoizedState=la(1|i,{destroy:void 0},r,c===void 0?null:c)}function Fo(n,i,r,c){var m=he();c=c===void 0?null:c;var b=m.memoizedState.inst;Xt!==null&&c!==null&&ou(c,Xt.memoizedState.deps)?m.memoizedState=la(i,b,r,c):(Mt.flags|=n,m.memoizedState=la(1|i,b,r,c))}function jm(n,i){Io(8390656,8,n,i)}function bu(n,i){Fo(2048,8,n,i)}function CA(n){Mt.flags|=4;var i=Mt.updateQueue;if(i===null)i=Po(),Mt.updateQueue=i,i.events=[n];else{var r=i.events;r===null?i.events=[n]:r.push(n)}}function Im(n){var i=he().memoizedState;return CA({ref:i,nextImpl:n}),function(){if((Ht&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Fm(n,i){return Fo(4,2,n,i)}function Um(n,i){return Fo(4,4,n,i)}function Hm(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Gm(n,i,r){r=r!=null?r.concat([n]):null,Fo(4,4,Hm.bind(null,i,n),r)}function yu(){}function qm(n,i){var r=he();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&ou(i,c[1])?c[0]:(r.memoizedState=[n,i],n)}function Vm(n,i){var r=he();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&ou(i,c[1]))return c[0];if(c=n(),ws){Ln(!0);try{n()}finally{Ln(!1)}}return r.memoizedState=[c,i],c}function vu(n,i,r){return r===void 0||(ci&1073741824)!==0&&(Lt&261930)===0?n.memoizedState=i:(n.memoizedState=r,n=Yp(),Mt.lanes|=n,Fi|=n,r)}function Ym(n,i,r,c){return cn(r,i)?r:aa.current!==null?(n=vu(n,r,c),cn(n,i)||(ge=!0),n):(ci&42)===0||(ci&1073741824)!==0&&(Lt&261930)===0?(ge=!0,n.memoizedState=r):(n=Yp(),Mt.lanes|=n,Fi|=n,i)}function Xm(n,i,r,c,m){var b=G.p;G.p=b!==0&&8>b?b:8;var w=O.T,_={};O.T=_,Su(n,!1,i,r);try{var D=m(),q=O.S;if(q!==null&&q(_,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=wA(D,c);fr(n,i,Z,pn(n))}else fr(n,i,c,pn(n))}catch(tt){fr(n,i,{then:function(){},status:"rejected",reason:tt},pn())}finally{G.p=b,w!==null&&_.types!==null&&(w.types=_.types),O.T=w}}function TA(){}function Au(n,i,r,c){if(n.tag!==5)throw Error(s(476));var m=$m(n).queue;Xm(n,m,i,K,r===null?TA:function(){return Km(n),r(c)})}function $m(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:K},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ui,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Km(n){var i=$m(n);i.next===null&&(i=n.alternate.memoizedState),fr(n,i.next.queue,{},pn())}function wu(){return Re(Dr)}function Wm(){return he().memoizedState}function Qm(){return he().memoizedState}function MA(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=pn();n=Li(r);var c=Bi(i,n,r);c!==null&&(sn(c,i,r),lr(c,i,r)),i={cache:Wc()},n.payload=i;return}i=i.return}}function RA(n,i,r){var c=pn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Uo(n)?Jm(i,r):(r=Ic(n,i,r,c),r!==null&&(sn(r,n,c),tp(r,i,c)))}function Zm(n,i,r){var c=pn();fr(n,i,r,c)}function fr(n,i,r,c){var m={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Uo(n))Jm(i,m);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var w=i.lastRenderedState,_=b(w,r);if(m.hasEagerState=!0,m.eagerState=_,cn(_,w))return wo(n,i,m,0),Qt===null&&Ao(),!1}catch{}if(r=Ic(n,i,m,c),r!==null)return sn(r,n,c),tp(r,i,c),!0}return!1}function Su(n,i,r,c){if(c={lane:2,revertLane:th(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Uo(n)){if(i)throw Error(s(479))}else i=Ic(n,r,c,2),i!==null&&sn(i,n,2)}function Uo(n){var i=n.alternate;return n===Mt||i!==null&&i===Mt}function Jm(n,i){ra=Lo=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function tp(n,i,r){if((r&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,Ke(n,r)}}var mr={readContext:Re,use:zo,useCallback:oe,useContext:oe,useEffect:oe,useImperativeHandle:oe,useLayoutEffect:oe,useInsertionEffect:oe,useMemo:oe,useReducer:oe,useRef:oe,useState:oe,useDebugValue:oe,useDeferredValue:oe,useTransition:oe,useSyncExternalStore:oe,useId:oe,useHostTransitionStatus:oe,useFormState:oe,useActionState:oe,useOptimistic:oe,useMemoCache:oe,useCacheRefresh:oe};mr.useEffectEvent=oe;var ep={readContext:Re,use:zo,useCallback:function(n,i){return qe().memoizedState=[n,i===void 0?null:i],n},useContext:Re,useEffect:jm,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,Io(4194308,4,Hm.bind(null,i,n),r)},useLayoutEffect:function(n,i){return Io(4194308,4,n,i)},useInsertionEffect:function(n,i){Io(4,2,n,i)},useMemo:function(n,i){var r=qe();i=i===void 0?null:i;var c=n();if(ws){Ln(!0);try{n()}finally{Ln(!1)}}return r.memoizedState=[c,i],c},useReducer:function(n,i,r){var c=qe();if(r!==void 0){var m=r(i);if(ws){Ln(!0);try{r(i)}finally{Ln(!1)}}}else m=i;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=RA.bind(null,Mt,n),[c.memoizedState,n]},useRef:function(n){var i=qe();return n={current:n},i.memoizedState=n},useState:function(n){n=pu(n);var i=n.queue,r=Zm.bind(null,Mt,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:yu,useDeferredValue:function(n,i){var r=qe();return vu(r,n,i)},useTransition:function(){var n=pu(!1);return n=Xm.bind(null,Mt,n.queue,!0,!1),qe().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var c=Mt,m=qe();if(Pt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),Qt===null)throw Error(s(349));(Lt&127)!==0||Sm(c,i,r)}m.memoizedState=r;var b={value:r,getSnapshot:i};return m.queue=b,jm(Em.bind(null,c,b,n),[n]),c.flags|=2048,la(9,{destroy:void 0},xm.bind(null,c,b,r,i),null),r},useId:function(){var n=qe(),i=Qt.identifierPrefix;if(Pt){var r=qn,c=Gn;r=(c&~(1<<32-je(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Bo++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=SA++,i="_"+i+"r_"+r.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:wu,useFormState:Om,useActionState:Om,useOptimistic:function(n){var i=qe();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=Su.bind(null,Mt,!0,r),r.dispatch=i,[n,i]},useMemoCache:du,useCacheRefresh:function(){return qe().memoizedState=MA.bind(null,Mt)},useEffectEvent:function(n){var i=qe(),r={impl:n};return i.memoizedState=r,function(){if((Ht&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},xu={readContext:Re,use:zo,useCallback:qm,useContext:Re,useEffect:bu,useImperativeHandle:Gm,useInsertionEffect:Fm,useLayoutEffect:Um,useMemo:Vm,useReducer:jo,useRef:zm,useState:function(){return jo(ui)},useDebugValue:yu,useDeferredValue:function(n,i){var r=he();return Ym(r,Xt.memoizedState,n,i)},useTransition:function(){var n=jo(ui)[0],i=he().memoizedState;return[typeof n=="boolean"?n:dr(n),i]},useSyncExternalStore:wm,useId:Wm,useHostTransitionStatus:wu,useFormState:Lm,useActionState:Lm,useOptimistic:function(n,i){var r=he();return Tm(r,Xt,n,i)},useMemoCache:du,useCacheRefresh:Qm};xu.useEffectEvent=Im;var np={readContext:Re,use:zo,useCallback:qm,useContext:Re,useEffect:bu,useImperativeHandle:Gm,useInsertionEffect:Fm,useLayoutEffect:Um,useMemo:Vm,useReducer:mu,useRef:zm,useState:function(){return mu(ui)},useDebugValue:yu,useDeferredValue:function(n,i){var r=he();return Xt===null?vu(r,n,i):Ym(r,Xt.memoizedState,n,i)},useTransition:function(){var n=mu(ui)[0],i=he().memoizedState;return[typeof n=="boolean"?n:dr(n),i]},useSyncExternalStore:wm,useId:Wm,useHostTransitionStatus:wu,useFormState:Pm,useActionState:Pm,useOptimistic:function(n,i){var r=he();return Xt!==null?Tm(r,Xt,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:du,useCacheRefresh:Qm};np.useEffectEvent=Im;function Eu(n,i,r,c){i=n.memoizedState,r=r(c,i),r=r==null?i:p({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var _u={enqueueSetState:function(n,i,r){n=n._reactInternals;var c=pn(),m=Li(c);m.payload=i,r!=null&&(m.callback=r),i=Bi(n,m,c),i!==null&&(sn(i,n,c),lr(i,n,c))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var c=pn(),m=Li(c);m.tag=1,m.payload=i,r!=null&&(m.callback=r),i=Bi(n,m,c),i!==null&&(sn(i,n,c),lr(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=pn(),c=Li(r);c.tag=2,i!=null&&(c.callback=i),i=Bi(n,c,r),i!==null&&(sn(i,n,r),lr(i,n,r))}};function ip(n,i,r,c,m,b,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,b,w):i.prototype&&i.prototype.isPureReactComponent?!tr(r,c)||!tr(m,b):!0}function sp(n,i,r,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==n&&_u.enqueueReplaceState(i,i.state,null)}function Ss(n,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(n=n.defaultProps){r===i&&(r=p({},r));for(var m in n)r[m]===void 0&&(r[m]=n[m])}return r}function ap(n){vo(n)}function rp(n){console.error(n)}function op(n){vo(n)}function Ho(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function lp(n,i,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Cu(n,i,r){return r=Li(r),r.tag=3,r.payload={element:null},r.callback=function(){Ho(n,i)},r}function cp(n){return n=Li(n),n.tag=3,n}function up(n,i,r,c){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var b=c.value;n.payload=function(){return m(b)},n.callback=function(){lp(i,r,c)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(n.callback=function(){lp(i,r,c),typeof m!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function DA(n,i,r,c,m){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&ta(i,r,m,!0),r=hn.current,r!==null){switch(r.tag){case 31:case 13:return Cn===null?tl():r.alternate===null&&le===0&&(le=3),r.flags&=-257,r.flags|=65536,r.lanes=m,c===Ro?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),Qu(n,c,m)),!1;case 22:return r.flags|=65536,c===Ro?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),Qu(n,c,m)),!1}throw Error(s(435,r.tag))}return Qu(n,c,m),tl(),!1}if(Pt)return i=hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,c!==Vc&&(n=Error(s(422),{cause:c}),ir(Sn(n,r)))):(c!==Vc&&(i=Error(s(423),{cause:c}),ir(Sn(i,r))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=Sn(c,r),m=Cu(n.stateNode,c,m),nu(n,m),le!==4&&(le=2)),!1;var b=Error(s(520),{cause:c});if(b=Sn(b,r),Sr===null?Sr=[b]:Sr.push(b),le!==4&&(le=2),i===null)return!0;c=Sn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=m&-m,r.lanes|=n,n=Cu(r.stateNode,c,n),nu(r,n),!1;case 1:if(i=r.type,b=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ui===null||!Ui.has(b))))return r.flags|=65536,m&=-m,r.lanes|=m,m=cp(m),up(m,n,r,c),nu(r,m),!1}r=r.return}while(r!==null);return!1}var Tu=Error(s(461)),ge=!1;function De(n,i,r,c){i.child=n===null?mm(i,null,r,c):As(i,n.child,r,c)}function hp(n,i,r,c,m){r=r.render;var b=i.ref;if("ref"in c){var w={};for(var _ in c)_!=="ref"&&(w[_]=c[_])}else w=c;return gs(i),c=lu(n,i,r,w,b,m),_=cu(),n!==null&&!ge?(uu(n,i,m),hi(n,i,m)):(Pt&&_&&Gc(i),i.flags|=1,De(n,i,c,m),i.child)}function dp(n,i,r,c,m){if(n===null){var b=r.type;return typeof b=="function"&&!Fc(b)&&b.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=b,fp(n,i,b,c,m)):(n=xo(r.type,null,c,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(b=n.child,!Bu(n,m)){var w=b.memoizedProps;if(r=r.compare,r=r!==null?r:tr,r(w,c)&&n.ref===i.ref)return hi(n,i,m)}return i.flags|=1,n=ai(b,c),n.ref=i.ref,n.return=i,i.child=n}function fp(n,i,r,c,m){if(n!==null){var b=n.memoizedProps;if(tr(b,c)&&n.ref===i.ref)if(ge=!1,i.pendingProps=c=b,Bu(n,m))(n.flags&131072)!==0&&(ge=!0);else return i.lanes=n.lanes,hi(n,i,m)}return Mu(n,i,r,c,m)}function mp(n,i,r,c){var m=c.children,b=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|r:r,n!==null){for(c=i.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~b}else c=0,i.child=null;return pp(n,i,b,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&To(i,b!==null?b.cachePool:null),b!==null?bm(i,b):su(),ym(i);else return c=i.lanes=536870912,pp(n,i,b!==null?b.baseLanes|r:r,r,c)}else b!==null?(To(i,b.cachePool),bm(i,b),zi(),i.memoizedState=null):(n!==null&&To(i,null),su(),zi());return De(n,i,m,r),i.child}function pr(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function pp(n,i,r,c,m){var b=Zc();return b=b===null?null:{parent:me._currentValue,pool:b},i.memoizedState={baseLanes:r,cachePool:b},n!==null&&To(i,null),su(),ym(i),n!==null&&ta(n,i,c,!0),i.childLanes=m,null}function Go(n,i){return i=Vo({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function gp(n,i,r){return As(i,n.child,null,r),n=Go(i,i.pendingProps),n.flags|=2,dn(i),i.memoizedState=null,n}function NA(n,i,r){var c=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Pt){if(c.mode==="hidden")return n=Go(i,c),i.lanes=536870912,pr(null,n);if(ru(i),(n=Jt)?(n=Mg(n,_n),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ri!==null?{id:Gn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},r=Jf(n),r.return=i,i.child=r,Me=i,Jt=null)):n=null,n===null)throw Ni(i);return i.lanes=536870912,null}return Go(i,c)}var b=n.memoizedState;if(b!==null){var w=b.dehydrated;if(ru(i),m)if(i.flags&256)i.flags&=-257,i=gp(n,i,r);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(ge||ta(n,i,r,!1),m=(r&n.childLanes)!==0,ge||m){if(c=Qt,c!==null&&(w=We(c,r),w!==0&&w!==b.retryLane))throw b.retryLane=w,ds(n,w),sn(c,n,w),Tu;tl(),i=gp(n,i,r)}else n=b.treeContext,Jt=Tn(w.nextSibling),Me=i,Pt=!0,Di=null,_n=!1,n!==null&&nm(i,n),i=Go(i,c),i.flags|=4096;return i}return n=ai(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function qo(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function Mu(n,i,r,c,m){return gs(i),r=lu(n,i,r,c,void 0,m),c=cu(),n!==null&&!ge?(uu(n,i,m),hi(n,i,m)):(Pt&&c&&Gc(i),i.flags|=1,De(n,i,r,m),i.child)}function bp(n,i,r,c,m,b){return gs(i),i.updateQueue=null,r=Am(i,c,r,m),vm(n),c=cu(),n!==null&&!ge?(uu(n,i,b),hi(n,i,b)):(Pt&&c&&Gc(i),i.flags|=1,De(n,i,r,b),i.child)}function yp(n,i,r,c,m){if(gs(i),i.stateNode===null){var b=Ws,w=r.contextType;typeof w=="object"&&w!==null&&(b=Re(w)),b=new r(c,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_u,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=c,b.state=i.memoizedState,b.refs={},tu(i),w=r.contextType,b.context=typeof w=="object"&&w!==null?Re(w):Ws,b.state=i.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(Eu(i,r,w,c),b.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(w=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),w!==b.state&&_u.enqueueReplaceState(b,b.state,null),ur(i,c,b,m),cr(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){b=i.stateNode;var _=i.memoizedProps,D=Ss(r,_);b.props=D;var q=b.context,Z=r.contextType;w=Ws,typeof Z=="object"&&Z!==null&&(w=Re(Z));var tt=r.getDerivedStateFromProps;Z=typeof tt=="function"||typeof b.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,Z||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_||q!==w)&&sp(i,b,c,w),Oi=!1;var Y=i.memoizedState;b.state=Y,ur(i,c,b,m),cr(),q=i.memoizedState,_||Y!==q||Oi?(typeof tt=="function"&&(Eu(i,r,tt,c),q=i.memoizedState),(D=Oi||ip(i,r,D,c,Y,q,w))?(Z||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=q),b.props=c,b.state=q,b.context=w,c=D):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{b=i.stateNode,eu(n,i),w=i.memoizedProps,Z=Ss(r,w),b.props=Z,tt=i.pendingProps,Y=b.context,q=r.contextType,D=Ws,typeof q=="object"&&q!==null&&(D=Re(q)),_=r.getDerivedStateFromProps,(q=typeof _=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(w!==tt||Y!==D)&&sp(i,b,c,D),Oi=!1,Y=i.memoizedState,b.state=Y,ur(i,c,b,m),cr();var W=i.memoizedState;w!==tt||Y!==W||Oi||n!==null&&n.dependencies!==null&&_o(n.dependencies)?(typeof _=="function"&&(Eu(i,r,_,c),W=i.memoizedState),(Z=Oi||ip(i,r,Z,c,Y,W,D)||n!==null&&n.dependencies!==null&&_o(n.dependencies))?(q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,W,D),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,W,D)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=W),b.props=c,b.state=W,b.context=D,c=Z):(typeof b.componentDidUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||w===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return b=c,qo(n,i),c=(i.flags&128)!==0,b||c?(b=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,n!==null&&c?(i.child=As(i,n.child,null,m),i.child=As(i,null,r,m)):De(n,i,r,m),i.memoizedState=b.state,n=i.child):n=hi(n,i,m),n}function vp(n,i,r,c){return ms(),i.flags|=256,De(n,i,r,c),i.child}var Ru={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Du(n){return{baseLanes:n,cachePool:lm()}}function Nu(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=mn),n}function Ap(n,i,r){var c=i.pendingProps,m=!1,b=(i.flags&128)!==0,w;if((w=b)||(w=n!==null&&n.memoizedState===null?!1:(ue.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,n===null){if(Pt){if(m?Pi(i):zi(),(n=Jt)?(n=Mg(n,_n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ri!==null?{id:Gn,overflow:qn}:null,retryLane:536870912,hydrationErrors:null},r=Jf(n),r.return=i,i.child=r,Me=i,Jt=null)):n=null,n===null)throw Ni(i);return fh(n)?i.lanes=32:i.lanes=536870912,null}var _=c.children;return c=c.fallback,m?(zi(),m=i.mode,_=Vo({mode:"hidden",children:_},m),c=fs(c,m,r,null),_.return=i,c.return=i,_.sibling=c,i.child=_,c=i.child,c.memoizedState=Du(r),c.childLanes=Nu(n,w,r),i.memoizedState=Ru,pr(null,c)):(Pi(i),ku(i,_))}var D=n.memoizedState;if(D!==null&&(_=D.dehydrated,_!==null)){if(b)i.flags&256?(Pi(i),i.flags&=-257,i=Ou(n,i,r)):i.memoizedState!==null?(zi(),i.child=n.child,i.flags|=128,i=null):(zi(),_=c.fallback,m=i.mode,c=Vo({mode:"visible",children:c.children},m),_=fs(_,m,r,null),_.flags|=2,c.return=i,_.return=i,c.sibling=_,i.child=c,As(i,n.child,null,r),c=i.child,c.memoizedState=Du(r),c.childLanes=Nu(n,w,r),i.memoizedState=Ru,i=pr(null,c));else if(Pi(i),fh(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var q=w.dgst;w=q,c=Error(s(419)),c.stack="",c.digest=w,ir({value:c,source:null,stack:null}),i=Ou(n,i,r)}else if(ge||ta(n,i,r,!1),w=(r&n.childLanes)!==0,ge||w){if(w=Qt,w!==null&&(c=We(w,r),c!==0&&c!==D.retryLane))throw D.retryLane=c,ds(n,c),sn(w,n,c),Tu;dh(_)||tl(),i=Ou(n,i,r)}else dh(_)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,Jt=Tn(_.nextSibling),Me=i,Pt=!0,Di=null,_n=!1,n!==null&&nm(i,n),i=ku(i,c.children),i.flags|=4096);return i}return m?(zi(),_=c.fallback,m=i.mode,D=n.child,q=D.sibling,c=ai(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,q!==null?_=ai(q,_):(_=fs(_,m,r,null),_.flags|=2),_.return=i,c.return=i,c.sibling=_,i.child=c,pr(null,c),c=i.child,_=n.child.memoizedState,_===null?_=Du(r):(m=_.cachePool,m!==null?(D=me._currentValue,m=m.parent!==D?{parent:D,pool:D}:m):m=lm(),_={baseLanes:_.baseLanes|r,cachePool:m}),c.memoizedState=_,c.childLanes=Nu(n,w,r),i.memoizedState=Ru,pr(n.child,c)):(Pi(i),r=n.child,n=r.sibling,r=ai(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,n!==null&&(w=i.deletions,w===null?(i.deletions=[n],i.flags|=16):w.push(n)),i.child=r,i.memoizedState=null,r)}function ku(n,i){return i=Vo({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Vo(n,i){return n=un(22,n,null,i),n.lanes=0,n}function Ou(n,i,r){return As(i,n.child,null,r),n=ku(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function wp(n,i,r){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),$c(n.return,i,r)}function Lu(n,i,r,c,m,b){var w=n.memoizedState;w===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:m,treeForkCount:b}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=r,w.tailMode=m,w.treeForkCount=b)}function Sp(n,i,r){var c=i.pendingProps,m=c.revealOrder,b=c.tail;c=c.children;var w=ue.current,_=(w&2)!==0;if(_?(w=w&1|2,i.flags|=128):w&=1,B(ue,w),De(n,i,c,r),c=Pt?nr:0,!_&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wp(n,r,i);else if(n.tag===19)wp(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(r=i.child,m=null;r!==null;)n=r.alternate,n!==null&&Oo(n)===null&&(m=r),r=r.sibling;r=m,r===null?(m=i.child,i.child=null):(m=r.sibling,r.sibling=null),Lu(i,!1,m,r,b,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&Oo(n)===null){i.child=m;break}n=m.sibling,m.sibling=r,r=m,m=n}Lu(i,!0,r,null,b,c);break;case"together":Lu(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function hi(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),Fi|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(ta(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,r=ai(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=ai(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function Bu(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&_o(n)))}function kA(n,i,r){switch(i.tag){case 3:ct(i,i.stateNode.containerInfo),ki(i,me,n.memoizedState.cache),ms();break;case 27:case 5:vt(i);break;case 4:ct(i,i.stateNode.containerInfo);break;case 10:ki(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,ru(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Pi(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Ap(n,i,r):(Pi(i),n=hi(n,i,r),n!==null?n.sibling:null);Pi(i);break;case 19:var m=(n.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(ta(n,i,r,!1),c=(r&i.childLanes)!==0),m){if(c)return Sp(n,i,r);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),B(ue,ue.current),c)break;return null;case 22:return i.lanes=0,mp(n,i,r,i.pendingProps);case 24:ki(i,me,n.memoizedState.cache)}return hi(n,i,r)}function xp(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)ge=!0;else{if(!Bu(n,r)&&(i.flags&128)===0)return ge=!1,kA(n,i,r);ge=(n.flags&131072)!==0}else ge=!1,Pt&&(i.flags&1048576)!==0&&em(i,nr,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(n=ys(i.elementType),i.type=n,typeof n=="function")Fc(n)?(c=Ss(n,c),i.tag=1,i=yp(null,i,n,c,r)):(i.tag=0,i=Mu(null,i,n,c,r));else{if(n!=null){var m=n.$$typeof;if(m===N){i.tag=11,i=hp(null,i,n,c,r);break t}else if(m===P){i.tag=14,i=dp(null,i,n,c,r);break t}}throw i=gt(n)||n,Error(s(306,i,""))}}return i;case 0:return Mu(n,i,i.type,i.pendingProps,r);case 1:return c=i.type,m=Ss(c,i.pendingProps),yp(n,i,c,m,r);case 3:t:{if(ct(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var b=i.memoizedState;m=b.element,eu(n,i),ur(i,c,null,r);var w=i.memoizedState;if(c=w.cache,ki(i,me,c),c!==b.cache&&Kc(i,[me],r,!0),cr(),c=w.element,b.isDehydrated)if(b={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=vp(n,i,c,r);break t}else if(c!==m){m=Sn(Error(s(424)),i),ir(m),i=vp(n,i,c,r);break t}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Jt=Tn(n.firstChild),Me=i,Pt=!0,Di=null,_n=!0,r=mm(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ms(),c===m){i=hi(n,i,r);break t}De(n,i,c,r)}i=i.child}return i;case 26:return qo(n,i),n===null?(r=Lg(i.type,null,i.pendingProps,null))?i.memoizedState=r:Pt||(r=i.type,n=i.pendingProps,c=ol(rt.current).createElement(r),c[Te]=i,c[Qe]=n,Ne(c,r,n),xe(c),i.stateNode=c):i.memoizedState=Lg(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return vt(i),n===null&&Pt&&(c=i.stateNode=Ng(i.type,i.pendingProps,rt.current),Me=i,_n=!0,m=Jt,Vi(i.type)?(mh=m,Jt=Tn(c.firstChild)):Jt=m),De(n,i,i.pendingProps.children,r),qo(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Pt&&((m=c=Jt)&&(c=l1(c,i.type,i.pendingProps,_n),c!==null?(i.stateNode=c,Me=i,Jt=Tn(c.firstChild),_n=!1,m=!0):m=!1),m||Ni(i)),vt(i),m=i.type,b=i.pendingProps,w=n!==null?n.memoizedProps:null,c=b.children,ch(m,b)?c=null:w!==null&&ch(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=lu(n,i,xA,null,null,r),Dr._currentValue=m),qo(n,i),De(n,i,c,r),i.child;case 6:return n===null&&Pt&&((n=r=Jt)&&(r=c1(r,i.pendingProps,_n),r!==null?(i.stateNode=r,Me=i,Jt=null,n=!0):n=!1),n||Ni(i)),null;case 13:return Ap(n,i,r);case 4:return ct(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=As(i,null,c,r):De(n,i,c,r),i.child;case 11:return hp(n,i,i.type,i.pendingProps,r);case 7:return De(n,i,i.pendingProps,r),i.child;case 8:return De(n,i,i.pendingProps.children,r),i.child;case 12:return De(n,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,ki(i,i.type,c.value),De(n,i,c.children,r),i.child;case 9:return m=i.type._context,c=i.pendingProps.children,gs(i),m=Re(m),c=c(m),i.flags|=1,De(n,i,c,r),i.child;case 14:return dp(n,i,i.type,i.pendingProps,r);case 15:return fp(n,i,i.type,i.pendingProps,r);case 19:return Sp(n,i,r);case 31:return NA(n,i,r);case 22:return mp(n,i,r,i.pendingProps);case 24:return gs(i),c=Re(me),n===null?(m=Zc(),m===null&&(m=Qt,b=Wc(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=r),m=b),i.memoizedState={parent:c,cache:m},tu(i),ki(i,me,m)):((n.lanes&r)!==0&&(eu(n,i),ur(i,null,null,r),cr()),m=n.memoizedState,b=i.memoizedState,m.parent!==c?(m={parent:c,cache:c},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),ki(i,me,c)):(c=b.cache,ki(i,me,c),c!==m.cache&&Kc(i,[me],r,!0))),De(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function di(n){n.flags|=4}function Pu(n,i,r,c,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(Wp())n.flags|=8192;else throw vs=Ro,Jc}else n.flags&=-16777217}function Ep(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Ig(i))if(Wp())n.flags|=8192;else throw vs=Ro,Jc}function Yo(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ie():536870912,n.lanes|=i,da|=i)}function gr(n,i){if(!Pt)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function te(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(i)for(var m=n.child;m!==null;)r|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)r|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=r,i}function OA(n,i,r){var c=i.pendingProps;switch(qc(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(i),null;case 1:return te(i),null;case 3:return r=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),li(me),ot(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Js(i)?di(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yc())),te(i),null;case 26:var m=i.type,b=i.memoizedState;return n===null?(di(i),b!==null?(te(i),Ep(i,b)):(te(i),Pu(i,m,null,c,r))):b?b!==n.memoizedState?(di(i),te(i),Ep(i,b)):(te(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&di(i),te(i),Pu(i,m,n,c,r)),null;case 27:if(Rt(i),r=rt.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return te(i),null}n=$.current,Js(i)?im(i):(n=Ng(m,c,r),i.stateNode=n,di(i))}return te(i),null;case 5:if(Rt(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return te(i),null}if(b=$.current,Js(i))im(i);else{var w=ol(rt.current);switch(b){case 1:b=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:b=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":b=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":b=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":b=w.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?b.multiple=!0:c.size&&(b.size=c.size);break;default:b=typeof c.is=="string"?w.createElement(m,{is:c.is}):w.createElement(m)}}b[Te]=i,b[Qe]=c;t:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)b.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break t;for(;w.sibling===null;){if(w.return===null||w.return===i)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=b;t:switch(Ne(b,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&di(i)}}return te(i),Pu(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,r),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=rt.current,Js(i)){if(n=i.stateNode,r=i.memoizedProps,c=null,m=Me,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[Te]=i,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Ag(n.nodeValue,r)),n||Ni(i,!0)}else n=ol(n).createTextNode(c),n[Te]=i,i.stateNode=n}return te(i),null;case 31:if(r=i.memoizedState,n===null||n.memoizedState!==null){if(c=Js(i),r!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Te]=i}else ms(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;te(i),n=!1}else r=Yc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return i.flags&256?(dn(i),i):(dn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return te(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Js(i),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Te]=i}else ms(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;te(i),m=!1}else m=Yc(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(dn(i),i):(dn(i),null)}return dn(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=i.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),b=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),b!==m&&(c.flags|=2048)),r!==n&&r&&(i.child.flags|=8192),Yo(i,i.updateQueue),te(i),null);case 4:return ot(),n===null&&sh(i.stateNode.containerInfo),te(i),null;case 10:return li(i.type),te(i),null;case 19:if(I(ue),c=i.memoizedState,c===null)return te(i),null;if(m=(i.flags&128)!==0,b=c.rendering,b===null)if(m)gr(c,!1);else{if(le!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(b=Oo(n),b!==null){for(i.flags|=128,gr(c,!1),n=b.updateQueue,i.updateQueue=n,Yo(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)Zf(r,n),r=r.sibling;return B(ue,ue.current&1|2),Pt&&ri(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&He()>Qo&&(i.flags|=128,m=!0,gr(c,!1),i.lanes=4194304)}else{if(!m)if(n=Oo(b),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,Yo(i,n),gr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!b.alternate&&!Pt)return te(i),null}else 2*He()-c.renderingStartTime>Qo&&r!==536870912&&(i.flags|=128,m=!0,gr(c,!1),i.lanes=4194304);c.isBackwards?(b.sibling=i.child,i.child=b):(n=c.last,n!==null?n.sibling=b:i.child=b,c.last=b)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=He(),n.sibling=null,r=ue.current,B(ue,m?r&1|2:r&1),Pt&&ri(i,c.treeForkCount),n):(te(i),null);case 22:case 23:return dn(i),au(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(te(i),i.subtreeFlags&6&&(i.flags|=8192)):te(i),r=i.updateQueue,r!==null&&Yo(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),n!==null&&I(bs),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),li(me),te(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function LA(n,i){switch(qc(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return li(me),ot(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Rt(i),null;case 31:if(i.memoizedState!==null){if(dn(i),i.alternate===null)throw Error(s(340));ms()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(dn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ms()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return I(ue),null;case 4:return ot(),null;case 10:return li(i.type),null;case 22:case 23:return dn(i),au(),n!==null&&I(bs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return li(me),null;case 25:return null;default:return null}}function _p(n,i){switch(qc(i),i.tag){case 3:li(me),ot();break;case 26:case 27:case 5:Rt(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&dn(i);break;case 13:dn(i);break;case 19:I(ue);break;case 10:li(i.type);break;case 22:case 23:dn(i),au(),n!==null&&I(bs);break;case 24:li(me)}}function br(n,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var m=c.next;r=m;do{if((r.tag&n)===n){c=void 0;var b=r.create,w=r.inst;c=b(),w.destroy=c}r=r.next}while(r!==m)}}catch(_){Yt(i,i.return,_)}}function ji(n,i,r){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var b=m.next;c=b;do{if((c.tag&n)===n){var w=c.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,m=i;var D=r,q=_;try{q()}catch(Z){Yt(m,D,Z)}}}c=c.next}while(c!==b)}}catch(Z){Yt(i,i.return,Z)}}function Cp(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{gm(i,r)}catch(c){Yt(n,n.return,c)}}}function Tp(n,i,r){r.props=Ss(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){Yt(n,i,c)}}function yr(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(m){Yt(n,i,m)}}function Vn(n,i){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(m){Yt(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Yt(n,i,m)}else r.current=null}function Mp(n){var i=n.type,r=n.memoizedProps,c=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(m){Yt(n,n.return,m)}}function zu(n,i,r){try{var c=n.stateNode;n1(c,n.type,r,i),c[Qe]=i}catch(m){Yt(n,n.return,m)}}function Rp(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Vi(n.type)||n.tag===4}function ju(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Rp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Vi(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Iu(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=ii));else if(c!==4&&(c===27&&Vi(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(Iu(n,i,r),n=n.sibling;n!==null;)Iu(n,i,r),n=n.sibling}function Xo(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(c!==4&&(c===27&&Vi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Xo(n,i,r),n=n.sibling;n!==null;)Xo(n,i,r),n=n.sibling}function Dp(n){var i=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Ne(i,c,r),i[Te]=n,i[Qe]=r}catch(b){Yt(n,n.return,b)}}var fi=!1,be=!1,Fu=!1,Np=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function BA(n,i){if(n=n.containerInfo,oh=ml,n=Gf(n),Oc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var m=c.anchorOffset,b=c.focusNode;c=c.focusOffset;try{r.nodeType,b.nodeType}catch{r=null;break t}var w=0,_=-1,D=-1,q=0,Z=0,tt=n,Y=null;e:for(;;){for(var W;tt!==r||m!==0&&tt.nodeType!==3||(_=w+m),tt!==b||c!==0&&tt.nodeType!==3||(D=w+c),tt.nodeType===3&&(w+=tt.nodeValue.length),(W=tt.firstChild)!==null;)Y=tt,tt=W;for(;;){if(tt===n)break e;if(Y===r&&++q===m&&(_=w),Y===b&&++Z===c&&(D=w),(W=tt.nextSibling)!==null)break;tt=Y,Y=tt.parentNode}tt=W}r=_===-1||D===-1?null:{start:_,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(lh={focusedElem:n,selectionRange:r},ml=!1,Ee=i;Ee!==null;)if(i=Ee,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Ee=n;else for(;Ee!==null;){switch(i=Ee,b=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)m=n[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,r=i,m=b.memoizedProps,b=b.memoizedState,c=r.stateNode;try{var dt=Ss(r.type,m);n=c.getSnapshotBeforeUpdate(dt,b),c.__reactInternalSnapshotBeforeUpdate=n}catch(St){Yt(r,r.return,St)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)hh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":hh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Ee=n;break}Ee=i.return}}function kp(n,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:pi(n,r),c&4&&br(5,r);break;case 1:if(pi(n,r),c&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(w){Yt(r,r.return,w)}else{var m=Ss(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(w){Yt(r,r.return,w)}}c&64&&Cp(r),c&512&&yr(r,r.return);break;case 3:if(pi(n,r),c&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{gm(n,i)}catch(w){Yt(r,r.return,w)}}break;case 27:i===null&&c&4&&Dp(r);case 26:case 5:pi(n,r),i===null&&c&4&&Mp(r),c&512&&yr(r,r.return);break;case 12:pi(n,r);break;case 31:pi(n,r),c&4&&Bp(n,r);break;case 13:pi(n,r),c&4&&Pp(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=qA.bind(null,r),u1(n,r))));break;case 22:if(c=r.memoizedState!==null||fi,!c){i=i!==null&&i.memoizedState!==null||be,m=fi;var b=be;fi=c,(be=i)&&!b?gi(n,r,(r.subtreeFlags&8772)!==0):pi(n,r),fi=m,be=b}break;case 30:break;default:pi(n,r)}}function Op(n){var i=n.alternate;i!==null&&(n.alternate=null,Op(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&gc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ie=null,Je=!1;function mi(n,i,r){for(r=r.child;r!==null;)Lp(n,i,r),r=r.sibling}function Lp(n,i,r){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(as,r)}catch{}switch(r.tag){case 26:be||Vn(r,i),mi(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:be||Vn(r,i);var c=ie,m=Je;Vi(r.type)&&(ie=r.stateNode,Je=!1),mi(n,i,r),Tr(r.stateNode),ie=c,Je=m;break;case 5:be||Vn(r,i);case 6:if(c=ie,m=Je,ie=null,mi(n,i,r),ie=c,Je=m,ie!==null)if(Je)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(r.stateNode)}catch(b){Yt(r,i,b)}else try{ie.removeChild(r.stateNode)}catch(b){Yt(r,i,b)}break;case 18:ie!==null&&(Je?(n=ie,Cg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Aa(n)):Cg(ie,r.stateNode));break;case 4:c=ie,m=Je,ie=r.stateNode.containerInfo,Je=!0,mi(n,i,r),ie=c,Je=m;break;case 0:case 11:case 14:case 15:ji(2,r,i),be||ji(4,r,i),mi(n,i,r);break;case 1:be||(Vn(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Tp(r,i,c)),mi(n,i,r);break;case 21:mi(n,i,r);break;case 22:be=(c=be)||r.memoizedState!==null,mi(n,i,r),be=c;break;default:mi(n,i,r)}}function Bp(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Aa(n)}catch(r){Yt(i,i.return,r)}}}function Pp(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Aa(n)}catch(r){Yt(i,i.return,r)}}function PA(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Np),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Np),i;default:throw Error(s(435,n.tag))}}function $o(n,i){var r=PA(n);i.forEach(function(c){if(!r.has(c)){r.add(c);var m=VA.bind(null,n,c);c.then(m,m)}})}function tn(n,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var m=r[c],b=n,w=i,_=w;t:for(;_!==null;){switch(_.tag){case 27:if(Vi(_.type)){ie=_.stateNode,Je=!1;break t}break;case 5:ie=_.stateNode,Je=!1;break t;case 3:case 4:ie=_.stateNode.containerInfo,Je=!0;break t}_=_.return}if(ie===null)throw Error(s(160));Lp(b,w,m),ie=null,Je=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)zp(i,n),i=i.sibling}var zn=null;function zp(n,i){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:tn(i,n),en(n),c&4&&(ji(3,n,n.return),br(3,n),ji(5,n,n.return));break;case 1:tn(i,n),en(n),c&512&&(be||r===null||Vn(r,r.return)),c&64&&fi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var m=zn;if(tn(i,n),en(n),c&512&&(be||r===null||Vn(r,r.return)),c&4){var b=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){t:{c=n.type,r=n.memoizedProps,m=m.ownerDocument||m;e:switch(c){case"title":b=m.getElementsByTagName("title")[0],(!b||b[Va]||b[Te]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(c),m.head.insertBefore(b,m.querySelector("head > title"))),Ne(b,c,r),b[Te]=n,xe(b),c=b;break t;case"link":var w=zg("link","href",m).get(c+(r.href||""));if(w){for(var _=0;_<w.length;_++)if(b=w[_],b.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&b.getAttribute("rel")===(r.rel==null?null:r.rel)&&b.getAttribute("title")===(r.title==null?null:r.title)&&b.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(_,1);break e}}b=m.createElement(c),Ne(b,c,r),m.head.appendChild(b);break;case"meta":if(w=zg("meta","content",m).get(c+(r.content||""))){for(_=0;_<w.length;_++)if(b=w[_],b.getAttribute("content")===(r.content==null?null:""+r.content)&&b.getAttribute("name")===(r.name==null?null:r.name)&&b.getAttribute("property")===(r.property==null?null:r.property)&&b.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&b.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(_,1);break e}}b=m.createElement(c),Ne(b,c,r),m.head.appendChild(b);break;default:throw Error(s(468,c))}b[Te]=n,xe(b),c=b}n.stateNode=c}else jg(m,n.type,n.stateNode);else n.stateNode=Pg(m,c,n.memoizedProps);else b!==c?(b===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):b.count--,c===null?jg(m,n.type,n.stateNode):Pg(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&zu(n,n.memoizedProps,r.memoizedProps)}break;case 27:tn(i,n),en(n),c&512&&(be||r===null||Vn(r,r.return)),r!==null&&c&4&&zu(n,n.memoizedProps,r.memoizedProps);break;case 5:if(tn(i,n),en(n),c&512&&(be||r===null||Vn(r,r.return)),n.flags&32){m=n.stateNode;try{Gs(m,"")}catch(dt){Yt(n,n.return,dt)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,zu(n,m,r!==null?r.memoizedProps:m)),c&1024&&(Fu=!0);break;case 6:if(tn(i,n),en(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(dt){Yt(n,n.return,dt)}}break;case 3:if(ul=null,m=zn,zn=ll(i.containerInfo),tn(i,n),zn=m,en(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Aa(i.containerInfo)}catch(dt){Yt(n,n.return,dt)}Fu&&(Fu=!1,jp(n));break;case 4:c=zn,zn=ll(n.stateNode.containerInfo),tn(i,n),en(n),zn=c;break;case 12:tn(i,n),en(n);break;case 31:tn(i,n),en(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$o(n,c)));break;case 13:tn(i,n),en(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Wo=He()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$o(n,c)));break;case 22:m=n.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,q=fi,Z=be;if(fi=q||m,be=Z||D,tn(i,n),be=Z,fi=q,en(n),c&8192)t:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(r===null||D||fi||be||xs(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){D=r=i;try{if(b=D.stateNode,m)w=b.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=D.stateNode;var tt=D.memoizedProps.style,Y=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;_.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(dt){Yt(D,D.return,dt)}}}else if(i.tag===6){if(r===null){D=i;try{D.stateNode.nodeValue=m?"":D.memoizedProps}catch(dt){Yt(D,D.return,dt)}}}else if(i.tag===18){if(r===null){D=i;try{var W=D.stateNode;m?Tg(W,!0):Tg(D.stateNode,!1)}catch(dt){Yt(D,D.return,dt)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,$o(n,r))));break;case 19:tn(i,n),en(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,$o(n,c)));break;case 30:break;case 21:break;default:tn(i,n),en(n)}}function en(n){var i=n.flags;if(i&2){try{for(var r,c=n.return;c!==null;){if(Rp(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var m=r.stateNode,b=ju(n);Xo(n,b,m);break;case 5:var w=r.stateNode;r.flags&32&&(Gs(w,""),r.flags&=-33);var _=ju(n);Xo(n,_,w);break;case 3:case 4:var D=r.stateNode.containerInfo,q=ju(n);Iu(n,q,D);break;default:throw Error(s(161))}}catch(Z){Yt(n,n.return,Z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function jp(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;jp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function pi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)kp(n,i.alternate,i),i=i.sibling}function xs(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:ji(4,i,i.return),xs(i);break;case 1:Vn(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Tp(i,i.return,r),xs(i);break;case 27:Tr(i.stateNode);case 26:case 5:Vn(i,i.return),xs(i);break;case 22:i.memoizedState===null&&xs(i);break;case 30:xs(i);break;default:xs(i)}n=n.sibling}}function gi(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,m=n,b=i,w=b.flags;switch(b.tag){case 0:case 11:case 15:gi(m,b,r),br(4,b);break;case 1:if(gi(m,b,r),c=b,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(q){Yt(c,c.return,q)}if(c=b,m=c.updateQueue,m!==null){var _=c.stateNode;try{var D=m.shared.hiddenCallbacks;if(D!==null)for(m.shared.hiddenCallbacks=null,m=0;m<D.length;m++)pm(D[m],_)}catch(q){Yt(c,c.return,q)}}r&&w&64&&Cp(b),yr(b,b.return);break;case 27:Dp(b);case 26:case 5:gi(m,b,r),r&&c===null&&w&4&&Mp(b),yr(b,b.return);break;case 12:gi(m,b,r);break;case 31:gi(m,b,r),r&&w&4&&Bp(m,b);break;case 13:gi(m,b,r),r&&w&4&&Pp(m,b);break;case 22:b.memoizedState===null&&gi(m,b,r),yr(b,b.return);break;case 30:break;default:gi(m,b,r)}i=i.sibling}}function Uu(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&sr(r))}function Hu(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&sr(n))}function jn(n,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ip(n,i,r,c),i=i.sibling}function Ip(n,i,r,c){var m=i.flags;switch(i.tag){case 0:case 11:case 15:jn(n,i,r,c),m&2048&&br(9,i);break;case 1:jn(n,i,r,c);break;case 3:jn(n,i,r,c),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&sr(n)));break;case 12:if(m&2048){jn(n,i,r,c),n=i.stateNode;try{var b=i.memoizedProps,w=b.id,_=b.onPostCommit;typeof _=="function"&&_(w,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Yt(i,i.return,D)}}else jn(n,i,r,c);break;case 31:jn(n,i,r,c);break;case 13:jn(n,i,r,c);break;case 23:break;case 22:b=i.stateNode,w=i.alternate,i.memoizedState!==null?b._visibility&2?jn(n,i,r,c):vr(n,i):b._visibility&2?jn(n,i,r,c):(b._visibility|=2,ca(n,i,r,c,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Uu(w,i);break;case 24:jn(n,i,r,c),m&2048&&Hu(i.alternate,i);break;default:jn(n,i,r,c)}}function ca(n,i,r,c,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=n,w=i,_=r,D=c,q=w.flags;switch(w.tag){case 0:case 11:case 15:ca(b,w,_,D,m),br(8,w);break;case 23:break;case 22:var Z=w.stateNode;w.memoizedState!==null?Z._visibility&2?ca(b,w,_,D,m):vr(b,w):(Z._visibility|=2,ca(b,w,_,D,m)),m&&q&2048&&Uu(w.alternate,w);break;case 24:ca(b,w,_,D,m),m&&q&2048&&Hu(w.alternate,w);break;default:ca(b,w,_,D,m)}i=i.sibling}}function vr(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,c=i,m=c.flags;switch(c.tag){case 22:vr(r,c),m&2048&&Uu(c.alternate,c);break;case 24:vr(r,c),m&2048&&Hu(c.alternate,c);break;default:vr(r,c)}i=i.sibling}}var Ar=8192;function ua(n,i,r){if(n.subtreeFlags&Ar)for(n=n.child;n!==null;)Fp(n,i,r),n=n.sibling}function Fp(n,i,r){switch(n.tag){case 26:ua(n,i,r),n.flags&Ar&&n.memoizedState!==null&&S1(r,zn,n.memoizedState,n.memoizedProps);break;case 5:ua(n,i,r);break;case 3:case 4:var c=zn;zn=ll(n.stateNode.containerInfo),ua(n,i,r),zn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Ar,Ar=16777216,ua(n,i,r),Ar=c):ua(n,i,r));break;default:ua(n,i,r)}}function Up(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function wr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];Ee=c,Gp(c,n)}Up(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Hp(n),n=n.sibling}function Hp(n){switch(n.tag){case 0:case 11:case 15:wr(n),n.flags&2048&&ji(9,n,n.return);break;case 3:wr(n);break;case 12:wr(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ko(n)):wr(n);break;default:wr(n)}}function Ko(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];Ee=c,Gp(c,n)}Up(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:ji(8,i,i.return),Ko(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,Ko(i));break;default:Ko(i)}n=n.sibling}}function Gp(n,i){for(;Ee!==null;){var r=Ee;switch(r.tag){case 0:case 11:case 15:ji(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:sr(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Ee=c;else t:for(r=n;Ee!==null;){c=Ee;var m=c.sibling,b=c.return;if(Op(c),c===r){Ee=null;break t}if(m!==null){m.return=b,Ee=m;break t}Ee=b}}}var zA={getCacheForType:function(n){var i=Re(me),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r},cacheSignal:function(){return Re(me).controller.signal}},jA=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Qt=null,kt=null,Lt=0,Vt=0,fn=null,Ii=!1,ha=!1,Gu=!1,bi=0,le=0,Fi=0,Es=0,qu=0,mn=0,da=0,Sr=null,nn=null,Vu=!1,Wo=0,qp=0,Qo=1/0,Zo=null,Ui=null,Ae=0,Hi=null,fa=null,yi=0,Yu=0,Xu=null,Vp=null,xr=0,$u=null;function pn(){return(Ht&2)!==0&&Lt!==0?Lt&-Lt:O.T!==null?th():mc()}function Yp(){if(mn===0)if((Lt&536870912)===0||Pt){var n=Bs;Bs<<=1,(Bs&3932160)===0&&(Bs=262144),mn=n}else mn=536870912;return n=hn.current,n!==null&&(n.flags|=32),mn}function sn(n,i,r){(n===Qt&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)&&(ma(n,0),Gi(n,Lt,mn,!1)),se(n,r),((Ht&2)===0||n!==Qt)&&(n===Qt&&((Ht&2)===0&&(Es|=r),le===4&&Gi(n,Lt,mn,!1)),Yn(n))}function Xp(n,i,r){if((Ht&6)!==0)throw Error(s(327));var c=!r&&(i&127)===0&&(i&n.expiredLanes)===0||ne(n,i),m=c?UA(n,i):Wu(n,i,!0),b=c;do{if(m===0){ha&&!c&&Gi(n,i,0,!1);break}else{if(r=n.current.alternate,b&&!IA(r)){m=Wu(n,i,!1),b=!1;continue}if(m===2){if(b=i,n.errorRecoveryDisabledLanes&b)var w=0;else w=n.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;t:{var _=n;m=Sr;var D=_.current.memoizedState.isDehydrated;if(D&&(ma(_,w).flags|=256),w=Wu(_,w,!1),w!==2){if(Gu&&!D){_.errorRecoveryDisabledLanes|=b,Es|=b,m=4;break t}b=nn,nn=m,b!==null&&(nn===null?nn=b:nn.push.apply(nn,b))}m=w}if(b=!1,m!==2)continue}}if(m===1){ma(n,0),Gi(n,i,0,!0);break}t:{switch(c=n,b=m,b){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Gi(c,i,mn,!Ii);break t;case 2:nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=Wo+300-He(),10<m)){if(Gi(c,i,mn,!Ii),xt(c,0,!0)!==0)break t;yi=i,c.timeoutHandle=Eg($p.bind(null,c,r,nn,Zo,Vu,i,mn,Es,da,Ii,b,"Throttled",-0,0),m);break t}$p(c,r,nn,Zo,Vu,i,mn,Es,da,Ii,b,null,-0,0)}}break}while(!0);Yn(n)}function $p(n,i,r,c,m,b,w,_,D,q,Z,tt,Y,W){if(n.timeoutHandle=-1,tt=i.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},Fp(i,b,tt);var dt=(b&62914560)===b?Wo-He():(b&4194048)===b?qp-He():0;if(dt=x1(tt,dt),dt!==null){yi=b,n.cancelPendingCommit=dt(ng.bind(null,n,i,b,r,c,m,w,_,D,Z,tt,null,Y,W)),Gi(n,b,w,!q);return}}ng(n,i,b,r,c,m,w,_,D)}function IA(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var m=r[c],b=m.getSnapshot;m=m.value;try{if(!cn(b(),m))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Gi(n,i,r,c){i&=~qu,i&=~Es,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var m=i;0<m;){var b=31-je(m),w=1<<b;c[b]=-1,m&=~w}r!==0&&os(n,r,i)}function Jo(){return(Ht&6)===0?(Er(0),!1):!0}function Ku(){if(kt!==null){if(Vt===0)var n=kt.return;else n=kt,oi=ps=null,hu(n),sa=null,rr=0,n=kt;for(;n!==null;)_p(n.alternate,n),n=n.return;kt=null}}function ma(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,a1(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),yi=0,Ku(),Qt=n,kt=r=ai(n.current,null),Lt=i,Vt=0,fn=null,Ii=!1,ha=ne(n,i),Gu=!1,da=mn=qu=Es=Fi=le=0,nn=Sr=null,Vu=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var m=31-je(c),b=1<<m;i|=n[m],c&=~b}return bi=i,Ao(),r}function Kp(n,i){Mt=null,O.H=mr,i===ia||i===Mo?(i=hm(),Vt=3):i===Jc?(i=hm(),Vt=4):Vt=i===Tu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fn=i,kt===null&&(le=1,Ho(n,Sn(i,n.current)))}function Wp(){var n=hn.current;return n===null?!0:(Lt&4194048)===Lt?Cn===null:(Lt&62914560)===Lt||(Lt&536870912)!==0?n===Cn:!1}function Qp(){var n=O.H;return O.H=mr,n===null?mr:n}function Zp(){var n=O.A;return O.A=zA,n}function tl(){le=4,Ii||(Lt&4194048)!==Lt&&hn.current!==null||(ha=!0),(Fi&134217727)===0&&(Es&134217727)===0||Qt===null||Gi(Qt,Lt,mn,!1)}function Wu(n,i,r){var c=Ht;Ht|=2;var m=Qp(),b=Zp();(Qt!==n||Lt!==i)&&(Zo=null,ma(n,i)),i=!1;var w=le;t:do try{if(Vt!==0&&kt!==null){var _=kt,D=fn;switch(Vt){case 8:Ku(),w=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(i=!0);var q=Vt;if(Vt=0,fn=null,pa(n,_,D,q),r&&ha){w=0;break t}break;default:q=Vt,Vt=0,fn=null,pa(n,_,D,q)}}FA(),w=le;break}catch(Z){Kp(n,Z)}while(!0);return i&&n.shellSuspendCounter++,oi=ps=null,Ht=c,O.H=m,O.A=b,kt===null&&(Qt=null,Lt=0,Ao()),w}function FA(){for(;kt!==null;)Jp(kt)}function UA(n,i){var r=Ht;Ht|=2;var c=Qp(),m=Zp();Qt!==n||Lt!==i?(Zo=null,Qo=He()+500,ma(n,i)):ha=ne(n,i);t:do try{if(Vt!==0&&kt!==null){i=kt;var b=fn;e:switch(Vt){case 1:Vt=0,fn=null,pa(n,i,b,1);break;case 2:case 9:if(cm(b)){Vt=0,fn=null,tg(i);break}i=function(){Vt!==2&&Vt!==9||Qt!==n||(Vt=7),Yn(n)},b.then(i,i);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:cm(b)?(Vt=0,fn=null,tg(i)):(Vt=0,fn=null,pa(n,i,b,7));break;case 5:var w=null;switch(kt.tag){case 26:w=kt.memoizedState;case 5:case 27:var _=kt;if(w?Ig(w):_.stateNode.complete){Vt=0,fn=null;var D=_.sibling;if(D!==null)kt=D;else{var q=_.return;q!==null?(kt=q,el(q)):kt=null}break e}}Vt=0,fn=null,pa(n,i,b,5);break;case 6:Vt=0,fn=null,pa(n,i,b,6);break;case 8:Ku(),le=6;break t;default:throw Error(s(462))}}HA();break}catch(Z){Kp(n,Z)}while(!0);return oi=ps=null,O.H=c,O.A=m,Ht=r,kt!==null?0:(Qt=null,Lt=0,Ao(),le)}function HA(){for(;kt!==null&&!Ue();)Jp(kt)}function Jp(n){var i=xp(n.alternate,n,bi);n.memoizedProps=n.pendingProps,i===null?el(n):kt=i}function tg(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=bp(r,i,i.pendingProps,i.type,void 0,Lt);break;case 11:i=bp(r,i,i.pendingProps,i.type.render,i.ref,Lt);break;case 5:hu(i);default:_p(r,i),i=kt=Zf(i,bi),i=xp(r,i,bi)}n.memoizedProps=n.pendingProps,i===null?el(n):kt=i}function pa(n,i,r,c){oi=ps=null,hu(i),sa=null,rr=0;var m=i.return;try{if(DA(n,m,i,r,Lt)){le=1,Ho(n,Sn(r,n.current)),kt=null;return}}catch(b){if(m!==null)throw kt=m,b;le=1,Ho(n,Sn(r,n.current)),kt=null;return}i.flags&32768?(Pt||c===1?n=!0:ha||(Lt&536870912)!==0?n=!1:(Ii=n=!0,(c===2||c===9||c===3||c===6)&&(c=hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),eg(i,n)):el(i)}function el(n){var i=n;do{if((i.flags&32768)!==0){eg(i,Ii);return}n=i.return;var r=OA(i.alternate,i,bi);if(r!==null){kt=r;return}if(i=i.sibling,i!==null){kt=i;return}kt=i=n}while(i!==null);le===0&&(le=5)}function eg(n,i){do{var r=LA(n.alternate,n);if(r!==null){r.flags&=32767,kt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){kt=n;return}kt=n=r}while(n!==null);le=6,kt=null}function ng(n,i,r,c,m,b,w,_,D){n.cancelPendingCommit=null;do nl();while(Ae!==0);if((Ht&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(b=i.lanes|i.childLanes,b|=jc,$e(n,r,b,w,_,D),n===Qt&&(kt=Qt=null,Lt=0),fa=i,Hi=n,yi=r,Yu=b,Xu=m,Vp=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,YA(ss,function(){return og(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,m=G.p,G.p=2,w=Ht,Ht|=4;try{BA(n,i,r)}finally{Ht=w,G.p=m,O.T=c}}Ae=1,ig(),sg(),ag()}}function ig(){if(Ae===1){Ae=0;var n=Hi,i=fa,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=O.T,O.T=null;var c=G.p;G.p=2;var m=Ht;Ht|=4;try{zp(i,n);var b=lh,w=Gf(n.containerInfo),_=b.focusedElem,D=b.selectionRange;if(w!==_&&_&&_.ownerDocument&&Hf(_.ownerDocument.documentElement,_)){if(D!==null&&Oc(_)){var q=D.start,Z=D.end;if(Z===void 0&&(Z=q),"selectionStart"in _)_.selectionStart=q,_.selectionEnd=Math.min(Z,_.value.length);else{var tt=_.ownerDocument||document,Y=tt&&tt.defaultView||window;if(Y.getSelection){var W=Y.getSelection(),dt=_.textContent.length,St=Math.min(D.start,dt),Kt=D.end===void 0?St:Math.min(D.end,dt);!W.extend&&St>Kt&&(w=Kt,Kt=St,St=w);var U=Uf(_,St),j=Uf(_,Kt);if(U&&j&&(W.rangeCount!==1||W.anchorNode!==U.node||W.anchorOffset!==U.offset||W.focusNode!==j.node||W.focusOffset!==j.offset)){var H=tt.createRange();H.setStart(U.node,U.offset),W.removeAllRanges(),St>Kt?(W.addRange(H),W.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),W.addRange(H))}}}}for(tt=[],W=_;W=W.parentNode;)W.nodeType===1&&tt.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<tt.length;_++){var J=tt[_];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ml=!!oh,lh=oh=null}finally{Ht=m,G.p=c,O.T=r}}n.current=i,Ae=2}}function sg(){if(Ae===2){Ae=0;var n=Hi,i=fa,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=O.T,O.T=null;var c=G.p;G.p=2;var m=Ht;Ht|=4;try{kp(n,i.alternate,i)}finally{Ht=m,G.p=c,O.T=r}}Ae=3}}function ag(){if(Ae===4||Ae===3){Ae=0,Ei();var n=Hi,i=fa,r=yi,c=Vp;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ae=5:(Ae=0,fa=Hi=null,rg(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ui=null),Bn(r),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(as,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=O.T,m=G.p,G.p=2,O.T=null;try{for(var b=n.onRecoverableError,w=0;w<c.length;w++){var _=c[w];b(_.value,{componentStack:_.stack})}}finally{O.T=i,G.p=m}}(yi&3)!==0&&nl(),Yn(n),m=n.pendingLanes,(r&261930)!==0&&(m&42)!==0?n===$u?xr++:(xr=0,$u=n):xr=0,Er(0)}}function rg(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,sr(i)))}function nl(){return ig(),sg(),ag(),og()}function og(){if(Ae!==5)return!1;var n=Hi,i=Yu;Yu=0;var r=Bn(yi),c=O.T,m=G.p;try{G.p=32>r?32:r,O.T=null,r=Xu,Xu=null;var b=Hi,w=yi;if(Ae=0,fa=Hi=null,yi=0,(Ht&6)!==0)throw Error(s(331));var _=Ht;if(Ht|=4,Hp(b.current),Ip(b,b.current,w,r),Ht=_,Er(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(as,b)}catch{}return!0}finally{G.p=m,O.T=c,rg(n,i)}}function lg(n,i,r){i=Sn(r,i),i=Cu(n.stateNode,i,2),n=Bi(n,i,2),n!==null&&(se(n,2),Yn(n))}function Yt(n,i,r){if(n.tag===3)lg(n,n,r);else for(;i!==null;){if(i.tag===3){lg(i,n,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ui===null||!Ui.has(c))){n=Sn(r,n),r=cp(2),c=Bi(i,r,2),c!==null&&(up(r,c,i,n),se(c,2),Yn(c));break}}i=i.return}}function Qu(n,i,r){var c=n.pingCache;if(c===null){c=n.pingCache=new jA;var m=new Set;c.set(i,m)}else m=c.get(i),m===void 0&&(m=new Set,c.set(i,m));m.has(r)||(Gu=!0,m.add(r),n=GA.bind(null,n,i,r),i.then(n,n))}function GA(n,i,r){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Qt===n&&(Lt&r)===r&&(le===4||le===3&&(Lt&62914560)===Lt&&300>He()-Wo?(Ht&2)===0&&ma(n,0):qu|=r,da===Lt&&(da=0)),Yn(n)}function cg(n,i){i===0&&(i=Ie()),n=ds(n,i),n!==null&&(se(n,i),Yn(n))}function qA(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),cg(n,r)}function VA(n,i){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(r=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),cg(n,r)}function YA(n,i){return Ua(n,i)}var il=null,ga=null,Zu=!1,sl=!1,Ju=!1,qi=0;function Yn(n){n!==ga&&n.next===null&&(ga===null?il=ga=n:ga=ga.next=n),sl=!0,Zu||(Zu=!0,$A())}function Er(n,i){if(!Ju&&sl){Ju=!0;do for(var r=!1,c=il;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var b=0;else{var w=c.suspendedLanes,_=c.pingedLanes;b=(1<<31-je(42|n)+1)-1,b&=m&~(w&~_),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(r=!0,fg(c,b))}else b=Lt,b=xt(c,c===Qt?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(b&3)===0||ne(c,b)||(r=!0,fg(c,b));c=c.next}while(r);Ju=!1}}function XA(){ug()}function ug(){sl=Zu=!1;var n=0;qi!==0&&s1()&&(n=qi);for(var i=He(),r=null,c=il;c!==null;){var m=c.next,b=hg(c,i);b===0?(c.next=null,r===null?il=m:r.next=m,m===null&&(ga=r)):(r=c,(n!==0||(b&3)!==0)&&(sl=!0)),c=m}Ae!==0&&Ae!==5||Er(n),qi!==0&&(qi=0)}function hg(n,i){for(var r=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var w=31-je(b),_=1<<w,D=m[w];D===-1?((_&r)===0||(_&c)!==0)&&(m[w]=Se(_,i)):D<=i&&(n.expiredLanes|=_),b&=~_}if(i=Qt,r=Lt,r=xt(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===i&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ha(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||ne(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(c!==null&&Ha(c),Bn(r)){case 2:case 8:r=ro;break;case 32:r=ss;break;case 268435456:r=ei;break;default:r=ss}return c=dg.bind(null,n),r=Ua(r,c),n.callbackPriority=i,n.callbackNode=r,i}return c!==null&&c!==null&&Ha(c),n.callbackPriority=2,n.callbackNode=null,2}function dg(n,i){if(Ae!==0&&Ae!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(nl()&&n.callbackNode!==r)return null;var c=Lt;return c=xt(n,n===Qt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Xp(n,c,i),hg(n,He()),n.callbackNode!=null&&n.callbackNode===r?dg.bind(null,n):null)}function fg(n,i){if(nl())return null;Xp(n,i,!0)}function $A(){r1(function(){(Ht&6)!==0?Ua(is,XA):ug()})}function th(){if(qi===0){var n=ea;n===0&&(n=Ls,Ls<<=1,(Ls&261888)===0&&(Ls=256)),qi=n}return qi}function mg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ho(""+n)}function pg(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function KA(n,i,r,c,m){if(i==="submit"&&r&&r.stateNode===m){var b=mg((m[Qe]||null).action),w=c.submitter;w&&(i=(i=w[Qe]||null)?mg(i.formAction):w.getAttribute("formAction"),i!==null&&(b=i,w=null));var _=new go("action","action",null,c,m);n.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(qi!==0){var D=w?pg(m,w):new FormData(m);Au(r,{pending:!0,data:D,method:m.method,action:b},null,D)}}else typeof b=="function"&&(_.preventDefault(),D=w?pg(m,w):new FormData(m),Au(r,{pending:!0,data:D,method:m.method,action:b},b,D))},currentTarget:m}]})}}for(var eh=0;eh<zc.length;eh++){var nh=zc[eh],WA=nh.toLowerCase(),QA=nh[0].toUpperCase()+nh.slice(1);Pn(WA,"on"+QA)}Pn(Yf,"onAnimationEnd"),Pn(Xf,"onAnimationIteration"),Pn($f,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(fA,"onTransitionRun"),Pn(mA,"onTransitionStart"),Pn(pA,"onTransitionCancel"),Pn(Kf,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_r));function gg(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],m=c.event;c=c.listeners;t:{var b=void 0;if(i)for(var w=c.length-1;0<=w;w--){var _=c[w],D=_.instance,q=_.currentTarget;if(_=_.listener,D!==b&&m.isPropagationStopped())break t;b=_,m.currentTarget=q;try{b(m)}catch(Z){vo(Z)}m.currentTarget=null,b=D}else for(w=0;w<c.length;w++){if(_=c[w],D=_.instance,q=_.currentTarget,_=_.listener,D!==b&&m.isPropagationStopped())break t;b=_,m.currentTarget=q;try{b(m)}catch(Z){vo(Z)}m.currentTarget=null,b=D}}}}function Ot(n,i){var r=i[pc];r===void 0&&(r=i[pc]=new Set);var c=n+"__bubble";r.has(c)||(bg(i,n,2,!1),r.add(c))}function ih(n,i,r){var c=0;i&&(c|=4),bg(r,n,c,i)}var al="_reactListening"+Math.random().toString(36).slice(2);function sh(n){if(!n[al]){n[al]=!0,uf.forEach(function(r){r!=="selectionchange"&&(ZA.has(r)||ih(r,!1,n),ih(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[al]||(i[al]=!0,ih("selectionchange",!1,i))}}function bg(n,i,r,c){switch(Yg(i)){case 2:var m=C1;break;case 8:m=T1;break;default:m=vh}r=m.bind(null,i,r,n),m=void 0,!Ec||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(i,r,{capture:!0,passive:m}):n.addEventListener(i,r,!0):m!==void 0?n.addEventListener(i,r,{passive:m}):n.addEventListener(i,r,!1)}function ah(n,i,r,c,m){var b=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var _=c.stateNode.containerInfo;if(_===m)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;_!==null;){if(w=js(_),w===null)return;if(D=w.tag,D===5||D===6||D===26||D===27){c=b=w;continue t}_=_.parentNode}}c=c.return}Sf(function(){var q=b,Z=Sc(r),tt=[];t:{var Y=Wf.get(n);if(Y!==void 0){var W=go,dt=n;switch(n){case"keypress":if(mo(r)===0)break t;case"keydown":case"keyup":W=Vv;break;case"focusin":dt="focus",W=Mc;break;case"focusout":dt="blur",W=Mc;break;case"beforeblur":case"afterblur":W=Mc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=_f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=$v;break;case Yf:case Xf:case $f:W=Pv;break;case Kf:W=Wv;break;case"scroll":case"scrollend":W=Nv;break;case"wheel":W=Zv;break;case"copy":case"cut":case"paste":W=jv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Tf;break;case"toggle":case"beforetoggle":W=tA}var St=(i&4)!==0,Kt=!St&&(n==="scroll"||n==="scrollend"),U=St?Y!==null?Y+"Capture":null:Y;St=[];for(var j=q,H;j!==null;){var J=j;if(H=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||H===null||U===null||(J=Xa(j,U),J!=null&&St.push(Cr(j,J,H))),Kt)break;j=j.return}0<St.length&&(Y=new W(Y,dt,null,r,Z),tt.push({event:Y,listeners:St}))}}if((i&7)===0){t:{if(Y=n==="mouseover"||n==="pointerover",W=n==="mouseout"||n==="pointerout",Y&&r!==wc&&(dt=r.relatedTarget||r.fromElement)&&(js(dt)||dt[zs]))break t;if((W||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,W?(dt=r.relatedTarget||r.toElement,W=q,dt=dt?js(dt):null,dt!==null&&(Kt=o(dt),St=dt.tag,dt!==Kt||St!==5&&St!==27&&St!==6)&&(dt=null)):(W=null,dt=q),W!==dt)){if(St=_f,J="onMouseLeave",U="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(St=Tf,J="onPointerLeave",U="onPointerEnter",j="pointer"),Kt=W==null?Y:Ya(W),H=dt==null?Y:Ya(dt),Y=new St(J,j+"leave",W,r,Z),Y.target=Kt,Y.relatedTarget=H,J=null,js(Z)===q&&(St=new St(U,j+"enter",dt,r,Z),St.target=H,St.relatedTarget=Kt,J=St),Kt=J,W&&dt)e:{for(St=JA,U=W,j=dt,H=0,J=U;J;J=St(J))H++;J=0;for(var At=j;At;At=St(At))J++;for(;0<H-J;)U=St(U),H--;for(;0<J-H;)j=St(j),J--;for(;H--;){if(U===j||j!==null&&U===j.alternate){St=U;break e}U=St(U),j=St(j)}St=null}else St=null;W!==null&&yg(tt,Y,W,St,!1),dt!==null&&Kt!==null&&yg(tt,Kt,dt,St,!0)}}t:{if(Y=q?Ya(q):window,W=Y.nodeName&&Y.nodeName.toLowerCase(),W==="select"||W==="input"&&Y.type==="file")var Ft=Bf;else if(Of(Y))if(Pf)Ft=uA;else{Ft=lA;var bt=oA}else W=Y.nodeName,!W||W.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&Ac(q.elementType)&&(Ft=Bf):Ft=cA;if(Ft&&(Ft=Ft(n,q))){Lf(tt,Ft,r,Z);break t}bt&&bt(n,Y,q),n==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&vc(Y,"number",Y.value)}switch(bt=q?Ya(q):window,n){case"focusin":(Of(bt)||bt.contentEditable==="true")&&(Xs=bt,Lc=q,er=null);break;case"focusout":er=Lc=Xs=null;break;case"mousedown":Bc=!0;break;case"contextmenu":case"mouseup":case"dragend":Bc=!1,qf(tt,r,Z);break;case"selectionchange":if(dA)break;case"keydown":case"keyup":qf(tt,r,Z)}var Dt;if(Dc)t:{switch(n){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else Ys?Nf(n,r)&&(Bt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Bt="onCompositionStart");Bt&&(Mf&&r.locale!=="ko"&&(Ys||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Ys&&(Dt=xf()):(Mi=Z,_c="value"in Mi?Mi.value:Mi.textContent,Ys=!0)),bt=rl(q,Bt),0<bt.length&&(Bt=new Cf(Bt,n,null,r,Z),tt.push({event:Bt,listeners:bt}),Dt?Bt.data=Dt:(Dt=kf(r),Dt!==null&&(Bt.data=Dt)))),(Dt=nA?iA(n,r):sA(n,r))&&(Bt=rl(q,"onBeforeInput"),0<Bt.length&&(bt=new Cf("onBeforeInput","beforeinput",null,r,Z),tt.push({event:bt,listeners:Bt}),bt.data=Dt)),KA(tt,n,q,r,Z)}gg(tt,i)})}function Cr(n,i,r){return{instance:n,listener:i,currentTarget:r}}function rl(n,i){for(var r=i+"Capture",c=[];n!==null;){var m=n,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=Xa(n,r),m!=null&&c.unshift(Cr(n,m,b)),m=Xa(n,i),m!=null&&c.push(Cr(n,m,b))),n.tag===3)return c;n=n.return}return[]}function JA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function yg(n,i,r,c,m){for(var b=i._reactName,w=[];r!==null&&r!==c;){var _=r,D=_.alternate,q=_.stateNode;if(_=_.tag,D!==null&&D===c)break;_!==5&&_!==26&&_!==27||q===null||(D=q,m?(q=Xa(r,b),q!=null&&w.unshift(Cr(r,q,D))):m||(q=Xa(r,b),q!=null&&w.push(Cr(r,q,D)))),r=r.return}w.length!==0&&n.push({event:i,listeners:w})}var t1=/\r\n?/g,e1=/\u0000|\uFFFD/g;function vg(n){return(typeof n=="string"?n:""+n).replace(t1,`
`).replace(e1,"")}function Ag(n,i){return i=vg(i),vg(n)===i}function $t(n,i,r,c,m,b){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Gs(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Gs(n,""+c);break;case"className":co(n,"class",c);break;case"tabIndex":co(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":co(n,r,c);break;case"style":Af(n,c,b);break;case"data":if(i!=="object"){co(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=ho(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(r==="formAction"?(i!=="input"&&$t(n,i,"name",m.name,m,null),$t(n,i,"formEncType",m.formEncType,m,null),$t(n,i,"formMethod",m.formMethod,m,null),$t(n,i,"formTarget",m.formTarget,m,null)):($t(n,i,"encType",m.encType,m,null),$t(n,i,"method",m.method,m,null),$t(n,i,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=ho(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=ii);break;case"onScroll":c!=null&&Ot("scroll",n);break;case"onScrollEnd":c!=null&&Ot("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=ho(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Ot("beforetoggle",n),Ot("toggle",n),lo(n,"popover",c);break;case"xlinkActuate":ni(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ni(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ni(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ni(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ni(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ni(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ni(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ni(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ni(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":lo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Rv.get(r)||r,lo(n,r,c))}}function rh(n,i,r,c,m,b){switch(r){case"style":Af(n,c,b);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(m.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Gs(n,c):(typeof c=="number"||typeof c=="bigint")&&Gs(n,""+c);break;case"onScroll":c!=null&&Ot("scroll",n);break;case"onScrollEnd":c!=null&&Ot("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),i=r.slice(2,m?r.length-7:void 0),b=n[Qe]||null,b=b!=null?b[r]:null,typeof b=="function"&&n.removeEventListener(i,b,m),typeof c=="function")){typeof b!="function"&&b!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,c,m);break t}r in n?n[r]=c:c===!0?n.setAttribute(r,""):lo(n,r,c)}}}function Ne(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",n),Ot("load",n);var c=!1,m=!1,b;for(b in r)if(r.hasOwnProperty(b)){var w=r[b];if(w!=null)switch(b){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(n,i,b,w,r,null)}}m&&$t(n,i,"srcSet",r.srcSet,r,null),c&&$t(n,i,"src",r.src,r,null);return;case"input":Ot("invalid",n);var _=b=w=m=null,D=null,q=null;for(c in r)if(r.hasOwnProperty(c)){var Z=r[c];if(Z!=null)switch(c){case"name":m=Z;break;case"type":w=Z;break;case"checked":D=Z;break;case"defaultChecked":q=Z;break;case"value":b=Z;break;case"defaultValue":_=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:$t(n,i,c,Z,r,null)}}gf(n,b,_,D,q,w,m,!1);return;case"select":Ot("invalid",n),c=w=b=null;for(m in r)if(r.hasOwnProperty(m)&&(_=r[m],_!=null))switch(m){case"value":b=_;break;case"defaultValue":w=_;break;case"multiple":c=_;default:$t(n,i,m,_,r,null)}i=b,r=w,n.multiple=!!c,i!=null?Hs(n,!!c,i,!1):r!=null&&Hs(n,!!c,r,!0);return;case"textarea":Ot("invalid",n),b=m=c=null;for(w in r)if(r.hasOwnProperty(w)&&(_=r[w],_!=null))switch(w){case"value":c=_;break;case"defaultValue":m=_;break;case"children":b=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:$t(n,i,w,_,r,null)}yf(n,c,m,b);return;case"option":for(D in r)r.hasOwnProperty(D)&&(c=r[D],c!=null)&&(D==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":$t(n,i,D,c,r,null));return;case"dialog":Ot("beforetoggle",n),Ot("toggle",n),Ot("cancel",n),Ot("close",n);break;case"iframe":case"object":Ot("load",n);break;case"video":case"audio":for(c=0;c<_r.length;c++)Ot(_r[c],n);break;case"image":Ot("error",n),Ot("load",n);break;case"details":Ot("toggle",n);break;case"embed":case"source":case"link":Ot("error",n),Ot("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in r)if(r.hasOwnProperty(q)&&(c=r[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:$t(n,i,q,c,r,null)}return;default:if(Ac(i)){for(Z in r)r.hasOwnProperty(Z)&&(c=r[Z],c!==void 0&&rh(n,i,Z,c,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(c=r[_],c!=null&&$t(n,i,_,c,r,null))}function n1(n,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,w=null,_=null,D=null,q=null,Z=null;for(W in r){var tt=r[W];if(r.hasOwnProperty(W)&&tt!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":D=tt;default:c.hasOwnProperty(W)||$t(n,i,W,null,c,tt)}}for(var Y in c){var W=c[Y];if(tt=r[Y],c.hasOwnProperty(Y)&&(W!=null||tt!=null))switch(Y){case"type":b=W;break;case"name":m=W;break;case"checked":q=W;break;case"defaultChecked":Z=W;break;case"value":w=W;break;case"defaultValue":_=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==tt&&$t(n,i,Y,W,c,tt)}}yc(n,w,_,D,q,Z,b,m);return;case"select":W=w=_=Y=null;for(b in r)if(D=r[b],r.hasOwnProperty(b)&&D!=null)switch(b){case"value":break;case"multiple":W=D;default:c.hasOwnProperty(b)||$t(n,i,b,null,c,D)}for(m in c)if(b=c[m],D=r[m],c.hasOwnProperty(m)&&(b!=null||D!=null))switch(m){case"value":Y=b;break;case"defaultValue":_=b;break;case"multiple":w=b;default:b!==D&&$t(n,i,m,b,c,D)}i=_,r=w,c=W,Y!=null?Hs(n,!!r,Y,!1):!!c!=!!r&&(i!=null?Hs(n,!!r,i,!0):Hs(n,!!r,r?[]:"",!1));return;case"textarea":W=Y=null;for(_ in r)if(m=r[_],r.hasOwnProperty(_)&&m!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:$t(n,i,_,null,c,m)}for(w in c)if(m=c[w],b=r[w],c.hasOwnProperty(w)&&(m!=null||b!=null))switch(w){case"value":Y=m;break;case"defaultValue":W=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==b&&$t(n,i,w,m,c,b)}bf(n,Y,W);return;case"option":for(var dt in r)Y=r[dt],r.hasOwnProperty(dt)&&Y!=null&&!c.hasOwnProperty(dt)&&(dt==="selected"?n.selected=!1:$t(n,i,dt,null,c,Y));for(D in c)Y=c[D],W=r[D],c.hasOwnProperty(D)&&Y!==W&&(Y!=null||W!=null)&&(D==="selected"?n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":$t(n,i,D,Y,c,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in r)Y=r[St],r.hasOwnProperty(St)&&Y!=null&&!c.hasOwnProperty(St)&&$t(n,i,St,null,c,Y);for(q in c)if(Y=c[q],W=r[q],c.hasOwnProperty(q)&&Y!==W&&(Y!=null||W!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:$t(n,i,q,Y,c,W)}return;default:if(Ac(i)){for(var Kt in r)Y=r[Kt],r.hasOwnProperty(Kt)&&Y!==void 0&&!c.hasOwnProperty(Kt)&&rh(n,i,Kt,void 0,c,Y);for(Z in c)Y=c[Z],W=r[Z],!c.hasOwnProperty(Z)||Y===W||Y===void 0&&W===void 0||rh(n,i,Z,Y,c,W);return}}for(var U in r)Y=r[U],r.hasOwnProperty(U)&&Y!=null&&!c.hasOwnProperty(U)&&$t(n,i,U,null,c,Y);for(tt in c)Y=c[tt],W=r[tt],!c.hasOwnProperty(tt)||Y===W||Y==null&&W==null||$t(n,i,tt,Y,c,W)}function wg(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function i1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var m=r[c],b=m.transferSize,w=m.initiatorType,_=m.duration;if(b&&_&&wg(w)){for(w=0,_=m.responseEnd,c+=1;c<r.length;c++){var D=r[c],q=D.startTime;if(q>_)break;var Z=D.transferSize,tt=D.initiatorType;Z&&wg(tt)&&(D=D.responseEnd,w+=Z*(D<_?1:(_-q)/(D-q)))}if(--c,i+=8*(b+w)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var oh=null,lh=null;function ol(n){return n.nodeType===9?n:n.ownerDocument}function Sg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xg(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function ch(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var uh=null;function s1(){var n=window.event;return n&&n.type==="popstate"?n===uh?!1:(uh=n,!0):(uh=null,!1)}var Eg=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,r1=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(n){return _g.resolve(null).then(n).catch(o1)}:Eg;function o1(n){setTimeout(function(){throw n})}function Vi(n){return n==="head"}function Cg(n,i){var r=i,c=0;do{var m=r.nextSibling;if(n.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(m),Aa(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Tr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Tr(r);for(var b=r.firstChild;b;){var w=b.nextSibling,_=b.nodeName;b[Va]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=w}}else r==="body"&&Tr(n.ownerDocument.body);r=m}while(r);Aa(i)}function Tg(n,i){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function hh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":hh(r),gc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function l1(n,i,r,c){for(;n.nodeType===1;){var m=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Va])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=Tn(n.nextSibling),n===null)break}return null}function c1(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Tn(n.nextSibling),n===null))return null;return n}function Mg(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Tn(n.nextSibling),n===null))return null;return n}function dh(n){return n.data==="$?"||n.data==="$~"}function fh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function u1(n,i){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Tn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var mh=null;function Rg(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(i===0)return Tn(n.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}n=n.nextSibling}return null}function Dg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return n;i--}else r!=="/$"&&r!=="/&"||i++}n=n.previousSibling}return null}function Ng(n,i,r){switch(i=ol(r),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Tr(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);gc(n)}var Mn=new Map,kg=new Set;function ll(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var vi=G.d;G.d={f:h1,r:d1,D:f1,C:m1,L:p1,m:g1,X:y1,S:b1,M:v1};function h1(){var n=vi.f(),i=Jo();return n||i}function d1(n){var i=Is(n);i!==null&&i.tag===5&&i.type==="form"?Km(i):vi.r(n)}var ba=typeof document>"u"?null:document;function Og(n,i,r){var c=ba;if(c&&typeof i=="string"&&i){var m=An(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),kg.has(m)||(kg.add(m),n={rel:n,crossOrigin:r,href:i},c.querySelector(m)===null&&(i=c.createElement("link"),Ne(i,"link",n),xe(i),c.head.appendChild(i)))}}function f1(n){vi.D(n),Og("dns-prefetch",n,null)}function m1(n,i){vi.C(n,i),Og("preconnect",n,i)}function p1(n,i,r){vi.L(n,i,r);var c=ba;if(c&&n&&i){var m='link[rel="preload"][as="'+An(i)+'"]';i==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+An(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+An(r.imageSizes)+'"]')):m+='[href="'+An(n)+'"]';var b=m;switch(i){case"style":b=ya(n);break;case"script":b=va(n)}Mn.has(b)||(n=p({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),Mn.set(b,n),c.querySelector(m)!==null||i==="style"&&c.querySelector(Mr(b))||i==="script"&&c.querySelector(Rr(b))||(i=c.createElement("link"),Ne(i,"link",n),xe(i),c.head.appendChild(i)))}}function g1(n,i){vi.m(n,i);var r=ba;if(r&&n){var c=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+An(c)+'"][href="'+An(n)+'"]',b=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=va(n)}if(!Mn.has(b)&&(n=p({rel:"modulepreload",href:n},i),Mn.set(b,n),r.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Rr(b)))return}c=r.createElement("link"),Ne(c,"link",n),xe(c),r.head.appendChild(c)}}}function b1(n,i,r){vi.S(n,i,r);var c=ba;if(c&&n){var m=Fs(c).hoistableStyles,b=ya(n);i=i||"default";var w=m.get(b);if(!w){var _={loading:0,preload:null};if(w=c.querySelector(Mr(b)))_.loading=5;else{n=p({rel:"stylesheet",href:n,"data-precedence":i},r),(r=Mn.get(b))&&ph(n,r);var D=w=c.createElement("link");xe(D),Ne(D,"link",n),D._p=new Promise(function(q,Z){D.onload=q,D.onerror=Z}),D.addEventListener("load",function(){_.loading|=1}),D.addEventListener("error",function(){_.loading|=2}),_.loading|=4,cl(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:_},m.set(b,w)}}}function y1(n,i){vi.X(n,i);var r=ba;if(r&&n){var c=Fs(r).hoistableScripts,m=va(n),b=c.get(m);b||(b=r.querySelector(Rr(m)),b||(n=p({src:n,async:!0},i),(i=Mn.get(m))&&gh(n,i),b=r.createElement("script"),xe(b),Ne(b,"link",n),r.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(m,b))}}function v1(n,i){vi.M(n,i);var r=ba;if(r&&n){var c=Fs(r).hoistableScripts,m=va(n),b=c.get(m);b||(b=r.querySelector(Rr(m)),b||(n=p({src:n,async:!0,type:"module"},i),(i=Mn.get(m))&&gh(n,i),b=r.createElement("script"),xe(b),Ne(b,"link",n),r.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},c.set(m,b))}}function Lg(n,i,r,c){var m=(m=rt.current)?ll(m):null;if(!m)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=ya(r.href),r=Fs(m).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=ya(r.href);var b=Fs(m).hoistableStyles,w=b.get(n);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,w),(b=m.querySelector(Mr(n)))&&!b._p&&(w.instance=b,w.state.loading=5),Mn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Mn.set(n,r),b||A1(m,n,r,w.state))),i&&c===null)throw Error(s(528,""));return w}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=va(r),r=Fs(m).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function ya(n){return'href="'+An(n)+'"'}function Mr(n){return'link[rel="stylesheet"]['+n+"]"}function Bg(n){return p({},n,{"data-precedence":n.precedence,precedence:null})}function A1(n,i,r,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Ne(i,"link",r),xe(i),n.head.appendChild(i))}function va(n){return'[src="'+An(n)+'"]'}function Rr(n){return"script[async]"+n}function Pg(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+An(r.href)+'"]');if(c)return i.instance=c,xe(c),c;var m=p({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),xe(c),Ne(c,"style",m),cl(c,r.precedence,n),i.instance=c;case"stylesheet":m=ya(r.href);var b=n.querySelector(Mr(m));if(b)return i.state.loading|=4,i.instance=b,xe(b),b;c=Bg(r),(m=Mn.get(m))&&ph(c,m),b=(n.ownerDocument||n).createElement("link"),xe(b);var w=b;return w._p=new Promise(function(_,D){w.onload=_,w.onerror=D}),Ne(b,"link",c),i.state.loading|=4,cl(b,r.precedence,n),i.instance=b;case"script":return b=va(r.src),(m=n.querySelector(Rr(b)))?(i.instance=m,xe(m),m):(c=r,(m=Mn.get(b))&&(c=p({},r),gh(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),xe(m),Ne(m,"link",c),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,cl(c,r.precedence,n));return i.instance}function cl(n,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,b=m,w=0;w<c.length;w++){var _=c[w];if(_.dataset.precedence===i)b=_;else if(b!==m)break}b?b.parentNode.insertBefore(n,b.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function ph(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function gh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ul=null;function zg(n,i,r){if(ul===null){var c=new Map,m=ul=new Map;m.set(r,c)}else m=ul,c=m.get(r),c||(c=new Map,m.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),m=0;m<r.length;m++){var b=r[m];if(!(b[Va]||b[Te]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var w=b.getAttribute(i)||"";w=n+w;var _=c.get(w);_?_.push(b):c.set(w,[b])}}return c}function jg(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function w1(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Ig(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function S1(n,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=ya(c.href),b=i.querySelector(Mr(m));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=hl.bind(n),i.then(n,n)),r.state.loading|=4,r.instance=b,xe(b);return}b=i.ownerDocument||i,c=Bg(c),(m=Mn.get(m))&&ph(c,m),b=b.createElement("link"),xe(b);var w=b;w._p=new Promise(function(_,D){w.onload=_,w.onerror=D}),Ne(b,"link",c),r.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=hl.bind(n),i.addEventListener("load",r),i.addEventListener("error",r))}}var bh=0;function x1(n,i){return n.stylesheets&&n.count===0&&fl(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&fl(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+i);0<n.imgBytes&&bh===0&&(bh=62500*i1());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&fl(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>bh?50:800)+i);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function hl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var dl=null;function fl(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,dl=new Map,i.forEach(E1,n),dl=null,hl.call(n))}function E1(n,i){if(!(i.state.loading&4)){var r=dl.get(n);if(r)var c=r.get(null);else{r=new Map,dl.set(n,r);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var w=m[b];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),c=w)}c&&r.set(null,c)}m=i.instance,w=m.getAttribute("data-precedence"),b=r.get(w)||c,b===c&&r.set(null,m),r.set(w,m),this.count++,c=hl.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),b?b.parentNode.insertBefore(m,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var Dr={$$typeof:M,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function _1(n,i,r,c,m,b,w,_,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.hiddenUpdates=Ci(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Fg(n,i,r,c,m,b,w,_,D,q,Z,tt){return n=new _1(n,i,r,w,D,q,Z,tt,_),i=1,b===!0&&(i|=24),b=un(3,null,null,i),n.current=b,b.stateNode=n,i=Wc(),i.refCount++,n.pooledCache=i,i.refCount++,b.memoizedState={element:c,isDehydrated:r,cache:i},tu(b),n}function Ug(n){return n?(n=Ws,n):Ws}function Hg(n,i,r,c,m,b){m=Ug(m),c.context===null?c.context=m:c.pendingContext=m,c=Li(i),c.payload={element:r},b=b===void 0?null:b,b!==null&&(c.callback=b),r=Bi(n,c,i),r!==null&&(sn(r,n,i),lr(r,n,i))}function Gg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function yh(n,i){Gg(n,i),(n=n.alternate)&&Gg(n,i)}function qg(n){if(n.tag===13||n.tag===31){var i=ds(n,67108864);i!==null&&sn(i,n,67108864),yh(n,67108864)}}function Vg(n){if(n.tag===13||n.tag===31){var i=pn();i=Ps(i);var r=ds(n,i);r!==null&&sn(r,n,i),yh(n,i)}}var ml=!0;function C1(n,i,r,c){var m=O.T;O.T=null;var b=G.p;try{G.p=2,vh(n,i,r,c)}finally{G.p=b,O.T=m}}function T1(n,i,r,c){var m=O.T;O.T=null;var b=G.p;try{G.p=8,vh(n,i,r,c)}finally{G.p=b,O.T=m}}function vh(n,i,r,c){if(ml){var m=Ah(c);if(m===null)ah(n,i,c,pl,r),Xg(n,c);else if(R1(m,n,i,r,c))c.stopPropagation();else if(Xg(n,c),i&4&&-1<M1.indexOf(n)){for(;m!==null;){var b=Is(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var w=Hn(b.pendingLanes);if(w!==0){var _=b;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var D=1<<31-je(w);_.entanglements[1]|=D,w&=~D}Yn(b),(Ht&6)===0&&(Qo=He()+500,Er(0))}}break;case 31:case 13:_=ds(b,2),_!==null&&sn(_,b,2),Jo(),yh(b,2)}if(b=Ah(c),b===null&&ah(n,i,c,pl,r),b===m)break;m=b}m!==null&&c.stopPropagation()}else ah(n,i,c,null,r)}}function Ah(n){return n=Sc(n),wh(n)}var pl=null;function wh(n){if(pl=null,n=js(n),n!==null){var i=o(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=l(i),n!==null)return n;n=null}else if(r===31){if(n=h(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return pl=n,null}function Yg(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dc()){case is:return 2;case ro:return 8;case ss:case Ga:return 32;case ei:return 268435456;default:return 32}default:return 32}}var Sh=!1,Yi=null,Xi=null,$i=null,Nr=new Map,kr=new Map,Ki=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xg(n,i){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Nr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":kr.delete(i.pointerId)}}function Or(n,i,r,c,m,b){return n===null||n.nativeEvent!==b?(n={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:b,targetContainers:[m]},i!==null&&(i=Is(i),i!==null&&qg(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function R1(n,i,r,c,m){switch(i){case"focusin":return Yi=Or(Yi,n,i,r,c,m),!0;case"dragenter":return Xi=Or(Xi,n,i,r,c,m),!0;case"mouseover":return $i=Or($i,n,i,r,c,m),!0;case"pointerover":var b=m.pointerId;return Nr.set(b,Or(Nr.get(b)||null,n,i,r,c,m)),!0;case"gotpointercapture":return b=m.pointerId,kr.set(b,Or(kr.get(b)||null,n,i,r,c,m)),!0}return!1}function $g(n){var i=js(n.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){n.blockedOn=i,lf(n.priority,function(){Vg(r)});return}}else if(i===31){if(i=h(r),i!==null){n.blockedOn=i,lf(n.priority,function(){Vg(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=Ah(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);wc=c,r.target.dispatchEvent(c),wc=null}else return i=Is(r),i!==null&&qg(i),n.blockedOn=r,!1;i.shift()}return!0}function Kg(n,i,r){gl(n)&&r.delete(i)}function D1(){Sh=!1,Yi!==null&&gl(Yi)&&(Yi=null),Xi!==null&&gl(Xi)&&(Xi=null),$i!==null&&gl($i)&&($i=null),Nr.forEach(Kg),kr.forEach(Kg)}function bl(n,i){n.blockedOn===i&&(n.blockedOn=null,Sh||(Sh=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,D1)))}var yl=null;function Wg(n){yl!==n&&(yl=n,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){yl===n&&(yl=null);for(var i=0;i<n.length;i+=3){var r=n[i],c=n[i+1],m=n[i+2];if(typeof c!="function"){if(wh(c||r)===null)continue;break}var b=Is(r);b!==null&&(n.splice(i,3),i-=3,Au(b,{pending:!0,data:m,method:r.method,action:c},c,m))}}))}function Aa(n){function i(D){return bl(D,n)}Yi!==null&&bl(Yi,n),Xi!==null&&bl(Xi,n),$i!==null&&bl($i,n),Nr.forEach(i),kr.forEach(i);for(var r=0;r<Ki.length;r++){var c=Ki[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ki.length&&(r=Ki[0],r.blockedOn===null);)$g(r),r.blockedOn===null&&Ki.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var m=r[c],b=r[c+1],w=m[Qe]||null;if(typeof b=="function")w||Wg(r);else if(w){var _=null;if(b&&b.hasAttribute("formAction")){if(m=b,w=b[Qe]||null)_=w.formAction;else if(wh(m)!==null)continue}else _=w.action;typeof _=="function"?r[c+1]=_:(r.splice(c,3),c-=3),Wg(r)}}}function Qg(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function xh(n){this._internalRoot=n}vl.prototype.render=xh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=pn();Hg(r,c,n,i,null,null)},vl.prototype.unmount=xh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Hg(n.current,2,null,n,null,null),Jo(),i[zs]=null}};function vl(n){this._internalRoot=n}vl.prototype.unstable_scheduleHydration=function(n){if(n){var i=mc();n={blockedOn:null,target:n,priority:i};for(var r=0;r<Ki.length&&i!==0&&i<Ki[r].priority;r++);Ki.splice(r,0,n),r===0&&$g(n)}};var Zg=t.version;if(Zg!=="19.2.3")throw Error(s(527,Zg,"19.2.3"));G.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=f(i),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var N1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{as=Al.inject(N1),Ge=Al}catch{}}return Br.createRoot=function(n,i){if(!a(n))throw Error(s(299));var r=!1,c="",m=ap,b=rp,w=op;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Fg(n,1,!1,null,null,r,c,null,m,b,w,Qg),n[zs]=i.current,sh(n),new xh(i)},Br.hydrateRoot=function(n,i,r){if(!a(n))throw Error(s(299));var c=!1,m="",b=ap,w=rp,_=op,D=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(b=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),i=Fg(n,1,!0,i,r??null,c,m,D,b,w,_,Qg),i.context=Ug(null),r=i.current,c=pn(),c=Ps(c),m=Li(c),m.callback=null,Bi(r,m,c),r=c,i.current.lanes=r,se(i,r),Yn(i),n[zs]=i.current,sh(n),new vl(i)},Br.version="19.2.3",Br}var lb;function U1(){if(lb)return Ch.exports;lb=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(t){console.error(t)}}return u(),Ch.exports=F1(),Ch.exports}var H1=U1();const G1=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q1=u=>u.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),cb=u=>{const t=q1(u);return t.charAt(0).toUpperCase()+t.slice(1)},Dy=(...u)=>u.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),V1=u=>{for(const t in u)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Y1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const X1=z.forwardRef(({color:u="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...h},d)=>z.createElement("svg",{ref:d,...Y1,width:t,height:t,stroke:u,strokeWidth:s?Number(e)*24/Number(t):e,className:Dy("lucide",a),...!o&&!V1(h)&&{"aria-hidden":"true"},...h},[...l.map(([f,g])=>z.createElement(f,g)),...Array.isArray(o)?o:[o]]));const ze=(u,t)=>{const e=z.forwardRef(({className:s,...a},o)=>z.createElement(X1,{ref:o,iconNode:t,className:Dy(`lucide-${G1(cb(u))}`,`lucide-${u}`,s),...a}));return e.displayName=cb(u),e};const $1=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ny=ze("book-open",$1);const K1=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Il=ze("camera",K1);const W1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],pd=ze("chevron-right",W1);const Q1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Z1=ze("circle-check",Q1);const J1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ky=ze("circle-question-mark",J1);const tw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gl=ze("file-text",tw);const ew=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gd=ze("loader-circle",ew);const nw=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ub=ze("map-pin",nw);const iw=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],sw=ze("rotate-ccw",iw);const aw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ql=ze("search",aw);const rw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ow=ze("shield",rw);const lw=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cw=ze("sparkles",lw);const uw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],hw=ze("trash-2",uw);const dw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fw=ze("triangle-alert",dw);const mw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pw=ze("upload",mw);const gw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jd=ze("x",gw);const bw=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],yw=ze("zap",bw);function hb(u,t){if(typeof u=="function")return u(t);u!=null&&(u.current=t)}function Id(...u){return t=>{let e=!1;const s=u.map(a=>{const o=hb(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():hb(u[a],null)}}}}function Ds(...u){return z.useCallback(Id(...u),u)}var vw=Symbol.for("react.lazy"),Vl=zd[" use ".trim().toString()];function Aw(u){return typeof u=="object"&&u!==null&&"then"in u}function Oy(u){return u!=null&&typeof u=="object"&&"$$typeof"in u&&u.$$typeof===vw&&"_payload"in u&&Aw(u._payload)}function ww(u){const t=xw(u),e=z.forwardRef((s,a)=>{let{children:o,...l}=s;Oy(o)&&typeof Vl=="function"&&(o=Vl(o._payload));const h=z.Children.toArray(o),d=h.find(_w);if(d){const f=d.props.children,g=h.map(p=>p===d?z.Children.count(f)>1?z.Children.only(null):z.isValidElement(f)?f.props.children:null:p);return T.jsx(t,{...l,ref:a,children:z.isValidElement(f)?z.cloneElement(f,void 0,g):null})}return T.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${u}.Slot`,e}var Sw=ww("Slot");function xw(u){const t=z.forwardRef((e,s)=>{let{children:a,...o}=e;if(Oy(a)&&typeof Vl=="function"&&(a=Vl(a._payload)),z.isValidElement(a)){const l=Tw(a),h=Cw(o,a.props);return a.type!==z.Fragment&&(h.ref=s?Id(s,l):l),z.cloneElement(a,h)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${u}.SlotClone`,t}var Ew=Symbol("radix.slottable");function _w(u){return z.isValidElement(u)&&typeof u.type=="function"&&"__radixId"in u.type&&u.type.__radixId===Ew}function Cw(u,t){const e={...t};for(const s in t){const a=u[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?e[s]=(...h)=>{const d=o(...h);return a(...h),d}:a&&(e[s]=a):s==="style"?e[s]={...a,...o}:s==="className"&&(e[s]=[a,o].filter(Boolean).join(" "))}return{...u,...e}}function Tw(u){let t=Object.getOwnPropertyDescriptor(u.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?u.ref:(t=Object.getOwnPropertyDescriptor(u,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?u.props.ref:u.props.ref||u.ref)}function Ly(u){var t,e,s="";if(typeof u=="string"||typeof u=="number")s+=u;else if(typeof u=="object")if(Array.isArray(u)){var a=u.length;for(t=0;t<a;t++)u[t]&&(e=Ly(u[t]))&&(s&&(s+=" "),s+=e)}else for(e in u)u[e]&&(s&&(s+=" "),s+=e);return s}function By(){for(var u,t,e=0,s="",a=arguments.length;e<a;e++)(u=arguments[e])&&(t=Ly(u))&&(s&&(s+=" "),s+=t);return s}const db=u=>typeof u=="boolean"?`${u}`:u===0?"0":u,fb=By,Py=(u,t)=>e=>{var s;if(t?.variants==null)return fb(u,e?.class,e?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(f=>{const g=e?.[f],p=o?.[f];if(g===null)return null;const y=db(g)||db(p);return a[f][y]}),h=e&&Object.entries(e).reduce((f,g)=>{let[p,y]=g;return y===void 0||(f[p]=y),f},{}),d=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((f,g)=>{let{class:p,className:y,...A}=g;return Object.entries(A).every(S=>{let[v,E]=S;return Array.isArray(E)?E.includes({...o,...h}[v]):{...o,...h}[v]===E})?[...f,p,y]:f},[]);return fb(u,l,d,e?.class,e?.className)},Mw=(u,t)=>{const e=new Array(u.length+t.length);for(let s=0;s<u.length;s++)e[s]=u[s];for(let s=0;s<t.length;s++)e[u.length+s]=t[s];return e},Rw=(u,t)=>({classGroupId:u,validator:t}),zy=(u=new Map,t=null,e)=>({nextPart:u,validators:t,classGroupId:e}),Yl="-",mb=[],Dw="arbitrary..",Nw=u=>{const t=Ow(u),{conflictingClassGroups:e,conflictingClassGroupModifiers:s}=u;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return kw(l);const h=l.split(Yl),d=h[0]===""&&h.length>1?1:0;return jy(h,d,t)},getConflictingClassGroupIds:(l,h)=>{if(h){const d=s[l],f=e[l];return d?f?Mw(f,d):d:f||mb}return e[l]||mb}}},jy=(u,t,e)=>{if(u.length-t===0)return e.classGroupId;const a=u[t],o=e.nextPart.get(a);if(o){const f=jy(u,t+1,o);if(f)return f}const l=e.validators;if(l===null)return;const h=t===0?u.join(Yl):u.slice(t).join(Yl),d=l.length;for(let f=0;f<d;f++){const g=l[f];if(g.validator(h))return g.classGroupId}},kw=u=>u.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=u.slice(1,-1),e=t.indexOf(":"),s=t.slice(0,e);return s?Dw+s:void 0})(),Ow=u=>{const{theme:t,classGroups:e}=u;return Lw(e,t)},Lw=(u,t)=>{const e=zy();for(const s in u){const a=u[s];Fd(a,e,s,t)}return e},Fd=(u,t,e,s)=>{const a=u.length;for(let o=0;o<a;o++){const l=u[o];Bw(l,t,e,s)}},Bw=(u,t,e,s)=>{if(typeof u=="string"){Pw(u,t,e);return}if(typeof u=="function"){zw(u,t,e,s);return}jw(u,t,e,s)},Pw=(u,t,e)=>{const s=u===""?t:Iy(t,u);s.classGroupId=e},zw=(u,t,e,s)=>{if(Iw(u)){Fd(u(s),t,e,s);return}t.validators===null&&(t.validators=[]),t.validators.push(Rw(e,u))},jw=(u,t,e,s)=>{const a=Object.entries(u),o=a.length;for(let l=0;l<o;l++){const[h,d]=a[l];Fd(d,Iy(t,h),e,s)}},Iy=(u,t)=>{let e=u;const s=t.split(Yl),a=s.length;for(let o=0;o<a;o++){const l=s[o];let h=e.nextPart.get(l);h||(h=zy(),e.nextPart.set(l,h)),e=h}return e},Iw=u=>"isThemeGetter"in u&&u.isThemeGetter===!0,Fw=u=>{if(u<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),s=Object.create(null);const a=(o,l)=>{e[o]=l,t++,t>u&&(t=0,s=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=s[o])!==void 0)return a(o,l),l},set(o,l){o in e?e[o]=l:a(o,l)}}},bd="!",pb=":",Uw=[],gb=(u,t,e,s,a)=>({modifiers:u,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:s,isExternal:a}),Hw=u=>{const{prefix:t,experimentalParseClassName:e}=u;let s=a=>{const o=[];let l=0,h=0,d=0,f;const g=a.length;for(let v=0;v<g;v++){const E=a[v];if(l===0&&h===0){if(E===pb){o.push(a.slice(d,v)),d=v+1;continue}if(E==="/"){f=v;continue}}E==="["?l++:E==="]"?l--:E==="("?h++:E===")"&&h--}const p=o.length===0?a:a.slice(d);let y=p,A=!1;p.endsWith(bd)?(y=p.slice(0,-1),A=!0):p.startsWith(bd)&&(y=p.slice(1),A=!0);const S=f&&f>d?f-d:void 0;return gb(o,A,y,S)};if(t){const a=t+pb,o=s;s=l=>l.startsWith(a)?o(l.slice(a.length)):gb(Uw,!1,l,void 0,!0)}if(e){const a=s;s=o=>e({className:o,parseClassName:a})}return s},Gw=u=>{const t=new Map;return u.orderSensitiveModifiers.forEach((e,s)=>{t.set(e,1e6+s)}),e=>{const s=[];let a=[];for(let o=0;o<e.length;o++){const l=e[o],h=l[0]==="[",d=t.has(l);h||d?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(l)):a.push(l)}return a.length>0&&(a.sort(),s.push(...a)),s}},qw=u=>({cache:Fw(u.cacheSize),parseClassName:Hw(u),sortModifiers:Gw(u),...Nw(u)}),Vw=/\s+/,Yw=(u,t)=>{const{parseClassName:e,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],h=u.trim().split(Vw);let d="";for(let f=h.length-1;f>=0;f-=1){const g=h[f],{isExternal:p,modifiers:y,hasImportantModifier:A,baseClassName:S,maybePostfixModifierPosition:v}=e(g);if(p){d=g+(d.length>0?" "+d:d);continue}let E=!!v,x=s(E?S.substring(0,v):S);if(!x){if(!E){d=g+(d.length>0?" "+d:d);continue}if(x=s(S),!x){d=g+(d.length>0?" "+d:d);continue}E=!1}const R=y.length===0?"":y.length===1?y[0]:o(y).join(":"),M=A?R+bd:R,N=M+x;if(l.indexOf(N)>-1)continue;l.push(N);const k=a(x,E);for(let L=0;L<k.length;++L){const P=k[L];l.push(M+P)}d=g+(d.length>0?" "+d:d)}return d},Xw=(...u)=>{let t=0,e,s,a="";for(;t<u.length;)(e=u[t++])&&(s=Fy(e))&&(a&&(a+=" "),a+=s);return a},Fy=u=>{if(typeof u=="string")return u;let t,e="";for(let s=0;s<u.length;s++)u[s]&&(t=Fy(u[s]))&&(e&&(e+=" "),e+=t);return e},$w=(u,...t)=>{let e,s,a,o;const l=d=>{const f=t.reduce((g,p)=>p(g),u());return e=qw(f),s=e.cache.get,a=e.cache.set,o=h,h(d)},h=d=>{const f=s(d);if(f)return f;const g=Yw(d,e);return a(d,g),g};return o=l,(...d)=>o(Xw(...d))},Kw=[],we=u=>{const t=e=>e[u]||Kw;return t.isThemeGetter=!0,t},Uy=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Hy=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Ww=/^\d+\/\d+$/,Qw=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zw=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Jw=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,tS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eS=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wa=u=>Ww.test(u),Nt=u=>!!u&&!Number.isNaN(Number(u)),Qi=u=>!!u&&Number.isInteger(Number(u)),Dh=u=>u.endsWith("%")&&Nt(u.slice(0,-1)),Ai=u=>Qw.test(u),nS=()=>!0,iS=u=>Zw.test(u)&&!Jw.test(u),Gy=()=>!1,sS=u=>tS.test(u),aS=u=>eS.test(u),rS=u=>!mt(u)&&!pt(u),oS=u=>ja(u,Yy,Gy),mt=u=>Uy.test(u),_s=u=>ja(u,Xy,iS),Nh=u=>ja(u,dS,Nt),bb=u=>ja(u,qy,Gy),lS=u=>ja(u,Vy,aS),wl=u=>ja(u,$y,sS),pt=u=>Hy.test(u),Pr=u=>Ia(u,Xy),cS=u=>Ia(u,fS),yb=u=>Ia(u,qy),uS=u=>Ia(u,Yy),hS=u=>Ia(u,Vy),Sl=u=>Ia(u,$y,!0),ja=(u,t,e)=>{const s=Uy.exec(u);return s?s[1]?t(s[1]):e(s[2]):!1},Ia=(u,t,e=!1)=>{const s=Hy.exec(u);return s?s[1]?t(s[1]):e:!1},qy=u=>u==="position"||u==="percentage",Vy=u=>u==="image"||u==="url",Yy=u=>u==="length"||u==="size"||u==="bg-size",Xy=u=>u==="length",dS=u=>u==="number",fS=u=>u==="family-name",$y=u=>u==="shadow",mS=()=>{const u=we("color"),t=we("font"),e=we("text"),s=we("font-weight"),a=we("tracking"),o=we("leading"),l=we("breakpoint"),h=we("container"),d=we("spacing"),f=we("radius"),g=we("shadow"),p=we("inset-shadow"),y=we("text-shadow"),A=we("drop-shadow"),S=we("blur"),v=we("perspective"),E=we("aspect"),x=we("ease"),R=we("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...N(),pt,mt],L=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],F=()=>[pt,mt,d],Q=()=>[wa,"full","auto",...F()],it=()=>[Qi,"none","subgrid",pt,mt],nt=()=>["auto",{span:["full",Qi,pt,mt]},Qi,pt,mt],lt=()=>[Qi,"auto",pt,mt],ht=()=>["auto","min","max","fr",pt,mt],gt=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],yt=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...F()],G=()=>[wa,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...F()],K=()=>[u,pt,mt],X=()=>[...N(),yb,bb,{position:[pt,mt]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],C=()=>["auto","cover","contain",uS,oS,{size:[pt,mt]}],I=()=>[Dh,Pr,_s],B=()=>["","none","full",f,pt,mt],$=()=>["",Nt,Pr,_s],et=()=>["solid","dashed","dotted","double"],rt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],st=()=>[Nt,Dh,yb,bb],ct=()=>["","none",S,pt,mt],ot=()=>["none",Nt,pt,mt],vt=()=>["none",Nt,pt,mt],Rt=()=>[Nt,pt,mt],It=()=>[wa,"full",...F()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ai],breakpoint:[Ai],color:[nS],container:[Ai],"drop-shadow":[Ai],ease:["in","out","in-out"],font:[rS],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ai],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ai],shadow:[Ai],spacing:["px",Nt],text:[Ai],"text-shadow":[Ai],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wa,mt,pt,E]}],container:["container"],columns:[{columns:[Nt,mt,pt,h]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Q()}],"inset-x":[{"inset-x":Q()}],"inset-y":[{"inset-y":Q()}],start:[{start:Q()}],end:[{end:Q()}],top:[{top:Q()}],right:[{right:Q()}],bottom:[{bottom:Q()}],left:[{left:Q()}],visibility:["visible","invisible","collapse"],z:[{z:[Qi,"auto",pt,mt]}],basis:[{basis:[wa,"full","auto",h,...F()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Nt,wa,"auto","initial","none",mt]}],grow:[{grow:["",Nt,pt,mt]}],shrink:[{shrink:["",Nt,pt,mt]}],order:[{order:[Qi,"first","last","none",pt,mt]}],"grid-cols":[{"grid-cols":it()}],"col-start-end":[{col:nt()}],"col-start":[{"col-start":lt()}],"col-end":[{"col-end":lt()}],"grid-rows":[{"grid-rows":it()}],"row-start-end":[{row:nt()}],"row-start":[{"row-start":lt()}],"row-end":[{"row-end":lt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ht()}],"auto-rows":[{"auto-rows":ht()}],gap:[{gap:F()}],"gap-x":[{"gap-x":F()}],"gap-y":[{"gap-y":F()}],"justify-content":[{justify:[...gt(),"normal"]}],"justify-items":[{"justify-items":[...yt(),"normal"]}],"justify-self":[{"justify-self":["auto",...yt()]}],"align-content":[{content:["normal",...gt()]}],"align-items":[{items:[...yt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...yt(),{baseline:["","last"]}]}],"place-content":[{"place-content":gt()}],"place-items":[{"place-items":[...yt(),"baseline"]}],"place-self":[{"place-self":["auto",...yt()]}],p:[{p:F()}],px:[{px:F()}],py:[{py:F()}],ps:[{ps:F()}],pe:[{pe:F()}],pt:[{pt:F()}],pr:[{pr:F()}],pb:[{pb:F()}],pl:[{pl:F()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":F()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":F()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[h,"screen",...G()]}],"min-w":[{"min-w":[h,"screen","none",...G()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[l]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",e,Pr,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,pt,Nh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Dh,mt]}],"font-family":[{font:[cS,mt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,pt,mt]}],"line-clamp":[{"line-clamp":[Nt,"none",pt,Nh]}],leading:[{leading:[o,...F()]}],"list-image":[{"list-image":["none",pt,mt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",pt,mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:K()}],"text-color":[{text:K()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...et(),"wavy"]}],"text-decoration-thickness":[{decoration:[Nt,"from-font","auto",pt,_s]}],"text-decoration-color":[{decoration:K()}],"underline-offset":[{"underline-offset":[Nt,"auto",pt,mt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pt,mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pt,mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:X()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:C()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qi,pt,mt],radial:["",pt,mt],conic:[Qi,pt,mt]},hS,lS]}],"bg-color":[{bg:K()}],"gradient-from-pos":[{from:I()}],"gradient-via-pos":[{via:I()}],"gradient-to-pos":[{to:I()}],"gradient-from":[{from:K()}],"gradient-via":[{via:K()}],"gradient-to":[{to:K()}],rounded:[{rounded:B()}],"rounded-s":[{"rounded-s":B()}],"rounded-e":[{"rounded-e":B()}],"rounded-t":[{"rounded-t":B()}],"rounded-r":[{"rounded-r":B()}],"rounded-b":[{"rounded-b":B()}],"rounded-l":[{"rounded-l":B()}],"rounded-ss":[{"rounded-ss":B()}],"rounded-se":[{"rounded-se":B()}],"rounded-ee":[{"rounded-ee":B()}],"rounded-es":[{"rounded-es":B()}],"rounded-tl":[{"rounded-tl":B()}],"rounded-tr":[{"rounded-tr":B()}],"rounded-br":[{"rounded-br":B()}],"rounded-bl":[{"rounded-bl":B()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...et(),"hidden","none"]}],"divide-style":[{divide:[...et(),"hidden","none"]}],"border-color":[{border:K()}],"border-color-x":[{"border-x":K()}],"border-color-y":[{"border-y":K()}],"border-color-s":[{"border-s":K()}],"border-color-e":[{"border-e":K()}],"border-color-t":[{"border-t":K()}],"border-color-r":[{"border-r":K()}],"border-color-b":[{"border-b":K()}],"border-color-l":[{"border-l":K()}],"divide-color":[{divide:K()}],"outline-style":[{outline:[...et(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Nt,pt,mt]}],"outline-w":[{outline:["",Nt,Pr,_s]}],"outline-color":[{outline:K()}],shadow:[{shadow:["","none",g,Sl,wl]}],"shadow-color":[{shadow:K()}],"inset-shadow":[{"inset-shadow":["none",p,Sl,wl]}],"inset-shadow-color":[{"inset-shadow":K()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:K()}],"ring-offset-w":[{"ring-offset":[Nt,_s]}],"ring-offset-color":[{"ring-offset":K()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":K()}],"text-shadow":[{"text-shadow":["none",y,Sl,wl]}],"text-shadow-color":[{"text-shadow":K()}],opacity:[{opacity:[Nt,pt,mt]}],"mix-blend":[{"mix-blend":[...rt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":rt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":st()}],"mask-image-linear-to-pos":[{"mask-linear-to":st()}],"mask-image-linear-from-color":[{"mask-linear-from":K()}],"mask-image-linear-to-color":[{"mask-linear-to":K()}],"mask-image-t-from-pos":[{"mask-t-from":st()}],"mask-image-t-to-pos":[{"mask-t-to":st()}],"mask-image-t-from-color":[{"mask-t-from":K()}],"mask-image-t-to-color":[{"mask-t-to":K()}],"mask-image-r-from-pos":[{"mask-r-from":st()}],"mask-image-r-to-pos":[{"mask-r-to":st()}],"mask-image-r-from-color":[{"mask-r-from":K()}],"mask-image-r-to-color":[{"mask-r-to":K()}],"mask-image-b-from-pos":[{"mask-b-from":st()}],"mask-image-b-to-pos":[{"mask-b-to":st()}],"mask-image-b-from-color":[{"mask-b-from":K()}],"mask-image-b-to-color":[{"mask-b-to":K()}],"mask-image-l-from-pos":[{"mask-l-from":st()}],"mask-image-l-to-pos":[{"mask-l-to":st()}],"mask-image-l-from-color":[{"mask-l-from":K()}],"mask-image-l-to-color":[{"mask-l-to":K()}],"mask-image-x-from-pos":[{"mask-x-from":st()}],"mask-image-x-to-pos":[{"mask-x-to":st()}],"mask-image-x-from-color":[{"mask-x-from":K()}],"mask-image-x-to-color":[{"mask-x-to":K()}],"mask-image-y-from-pos":[{"mask-y-from":st()}],"mask-image-y-to-pos":[{"mask-y-to":st()}],"mask-image-y-from-color":[{"mask-y-from":K()}],"mask-image-y-to-color":[{"mask-y-to":K()}],"mask-image-radial":[{"mask-radial":[pt,mt]}],"mask-image-radial-from-pos":[{"mask-radial-from":st()}],"mask-image-radial-to-pos":[{"mask-radial-to":st()}],"mask-image-radial-from-color":[{"mask-radial-from":K()}],"mask-image-radial-to-color":[{"mask-radial-to":K()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":st()}],"mask-image-conic-to-pos":[{"mask-conic-to":st()}],"mask-image-conic-from-color":[{"mask-conic-from":K()}],"mask-image-conic-to-color":[{"mask-conic-to":K()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:X()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:C()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",pt,mt]}],filter:[{filter:["","none",pt,mt]}],blur:[{blur:ct()}],brightness:[{brightness:[Nt,pt,mt]}],contrast:[{contrast:[Nt,pt,mt]}],"drop-shadow":[{"drop-shadow":["","none",A,Sl,wl]}],"drop-shadow-color":[{"drop-shadow":K()}],grayscale:[{grayscale:["",Nt,pt,mt]}],"hue-rotate":[{"hue-rotate":[Nt,pt,mt]}],invert:[{invert:["",Nt,pt,mt]}],saturate:[{saturate:[Nt,pt,mt]}],sepia:[{sepia:["",Nt,pt,mt]}],"backdrop-filter":[{"backdrop-filter":["","none",pt,mt]}],"backdrop-blur":[{"backdrop-blur":ct()}],"backdrop-brightness":[{"backdrop-brightness":[Nt,pt,mt]}],"backdrop-contrast":[{"backdrop-contrast":[Nt,pt,mt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Nt,pt,mt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Nt,pt,mt]}],"backdrop-invert":[{"backdrop-invert":["",Nt,pt,mt]}],"backdrop-opacity":[{"backdrop-opacity":[Nt,pt,mt]}],"backdrop-saturate":[{"backdrop-saturate":[Nt,pt,mt]}],"backdrop-sepia":[{"backdrop-sepia":["",Nt,pt,mt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":F()}],"border-spacing-x":[{"border-spacing-x":F()}],"border-spacing-y":[{"border-spacing-y":F()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",pt,mt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Nt,"initial",pt,mt]}],ease:[{ease:["linear","initial",x,pt,mt]}],delay:[{delay:[Nt,pt,mt]}],animate:[{animate:["none",R,pt,mt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,pt,mt]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:ot()}],"rotate-x":[{"rotate-x":ot()}],"rotate-y":[{"rotate-y":ot()}],"rotate-z":[{"rotate-z":ot()}],scale:[{scale:vt()}],"scale-x":[{"scale-x":vt()}],"scale-y":[{"scale-y":vt()}],"scale-z":[{"scale-z":vt()}],"scale-3d":["scale-3d"],skew:[{skew:Rt()}],"skew-x":[{"skew-x":Rt()}],"skew-y":[{"skew-y":Rt()}],transform:[{transform:[pt,mt,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:It()}],"translate-x":[{"translate-x":It()}],"translate-y":[{"translate-y":It()}],"translate-z":[{"translate-z":It()}],"translate-none":["translate-none"],accent:[{accent:K()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:K()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pt,mt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pt,mt]}],fill:[{fill:["none",...K()]}],"stroke-w":[{stroke:[Nt,Pr,_s,Nh]}],stroke:[{stroke:["none",...K()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},pS=$w(mS);function On(...u){return pS(By(u))}const gS=Py("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),gn=z.forwardRef(({className:u,variant:t,size:e,asChild:s=!1,...a},o)=>{const l=s?Sw:"button";return T.jsx(l,{className:On(gS({variant:t,size:e,className:u})),ref:o,...a})});gn.displayName="Button";const Xl=z.forwardRef(({className:u,type:t,...e},s)=>T.jsx("input",{type:t,className:On("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",u),ref:s,...e}));Xl.displayName="Input";const bS={burnable:{label:"Burnable",labelJp:"可燃ごみ",color:"#ef4444",icon:"🔥"},"non-burnable":{label:"Non-burnable",labelJp:"不燃ごみ",color:"#3b82f6",icon:"🪨"},recyclable:{label:"Recyclable",labelJp:"資源ごみ",color:"#22c55e",icon:"♻️"},hazardous:{label:"Hazardous",labelJp:"危険ごみ",color:"#f59e0b",icon:"⚠️"},oversized:{label:"Oversized",labelJp:"粗大ごみ",color:"#a855f7",icon:"📦"},unknown:{label:"Unknown",labelJp:"不明",color:"#64748b",icon:"❓"}},yS=[{id:"1",name:"電池",icon:"🔋",category:"hazardous",keywords:["電池","バッテリー","乾電池","充電池"]},{id:"2",name:"スプレー缶",icon:"🧴",category:"hazardous",keywords:["スプレー","缶","エアゾール","ガス"]},{id:"3",name:"ライター",icon:"🔥",category:"hazardous",keywords:["ライター","着火","ガスライター"]},{id:"4",name:"刃物",icon:"🔪",category:"non-burnable",keywords:["刃物","包丁","ナイフ","カッター","はさみ"]},{id:"5",name:"ガラス",icon:"🪞",category:"non-burnable",keywords:["ガラス","割れ物","鏡","びん"]},{id:"6",name:"蛍光灯",icon:"💡",category:"hazardous",keywords:["蛍光灯","蛍光管","電球"]},{id:"7",name:"ペットボトル",icon:"🍾",category:"recyclable",keywords:["ペットボトル","PET","プラ"]},{id:"8",name:"段ボール",icon:"📦",category:"recyclable",keywords:["段ボール","ダンボール","紙"]}],vS=[{name:"東京都渋谷区",prefecture:"東京都"},{name:"東京都新宿区",prefecture:"東京都"},{name:"東京都世田谷区",prefecture:"東京都"},{name:"神奈川県横浜市",prefecture:"神奈川県"},{name:"大阪府大阪市",prefecture:"大阪府"},{name:"愛知県名古屋市",prefecture:"愛知県"},{name:"福岡県福岡市",prefecture:"福岡県"},{name:"北海道札幌市",prefecture:"北海道"}];var Ky=Ry();const Wy=Bd(Ky);function AS(u){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=u:e.appendChild(document.createTextNode(u))}const wS=u=>{switch(u){case"success":return ES;case"info":return CS;case"warning":return _S;case"error":return TS;default:return null}},SS=Array(12).fill(0),xS=({visible:u,className:t})=>at.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":u},at.createElement("div",{className:"sonner-spinner"},SS.map((e,s)=>at.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),ES=at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},at.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),_S=at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},at.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),CS=at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},at.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),TS=at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},at.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),MS=at.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},at.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),at.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),RS=()=>{const[u,t]=at.useState(document.hidden);return at.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),u};let yd=1;class DS{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;const{message:s,...a}=t,o=typeof t?.id=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:yd++,l=this.toasts.find(d=>d.id===o),h=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...t,id:o,title:s}),{...d,...t,id:o,dismissible:h,title:s}):d):this.addToast({title:s,...a,dismissible:h,id:o}),o},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:t,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(s=>s({id:e.id,dismiss:!0}))}),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let s;e.loading!==void 0&&(s=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let o=s!==void 0,l;const h=a.then(async f=>{if(l=["resolve",f],at.isValidElement(f))o=!1,this.create({id:s,type:"default",message:f});else if(kS(f)&&!f.ok){o=!1;const p=typeof e.error=="function"?await e.error(`HTTP error! status: ${f.status}`):e.error,y=typeof e.description=="function"?await e.description(`HTTP error! status: ${f.status}`):e.description,S=typeof p=="object"&&!at.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:y,...S})}else if(f instanceof Error){o=!1;const p=typeof e.error=="function"?await e.error(f):e.error,y=typeof e.description=="function"?await e.description(f):e.description,S=typeof p=="object"&&!at.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:y,...S})}else if(e.success!==void 0){o=!1;const p=typeof e.success=="function"?await e.success(f):e.success,y=typeof e.description=="function"?await e.description(f):e.description,S=typeof p=="object"&&!at.isValidElement(p)?p:{message:p};this.create({id:s,type:"success",description:y,...S})}}).catch(async f=>{if(l=["reject",f],e.error!==void 0){o=!1;const g=typeof e.error=="function"?await e.error(f):e.error,p=typeof e.description=="function"?await e.description(f):e.description,A=typeof g=="object"&&!at.isValidElement(g)?g:{message:g};this.create({id:s,type:"error",description:p,...A})}}).finally(()=>{o&&(this.dismiss(s),s=void 0),e.finally==null||e.finally.call(e)}),d=()=>new Promise((f,g)=>h.then(()=>l[0]==="reject"?g(l[1]):f(l[1])).catch(g));return typeof s!="string"&&typeof s!="number"?{unwrap:d}:Object.assign(s,{unwrap:d})},this.custom=(t,e)=>{const s=e?.id||yd++;return this.create({jsx:t(s),id:s,...e}),s},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const rn=new DS,NS=(u,t)=>{const e=t?.id||yd++;return rn.addToast({title:u,...t,id:e}),e},kS=u=>u&&typeof u=="object"&&"ok"in u&&typeof u.ok=="boolean"&&"status"in u&&typeof u.status=="number",OS=NS,LS=()=>rn.toasts,BS=()=>rn.getActiveToasts(),Vr=Object.assign(OS,{success:rn.success,info:rn.info,warning:rn.warning,error:rn.error,custom:rn.custom,message:rn.message,promise:rn.promise,dismiss:rn.dismiss,loading:rn.loading},{getHistory:LS,getToasts:BS});AS("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function xl(u){return u.label!==void 0}const PS=3,zS="24px",jS="16px",vb=4e3,IS=356,FS=14,US=45,HS=200;function Xn(...u){return u.filter(Boolean).join(" ")}function GS(u){const[t,e]=u.split("-"),s=[];return t&&s.push(t),e&&s.push(e),s}const qS=u=>{var t,e,s,a,o,l,h,d,f;const{invert:g,toast:p,unstyled:y,interacting:A,setHeights:S,visibleToasts:v,heights:E,index:x,toasts:R,expanded:M,removeToast:N,defaultRichColors:k,closeButton:L,style:P,cancelButtonStyle:F,actionButtonStyle:Q,className:it="",descriptionClassName:nt="",duration:lt,position:ht,gap:gt,expandByDefault:yt,classNames:O,icons:G,closeButtonAriaLabel:K="Close toast"}=u,[X,V]=at.useState(null),[C,I]=at.useState(null),[B,$]=at.useState(!1),[et,rt]=at.useState(!1),[st,ct]=at.useState(!1),[ot,vt]=at.useState(!1),[Rt,It]=at.useState(!1),[fe,ee]=at.useState(0),[Os,Fn]=at.useState(0),ti=at.useRef(p.duration||lt||vb),Fa=at.useRef(null),ln=at.useRef(null),Ua=x===0,Ha=x+1<=v,Ue=p.type,Ei=p.dismissible!==!1,He=p.className||"",dc=p.descriptionClassName||"",is=at.useMemo(()=>E.findIndex(xt=>xt.toastId===p.id)||0,[E,p.id]),ro=at.useMemo(()=>{var xt;return(xt=p.closeButton)!=null?xt:L},[p.closeButton,L]),ss=at.useMemo(()=>p.duration||lt||vb,[p.duration,lt]),Ga=at.useRef(0),ei=at.useRef(0),oo=at.useRef(0),_i=at.useRef(null),[as,Ge]=ht.split("-"),Ln=at.useMemo(()=>E.reduce((xt,ne,Se)=>Se>=is?xt:xt+ne.height,0),[E,is]),je=RS(),fc=p.invert||g,qa=Ue==="loading";ei.current=at.useMemo(()=>is*gt+Ln,[is,Ln]),at.useEffect(()=>{ti.current=ss},[ss]),at.useEffect(()=>{$(!0)},[]),at.useEffect(()=>{const xt=ln.current;if(xt){const ne=xt.getBoundingClientRect().height;return Fn(ne),S(Se=>[{toastId:p.id,height:ne,position:p.position},...Se]),()=>S(Se=>Se.filter(Ie=>Ie.toastId!==p.id))}},[S,p.id]),at.useLayoutEffect(()=>{if(!B)return;const xt=ln.current,ne=xt.style.height;xt.style.height="auto";const Se=xt.getBoundingClientRect().height;xt.style.height=ne,Fn(Se),S(Ie=>Ie.find(se=>se.toastId===p.id)?Ie.map(se=>se.toastId===p.id?{...se,height:Se}:se):[{toastId:p.id,height:Se,position:p.position},...Ie])},[B,p.title,p.description,S,p.id,p.jsx,p.action,p.cancel]);const Un=at.useCallback(()=>{rt(!0),ee(ei.current),S(xt=>xt.filter(ne=>ne.toastId!==p.id)),setTimeout(()=>{N(p)},HS)},[p,N,S,ei]);at.useEffect(()=>{if(p.promise&&Ue==="loading"||p.duration===1/0||p.type==="loading")return;let xt;return M||A||je?(()=>{if(oo.current<Ga.current){const Ie=new Date().getTime()-Ga.current;ti.current=ti.current-Ie}oo.current=new Date().getTime()})():ti.current!==1/0&&(Ga.current=new Date().getTime(),xt=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Un()},ti.current)),()=>clearTimeout(xt)},[M,A,p,Ue,je,Un]),at.useEffect(()=>{p.delete&&(Un(),p.onDismiss==null||p.onDismiss.call(p,p))},[Un,p.delete]);function Ls(){var xt;if(G?.loading){var ne;return at.createElement("div",{className:Xn(O?.loader,p==null||(ne=p.classNames)==null?void 0:ne.loader,"sonner-loader"),"data-visible":Ue==="loading"},G.loading)}return at.createElement(xS,{className:Xn(O?.loader,p==null||(xt=p.classNames)==null?void 0:xt.loader),visible:Ue==="loading"})}const Bs=p.icon||G?.[Ue]||wS(Ue);var rs,Hn;return at.createElement("li",{tabIndex:0,ref:ln,className:Xn(it,He,O?.toast,p==null||(t=p.classNames)==null?void 0:t.toast,O?.default,O?.[Ue],p==null||(e=p.classNames)==null?void 0:e[Ue]),"data-sonner-toast":"","data-rich-colors":(rs=p.richColors)!=null?rs:k,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":B,"data-promise":!!p.promise,"data-swiped":Rt,"data-removed":et,"data-visible":Ha,"data-y-position":as,"data-x-position":Ge,"data-index":x,"data-front":Ua,"data-swiping":st,"data-dismissible":Ei,"data-type":Ue,"data-invert":fc,"data-swipe-out":ot,"data-swipe-direction":C,"data-expanded":!!(M||yt&&B),"data-testid":p.testId,style:{"--index":x,"--toasts-before":x,"--z-index":R.length-x,"--offset":`${et?fe:ei.current}px`,"--initial-height":yt?"auto":`${Os}px`,...P,...p.style},onDragEnd:()=>{ct(!1),V(null),_i.current=null},onPointerDown:xt=>{xt.button!==2&&(qa||!Ei||(Fa.current=new Date,ee(ei.current),xt.target.setPointerCapture(xt.pointerId),xt.target.tagName!=="BUTTON"&&(ct(!0),_i.current={x:xt.clientX,y:xt.clientY})))},onPointerUp:()=>{var xt,ne,Se;if(ot||!Ei)return;_i.current=null;const Ie=Number(((xt=ln.current)==null?void 0:xt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ci=Number(((ne=ln.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),se=new Date().getTime()-((Se=Fa.current)==null?void 0:Se.getTime()),$e=X==="x"?Ie:Ci,os=Math.abs($e)/se;if(Math.abs($e)>=US||os>.11){ee(ei.current),p.onDismiss==null||p.onDismiss.call(p,p),I(X==="x"?Ie>0?"right":"left":Ci>0?"down":"up"),Un(),vt(!0);return}else{var Ke,We;(Ke=ln.current)==null||Ke.style.setProperty("--swipe-amount-x","0px"),(We=ln.current)==null||We.style.setProperty("--swipe-amount-y","0px")}It(!1),ct(!1),V(null)},onPointerMove:xt=>{var ne,Se,Ie;if(!_i.current||!Ei||((ne=window.getSelection())==null?void 0:ne.toString().length)>0)return;const se=xt.clientY-_i.current.y,$e=xt.clientX-_i.current.x;var os;const Ke=(os=u.swipeDirections)!=null?os:GS(ht);!X&&(Math.abs($e)>1||Math.abs(se)>1)&&V(Math.abs($e)>Math.abs(se)?"x":"y");let We={x:0,y:0};const Ps=Bn=>1/(1.5+Math.abs(Bn)/20);if(X==="y"){if(Ke.includes("top")||Ke.includes("bottom"))if(Ke.includes("top")&&se<0||Ke.includes("bottom")&&se>0)We.y=se;else{const Bn=se*Ps(se);We.y=Math.abs(Bn)<Math.abs(se)?Bn:se}}else if(X==="x"&&(Ke.includes("left")||Ke.includes("right")))if(Ke.includes("left")&&$e<0||Ke.includes("right")&&$e>0)We.x=$e;else{const Bn=$e*Ps($e);We.x=Math.abs(Bn)<Math.abs($e)?Bn:$e}(Math.abs(We.x)>0||Math.abs(We.y)>0)&&It(!0),(Se=ln.current)==null||Se.style.setProperty("--swipe-amount-x",`${We.x}px`),(Ie=ln.current)==null||Ie.style.setProperty("--swipe-amount-y",`${We.y}px`)}},ro&&!p.jsx&&Ue!=="loading"?at.createElement("button",{"aria-label":K,"data-disabled":qa,"data-close-button":!0,onClick:qa||!Ei?()=>{}:()=>{Un(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Xn(O?.closeButton,p==null||(s=p.classNames)==null?void 0:s.closeButton)},(Hn=G?.close)!=null?Hn:MS):null,(Ue||p.icon||p.promise)&&p.icon!==null&&(G?.[Ue]!==null||p.icon)?at.createElement("div",{"data-icon":"",className:Xn(O?.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Ls():null,p.type!=="loading"?Bs:null):null,at.createElement("div",{"data-content":"",className:Xn(O?.content,p==null||(o=p.classNames)==null?void 0:o.content)},at.createElement("div",{"data-title":"",className:Xn(O?.title,p==null||(l=p.classNames)==null?void 0:l.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?at.createElement("div",{"data-description":"",className:Xn(nt,dc,O?.description,p==null||(h=p.classNames)==null?void 0:h.description)},typeof p.description=="function"?p.description():p.description):null),at.isValidElement(p.cancel)?p.cancel:p.cancel&&xl(p.cancel)?at.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||F,onClick:xt=>{xl(p.cancel)&&Ei&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,xt),Un())},className:Xn(O?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,at.isValidElement(p.action)?p.action:p.action&&xl(p.action)?at.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||Q,onClick:xt=>{xl(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,xt),!xt.defaultPrevented&&Un())},className:Xn(O?.actionButton,p==null||(f=p.classNames)==null?void 0:f.actionButton)},p.action.label):null)};function Ab(){if(typeof window>"u"||typeof document>"u")return"ltr";const u=document.documentElement.getAttribute("dir");return u==="auto"||!u?window.getComputedStyle(document.documentElement).direction:u}function VS(u,t){const e={};return[u,t].forEach((s,a)=>{const o=a===1,l=o?"--mobile-offset":"--offset",h=o?jS:zS;function d(f){["top","right","bottom","left"].forEach(g=>{e[`${l}-${g}`]=typeof f=="number"?`${f}px`:f})}typeof s=="number"||typeof s=="string"?d(s):typeof s=="object"?["top","right","bottom","left"].forEach(f=>{s[f]===void 0?e[`${l}-${f}`]=h:e[`${l}-${f}`]=typeof s[f]=="number"?`${s[f]}px`:s[f]}):d(h)}),e}const YS=at.forwardRef(function(t,e){const{id:s,invert:a,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:h,closeButton:d,className:f,offset:g,mobileOffset:p,theme:y="light",richColors:A,duration:S,style:v,visibleToasts:E=PS,toastOptions:x,dir:R=Ab(),gap:M=FS,icons:N,containerAriaLabel:k="Notifications"}=t,[L,P]=at.useState([]),F=at.useMemo(()=>s?L.filter(B=>B.toasterId===s):L.filter(B=>!B.toasterId),[L,s]),Q=at.useMemo(()=>Array.from(new Set([o].concat(F.filter(B=>B.position).map(B=>B.position)))),[F,o]),[it,nt]=at.useState([]),[lt,ht]=at.useState(!1),[gt,yt]=at.useState(!1),[O,G]=at.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=at.useRef(null),X=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=at.useRef(null),C=at.useRef(!1),I=at.useCallback(B=>{P($=>{var et;return(et=$.find(rt=>rt.id===B.id))!=null&&et.delete||rn.dismiss(B.id),$.filter(({id:rt})=>rt!==B.id)})},[]);return at.useEffect(()=>rn.subscribe(B=>{if(B.dismiss){requestAnimationFrame(()=>{P($=>$.map(et=>et.id===B.id?{...et,delete:!0}:et))});return}setTimeout(()=>{Wy.flushSync(()=>{P($=>{const et=$.findIndex(rt=>rt.id===B.id);return et!==-1?[...$.slice(0,et),{...$[et],...B},...$.slice(et+1)]:[B,...$]})})})}),[L]),at.useEffect(()=>{if(y!=="system"){G(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;const B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:$})=>{G($?"dark":"light")})}catch{B.addListener(({matches:et})=>{try{G(et?"dark":"light")}catch(rt){console.error(rt)}})}},[y]),at.useEffect(()=>{L.length<=1&&ht(!1)},[L]),at.useEffect(()=>{const B=$=>{var et;if(l.every(ct=>$[ct]||$.code===ct)){var st;ht(!0),(st=K.current)==null||st.focus()}$.code==="Escape"&&(document.activeElement===K.current||(et=K.current)!=null&&et.contains(document.activeElement))&&ht(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[l]),at.useEffect(()=>{if(K.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,C.current=!1)}},[K.current]),at.createElement("section",{ref:e,"aria-label":`${k} ${X}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Q.map((B,$)=>{var et;const[rt,st]=B.split("-");return F.length?at.createElement("ol",{key:B,dir:R==="auto"?Ab():R,tabIndex:-1,ref:K,className:f,"data-sonner-toaster":!0,"data-sonner-theme":O,"data-y-position":rt,"data-x-position":st,style:{"--front-toast-height":`${((et=it[0])==null?void 0:et.height)||0}px`,"--width":`${IS}px`,"--gap":`${M}px`,...v,...VS(g,p)},onBlur:ct=>{C.current&&!ct.currentTarget.contains(ct.relatedTarget)&&(C.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:ct=>{ct.target instanceof HTMLElement&&ct.target.dataset.dismissible==="false"||C.current||(C.current=!0,V.current=ct.relatedTarget)},onMouseEnter:()=>ht(!0),onMouseMove:()=>ht(!0),onMouseLeave:()=>{gt||ht(!1)},onDragEnd:()=>ht(!1),onPointerDown:ct=>{ct.target instanceof HTMLElement&&ct.target.dataset.dismissible==="false"||yt(!0)},onPointerUp:()=>yt(!1)},F.filter(ct=>!ct.position&&$===0||ct.position===B).map((ct,ot)=>{var vt,Rt;return at.createElement(qS,{key:ct.id,icons:N,index:ot,toast:ct,defaultRichColors:A,duration:(vt=x?.duration)!=null?vt:S,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:a,visibleToasts:E,closeButton:(Rt=x?.closeButton)!=null?Rt:d,interacting:gt,position:B,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,closeButtonAriaLabel:x?.closeButtonAriaLabel,removeToast:I,toasts:F.filter(It=>It.position==ct.position),heights:it.filter(It=>It.position==ct.position),setHeights:nt,expandByDefault:h,gap:M,expanded:lt,swipeDirections:t.swipeDirections})})):null}))});function XS({onPDFUpload:u,isLoading:t}){const[e,s]=z.useState("intro"),[a,o]=z.useState(""),[l,h]=z.useState(null),[d,f]=z.useState(""),g=z.useRef(null),p=vS.filter(v=>v.name.includes(a)||v.prefecture.includes(a)),y=z.useCallback(async v=>{const E=v.target.files?.[0];if(!E)return;if(E.type!=="application/pdf"){Vr.error("PDFファイルを選択してください");return}await u(E,l||{name:d||"カスタム自治体",prefecture:""})},[l,d,u]),A=v=>{h(v),s("upload")},S=()=>{if(!d.trim()){Vr.error("自治体名を入力してください");return}h({name:d,prefecture:""}),s("upload")};return T.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-[#faf9f7] to-[#f5f3ef]",children:[T.jsx("div",{className:"flex-shrink-0 px-6 pt-8 pb-4",children:T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-[#2d9d78] to-[#059669] flex items-center justify-center shadow-lg",children:T.jsx(hw,{className:"w-6 h-6 text-white"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-xl font-bold text-gray-800 tracking-tight",children:"ゴミ分別アシスト"}),T.jsx("p",{className:"text-sm text-gray-500",children:"Waste Sorting Assistant"})]})]})}),T.jsxs("div",{className:"flex-1 px-6 pb-8 overflow-y-auto",children:[e==="intro"&&T.jsxs("div",{className:"animate-fade-in",children:[T.jsxs("div",{className:"mt-8 mb-12 text-center",children:[T.jsxs("div",{className:"relative inline-block mb-6",children:[T.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-[#e8f5f0] to-[#d1fae5] flex items-center justify-center animate-float",children:T.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#2d9d78]/20 to-[#059669]/20 flex items-center justify-center",children:T.jsx(cw,{className:"w-12 h-12 text-[#2d9d78]"})})}),T.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center rotate-12 shadow-sm",children:T.jsx("span",{className:"text-2xl",children:"♻️"})})]}),T.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:["迷わない、",T.jsx("span",{className:"gradient-text",children:"ゴミ分別"})]}),T.jsx("p",{className:"text-gray-500 text-base leading-relaxed max-w-xs mx-auto",children:"自治体のルールに基づいて、正確な分別方法をすぐに確認"})]}),T.jsxs("div",{className:"space-y-4 mb-10",children:[T.jsx(El,{icon:T.jsx(Gl,{className:"w-5 h-5"}),title:"PDFルール取り込み",description:"自治体の分別ガイドを読み込んで自動解析",color:"emerald"}),T.jsx(El,{icon:T.jsx(ql,{className:"w-5 h-5"}),title:"かんたん検索",description:"品目名を入力するだけで分別方法がわかる",color:"blue"}),T.jsx(El,{icon:T.jsx(Il,{className:"w-5 h-5"}),title:"カメラスキャン",description:"製品ラベルを撮影して素材を自動判別",color:"amber"}),T.jsx(El,{icon:T.jsx(ow,{className:"w-5 h-5"}),title:"根拠を表示",description:"PDFの該当箇所を提示。迷いなく安心",color:"purple"})]}),T.jsxs(gn,{onClick:()=>s("municipality"),className:"w-full h-14 text-base font-semibold bg-gradient-to-r from-[#2d9d78] to-[#059669] hover:from-[#269d70] hover:to-[#048a5e] border-0 shadow-lg shadow-[#2d9d78]/20 rounded-xl text-white",children:["はじめる",T.jsx(pd,{className:"w-5 h-5 ml-2"})]}),T.jsx("p",{className:"text-center text-gray-400 text-xs mt-4",children:"データはすべてお使いの端末に保存されます"})]}),e==="municipality"&&T.jsxs("div",{className:"animate-slide-up",children:[T.jsx("button",{onClick:()=>s("intro"),className:"text-gray-500 text-sm mb-6 flex items-center gap-1 hover:text-gray-700 transition-colors",children:"← 戻る"}),T.jsxs("div",{className:"mb-8",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"お住まいの自治体"}),T.jsx("p",{className:"text-gray-500 text-sm",children:"分別ルールは自治体ごとに異なります"})]}),T.jsxs("div",{className:"relative mb-6",children:[T.jsx(ql,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx(Xl,{type:"text",placeholder:"自治体名を検索...",value:a,onChange:v=>o(v.target.value),className:"pl-12 h-12 bg-white border-gray-200 rounded-xl text-gray-800 placeholder:text-gray-400 focus:border-[#2d9d78] focus:ring-[#2d9d78]/20"})]}),T.jsx("div",{className:"space-y-2 mb-6 max-h-64 overflow-y-auto",children:p.map(v=>T.jsxs("button",{onClick:()=>A(v),className:"w-full flex items-center justify-between p-4 bg-white hover:bg-[#e8f5f0] border border-gray-100 hover:border-[#2d9d78]/30 rounded-xl transition-all group shadow-sm",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-50 group-hover:bg-[#e8f5f0] flex items-center justify-center",children:T.jsx(ub,{className:"w-5 h-5 text-gray-400 group-hover:text-[#2d9d78] transition-colors"})}),T.jsxs("div",{className:"text-left",children:[T.jsx("div",{className:"font-medium text-gray-800",children:v.name}),T.jsx("div",{className:"text-xs text-gray-400",children:v.prefecture})]})]}),T.jsx(pd,{className:"w-5 h-5 text-gray-300 group-hover:text-[#2d9d78] transition-colors"})]},v.name))}),T.jsxs("div",{className:"border-t border-gray-100 pt-6",children:[T.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"リストにない場合"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx(Xl,{type:"text",placeholder:"自治体名を入力",value:d,onChange:v=>f(v.target.value),className:"flex-1 h-12 bg-white border-gray-200 rounded-xl text-gray-800 placeholder:text-gray-400"}),T.jsx(gn,{onClick:S,className:"h-12 px-6 bg-gray-100 hover:bg-gray-200 text-gray-700 border-0 rounded-xl",children:"次へ"})]})]})]}),e==="upload"&&T.jsxs("div",{className:"animate-slide-up",children:[T.jsx("button",{onClick:()=>s("municipality"),className:"text-gray-500 text-sm mb-6 flex items-center gap-1 hover:text-gray-700 transition-colors",children:"← 戻る"}),T.jsxs("div",{className:"mb-8",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(ub,{className:"w-4 h-4 text-[#2d9d78]"}),T.jsx("span",{className:"text-sm text-[#2d9d78] font-medium",children:l?.name})]}),T.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"分別ガイドPDFを読み込む"}),T.jsx("p",{className:"text-gray-500 text-sm",children:"自治体の公式サイトからダウンロードしたPDFを選択してください"})]}),T.jsxs("div",{onClick:()=>!t&&g.current?.click(),className:`
                relative border-2 border-dashed rounded-2xl p-8 text-center cursor-pointer transition-all
                ${t?"border-[#2d9d78] bg-[#e8f5f0]":"border-gray-200 hover:border-[#2d9d78] hover:bg-[#faf9f7] bg-white"}
              `,children:[t?T.jsxs("div",{className:"flex flex-col items-center gap-4",children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-[#e8f5f0] flex items-center justify-center",children:T.jsx(gd,{className:"w-8 h-8 text-[#2d9d78] animate-spin"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-gray-800 font-medium mb-1",children:"読み込み中..."}),T.jsx("p",{className:"text-sm text-gray-500",children:"テキストを抽出しています"})]})]}):T.jsxs("div",{className:"flex flex-col items-center gap-4",children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-50 flex items-center justify-center",children:T.jsx(pw,{className:"w-8 h-8 text-gray-400"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-gray-800 font-medium mb-1",children:"タップしてPDFを選択"}),T.jsx("p",{className:"text-sm text-gray-500",children:"または共有シートから直接取り込み"})]})]}),T.jsx("input",{ref:g,type:"file",accept:"application/pdf",onChange:y,className:"hidden",disabled:t})]}),T.jsxs("div",{className:"mt-8 p-5 bg-white rounded-xl border border-gray-100 shadow-sm",children:[T.jsxs("h3",{className:"text-gray-800 font-medium mb-3 flex items-center gap-2",children:[T.jsx(Gl,{className:"w-4 h-4 text-[#2d9d78]"}),"PDFの入手方法"]}),T.jsxs("ol",{className:"space-y-2 text-sm text-gray-500",children:[T.jsxs("li",{className:"flex gap-2",children:[T.jsx("span",{className:"text-[#2d9d78] font-medium",children:"1."}),T.jsxs("span",{children:["「",l?.name," ゴミ分別」で検索"]})]}),T.jsxs("li",{className:"flex gap-2",children:[T.jsx("span",{className:"text-[#2d9d78] font-medium",children:"2."}),T.jsx("span",{children:"公式サイトの分別ガイドPDFをダウンロード"})]}),T.jsxs("li",{className:"flex gap-2",children:[T.jsx("span",{className:"text-[#2d9d78] font-medium",children:"3."}),T.jsx("span",{children:"このアプリに取り込み"})]})]})]})]})]})]})}function El({icon:u,title:t,description:e,color:s}){const a={emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",blue:"bg-blue-50 text-blue-600 border-blue-100",amber:"bg-amber-50 text-amber-600 border-amber-100",purple:"bg-purple-50 text-purple-600 border-purple-100"};return T.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-white border border-gray-100 shadow-sm",children:[T.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${a[s]}`,children:u}),T.jsxs("div",{children:[T.jsx("h3",{className:"font-medium text-gray-800 mb-0.5",children:t}),T.jsx("p",{className:"text-sm text-gray-500",children:e})]})]})}function ts(u,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(u?.(a),e===!1||!a.defaultPrevented)return t?.(a)}}function $S(u,t){const e=z.createContext(t),s=o=>{const{children:l,...h}=o,d=z.useMemo(()=>h,Object.values(h));return T.jsx(e.Provider,{value:d,children:l})};s.displayName=u+"Provider";function a(o){const l=z.useContext(e);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${u}\``)}return[s,a]}function KS(u,t=[]){let e=[];function s(o,l){const h=z.createContext(l),d=e.length;e=[...e,l];const f=p=>{const{scope:y,children:A,...S}=p,v=y?.[u]?.[d]||h,E=z.useMemo(()=>S,Object.values(S));return T.jsx(v.Provider,{value:E,children:A})};f.displayName=o+"Provider";function g(p,y){const A=y?.[u]?.[d]||h,S=z.useContext(A);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${p}\` must be used within \`${o}\``)}return[f,g]}const a=()=>{const o=e.map(l=>z.createContext(l));return function(h){const d=h?.[u]||o;return z.useMemo(()=>({[`__scope${u}`]:{...h,[u]:d}}),[h,d])}};return a.scopeName=u,[s,WS(a,...t)]}function WS(...u){const t=u[0];if(u.length===1)return t;const e=()=>{const s=u.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((h,{useScope:d,scopeName:f})=>{const p=d(o)[`__scope${f}`];return{...h,...p}},{});return z.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}var Xr=globalThis?.document?z.useLayoutEffect:()=>{},QS=zd[" useId ".trim().toString()]||(()=>{}),ZS=0;function kh(u){const[t,e]=z.useState(QS());return Xr(()=>{e(s=>s??String(ZS++))},[u]),u||(t?`radix-${t}`:"")}var JS=zd[" useInsertionEffect ".trim().toString()]||Xr;function tx({prop:u,defaultProp:t,onChange:e=()=>{},caller:s}){const[a,o,l]=ex({defaultProp:t,onChange:e}),h=u!==void 0,d=h?u:a;{const g=z.useRef(u!==void 0);z.useEffect(()=>{const p=g.current;p!==h&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${h?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=h},[h,s])}const f=z.useCallback(g=>{if(h){const p=nx(g)?g(u):g;p!==u&&l.current?.(p)}else o(g)},[h,u,o,l]);return[d,f]}function ex({defaultProp:u,onChange:t}){const[e,s]=z.useState(u),a=z.useRef(e),o=z.useRef(t);return JS(()=>{o.current=t},[t]),z.useEffect(()=>{a.current!==e&&(o.current?.(e),a.current=e)},[e,a]),[e,s,o]}function nx(u){return typeof u=="function"}function Qy(u){const t=ix(u),e=z.forwardRef((s,a)=>{const{children:o,...l}=s,h=z.Children.toArray(o),d=h.find(ax);if(d){const f=d.props.children,g=h.map(p=>p===d?z.Children.count(f)>1?z.Children.only(null):z.isValidElement(f)?f.props.children:null:p);return T.jsx(t,{...l,ref:a,children:z.isValidElement(f)?z.cloneElement(f,void 0,g):null})}return T.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${u}.Slot`,e}function ix(u){const t=z.forwardRef((e,s)=>{const{children:a,...o}=e;if(z.isValidElement(a)){const l=ox(a),h=rx(o,a.props);return a.type!==z.Fragment&&(h.ref=s?Id(s,l):l),z.cloneElement(a,h)}return z.Children.count(a)>1?z.Children.only(null):null});return t.displayName=`${u}.SlotClone`,t}var sx=Symbol("radix.slottable");function ax(u){return z.isValidElement(u)&&typeof u.type=="function"&&"__radixId"in u.type&&u.type.__radixId===sx}function rx(u,t){const e={...t};for(const s in t){const a=u[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?e[s]=(...h)=>{const d=o(...h);return a(...h),d}:a&&(e[s]=a):s==="style"?e[s]={...a,...o}:s==="className"&&(e[s]=[a,o].filter(Boolean).join(" "))}return{...u,...e}}function ox(u){let t=Object.getOwnPropertyDescriptor(u.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?u.ref:(t=Object.getOwnPropertyDescriptor(u,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?u.props.ref:u.props.ref||u.ref)}var lx=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xi=lx.reduce((u,t)=>{const e=Qy(`Primitive.${t}`),s=z.forwardRef((a,o)=>{const{asChild:l,...h}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),T.jsx(d,{...h,ref:o})});return s.displayName=`Primitive.${t}`,{...u,[t]:s}},{});function cx(u,t){u&&Ky.flushSync(()=>u.dispatchEvent(t))}function $r(u){const t=z.useRef(u);return z.useEffect(()=>{t.current=u}),z.useMemo(()=>(...e)=>t.current?.(...e),[])}function ux(u,t=globalThis?.document){const e=$r(u);z.useEffect(()=>{const s=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[e,t])}var hx="DismissableLayer",vd="dismissableLayer.update",dx="dismissableLayer.pointerDownOutside",fx="dismissableLayer.focusOutside",wb,Zy=z.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jy=z.forwardRef((u,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:h,...d}=u,f=z.useContext(Zy),[g,p]=z.useState(null),y=g?.ownerDocument??globalThis?.document,[,A]=z.useState({}),S=Ds(t,P=>p(P)),v=Array.from(f.layers),[E]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(E),R=g?v.indexOf(g):-1,M=f.layersWithOutsidePointerEventsDisabled.size>0,N=R>=x,k=gx(P=>{const F=P.target,Q=[...f.branches].some(it=>it.contains(F));!N||Q||(a?.(P),l?.(P),P.defaultPrevented||h?.())},y),L=bx(P=>{const F=P.target;[...f.branches].some(it=>it.contains(F))||(o?.(P),l?.(P),P.defaultPrevented||h?.())},y);return ux(P=>{R===f.layers.size-1&&(s?.(P),!P.defaultPrevented&&h&&(P.preventDefault(),h()))},y),z.useEffect(()=>{if(g)return e&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(wb=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(g)),f.layers.add(g),Sb(),()=>{e&&f.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=wb)}},[g,y,e,f]),z.useEffect(()=>()=>{g&&(f.layers.delete(g),f.layersWithOutsidePointerEventsDisabled.delete(g),Sb())},[g,f]),z.useEffect(()=>{const P=()=>A({});return document.addEventListener(vd,P),()=>document.removeEventListener(vd,P)},[]),T.jsx(xi.div,{...d,ref:S,style:{pointerEvents:M?N?"auto":"none":void 0,...u.style},onFocusCapture:ts(u.onFocusCapture,L.onFocusCapture),onBlurCapture:ts(u.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ts(u.onPointerDownCapture,k.onPointerDownCapture)})});Jy.displayName=hx;var mx="DismissableLayerBranch",px=z.forwardRef((u,t)=>{const e=z.useContext(Zy),s=z.useRef(null),a=Ds(t,s);return z.useEffect(()=>{const o=s.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),T.jsx(xi.div,{...u,ref:a})});px.displayName=mx;function gx(u,t=globalThis?.document){const e=$r(u),s=z.useRef(!1),a=z.useRef(()=>{});return z.useEffect(()=>{const o=h=>{if(h.target&&!s.current){let d=function(){t0(dx,e,f,{discrete:!0})};const f={originalEvent:h};h.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);s.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>s.current=!0}}function bx(u,t=globalThis?.document){const e=$r(u),s=z.useRef(!1);return z.useEffect(()=>{const a=o=>{o.target&&!s.current&&t0(fx,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Sb(){const u=new CustomEvent(vd);document.dispatchEvent(u)}function t0(u,t,e,{discrete:s}){const a=e.originalEvent.target,o=new CustomEvent(u,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(u,t,{once:!0}),s?cx(a,o):a.dispatchEvent(o)}var Oh="focusScope.autoFocusOnMount",Lh="focusScope.autoFocusOnUnmount",xb={bubbles:!1,cancelable:!0},yx="FocusScope",e0=z.forwardRef((u,t)=>{const{loop:e=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=u,[h,d]=z.useState(null),f=$r(a),g=$r(o),p=z.useRef(null),y=Ds(t,v=>d(v)),A=z.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;z.useEffect(()=>{if(s){let v=function(M){if(A.paused||!h)return;const N=M.target;h.contains(N)?p.current=N:Zi(p.current,{select:!0})},E=function(M){if(A.paused||!h)return;const N=M.relatedTarget;N!==null&&(h.contains(N)||Zi(p.current,{select:!0}))},x=function(M){if(document.activeElement===document.body)for(const k of M)k.removedNodes.length>0&&Zi(h)};document.addEventListener("focusin",v),document.addEventListener("focusout",E);const R=new MutationObserver(x);return h&&R.observe(h,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",E),R.disconnect()}}},[s,h,A.paused]),z.useEffect(()=>{if(h){_b.add(A);const v=document.activeElement;if(!h.contains(v)){const x=new CustomEvent(Oh,xb);h.addEventListener(Oh,f),h.dispatchEvent(x),x.defaultPrevented||(vx(Ex(n0(h)),{select:!0}),document.activeElement===v&&Zi(h))}return()=>{h.removeEventListener(Oh,f),setTimeout(()=>{const x=new CustomEvent(Lh,xb);h.addEventListener(Lh,g),h.dispatchEvent(x),x.defaultPrevented||Zi(v??document.body,{select:!0}),h.removeEventListener(Lh,g),_b.remove(A)},0)}}},[h,f,g,A]);const S=z.useCallback(v=>{if(!e&&!s||A.paused)return;const E=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(E&&x){const R=v.currentTarget,[M,N]=Ax(R);M&&N?!v.shiftKey&&x===N?(v.preventDefault(),e&&Zi(M,{select:!0})):v.shiftKey&&x===M&&(v.preventDefault(),e&&Zi(N,{select:!0})):x===R&&v.preventDefault()}},[e,s,A.paused]);return T.jsx(xi.div,{tabIndex:-1,...l,ref:y,onKeyDown:S})});e0.displayName=yx;function vx(u,{select:t=!1}={}){const e=document.activeElement;for(const s of u)if(Zi(s,{select:t}),document.activeElement!==e)return}function Ax(u){const t=n0(u),e=Eb(t,u),s=Eb(t.reverse(),u);return[e,s]}function n0(u){const t=[],e=document.createTreeWalker(u,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function Eb(u,t){for(const e of u)if(!wx(e,{upTo:t}))return e}function wx(u,{upTo:t}){if(getComputedStyle(u).visibility==="hidden")return!0;for(;u;){if(t!==void 0&&u===t)return!1;if(getComputedStyle(u).display==="none")return!0;u=u.parentElement}return!1}function Sx(u){return u instanceof HTMLInputElement&&"select"in u}function Zi(u,{select:t=!1}={}){if(u&&u.focus){const e=document.activeElement;u.focus({preventScroll:!0}),u!==e&&Sx(u)&&t&&u.select()}}var _b=xx();function xx(){let u=[];return{add(t){const e=u[0];t!==e&&e?.pause(),u=Cb(u,t),u.unshift(t)},remove(t){u=Cb(u,t),u[0]?.resume()}}}function Cb(u,t){const e=[...u],s=e.indexOf(t);return s!==-1&&e.splice(s,1),e}function Ex(u){return u.filter(t=>t.tagName!=="A")}var _x="Portal",i0=z.forwardRef((u,t)=>{const{container:e,...s}=u,[a,o]=z.useState(!1);Xr(()=>o(!0),[]);const l=e||a&&globalThis?.document?.body;return l?Wy.createPortal(T.jsx(xi.div,{...s,ref:t}),l):null});i0.displayName=_x;function Cx(u,t){return z.useReducer((e,s)=>t[e][s]??e,u)}var Zl=u=>{const{present:t,children:e}=u,s=Tx(t),a=typeof e=="function"?e({present:s.isPresent}):z.Children.only(e),o=Ds(s.ref,Mx(a));return typeof e=="function"||s.isPresent?z.cloneElement(a,{ref:o}):null};Zl.displayName="Presence";function Tx(u){const[t,e]=z.useState(),s=z.useRef(null),a=z.useRef(u),o=z.useRef("none"),l=u?"mounted":"unmounted",[h,d]=Cx(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return z.useEffect(()=>{const f=_l(s.current);o.current=h==="mounted"?f:"none"},[h]),Xr(()=>{const f=s.current,g=a.current;if(g!==u){const y=o.current,A=_l(f);u?d("MOUNT"):A==="none"||f?.display==="none"?d("UNMOUNT"):d(g&&y!==A?"ANIMATION_OUT":"UNMOUNT"),a.current=u}},[u,d]),Xr(()=>{if(t){let f;const g=t.ownerDocument.defaultView??window,p=A=>{const v=_l(s.current).includes(CSS.escape(A.animationName));if(A.target===t&&v&&(d("ANIMATION_END"),!a.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=g.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},y=A=>{A.target===t&&(o.current=_l(s.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{g.clearTimeout(f),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(h),ref:z.useCallback(f=>{s.current=f?getComputedStyle(f):null,e(f)},[])}}function _l(u){return u?.animationName||"none"}function Mx(u){let t=Object.getOwnPropertyDescriptor(u.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?u.ref:(t=Object.getOwnPropertyDescriptor(u,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?u.props.ref:u.props.ref||u.ref)}var Bh=0;function Rx(){z.useEffect(()=>{const u=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",u[0]??Tb()),document.body.insertAdjacentElement("beforeend",u[1]??Tb()),Bh++,()=>{Bh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Bh--}},[])}function Tb(){const u=document.createElement("span");return u.setAttribute("data-radix-focus-guard",""),u.tabIndex=0,u.style.outline="none",u.style.opacity="0",u.style.position="fixed",u.style.pointerEvents="none",u}var Zn=function(){return Zn=Object.assign||function(t){for(var e,s=1,a=arguments.length;s<a;s++){e=arguments[s];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Zn.apply(this,arguments)};function s0(u,t){var e={};for(var s in u)Object.prototype.hasOwnProperty.call(u,s)&&t.indexOf(s)<0&&(e[s]=u[s]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(u);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(u,s[a])&&(e[s[a]]=u[s[a]]);return e}function Dx(u,t,e){if(e||arguments.length===2)for(var s=0,a=t.length,o;s<a;s++)(o||!(s in t))&&(o||(o=Array.prototype.slice.call(t,0,s)),o[s]=t[s]);return u.concat(o||Array.prototype.slice.call(t))}var Fl="right-scroll-bar-position",Ul="width-before-scroll-bar",Nx="with-scroll-bars-hidden",kx="--removed-body-scroll-bar-size";function Ph(u,t){return typeof u=="function"?u(t):u&&(u.current=t),u}function Ox(u,t){var e=z.useState(function(){return{value:u,callback:t,facade:{get current(){return e.value},set current(s){var a=e.value;a!==s&&(e.value=s,e.callback(s,a))}}}})[0];return e.callback=t,e.facade}var Lx=typeof window<"u"?z.useLayoutEffect:z.useEffect,Mb=new WeakMap;function Bx(u,t){var e=Ox(null,function(s){return u.forEach(function(a){return Ph(a,s)})});return Lx(function(){var s=Mb.get(e);if(s){var a=new Set(s),o=new Set(u),l=e.current;a.forEach(function(h){o.has(h)||Ph(h,null)}),o.forEach(function(h){a.has(h)||Ph(h,l)})}Mb.set(e,u)},[u]),e}function Px(u){return u}function zx(u,t){t===void 0&&(t=Px);var e=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:u},useMedium:function(o){var l=t(o,s);return e.push(l),function(){e=e.filter(function(h){return h!==l})}},assignSyncMedium:function(o){for(s=!0;e.length;){var l=e;e=[],l.forEach(o)}e={push:function(h){return o(h)},filter:function(){return e}}},assignMedium:function(o){s=!0;var l=[];if(e.length){var h=e;e=[],h.forEach(o),l=e}var d=function(){var g=l;l=[],g.forEach(o)},f=function(){return Promise.resolve().then(d)};f(),e={push:function(g){l.push(g),f()},filter:function(g){return l=l.filter(g),e}}}};return a}function jx(u){u===void 0&&(u={});var t=zx(null);return t.options=Zn({async:!0,ssr:!1},u),t}var a0=function(u){var t=u.sideCar,e=s0(u,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return z.createElement(s,Zn({},e))};a0.isSideCarExport=!0;function Ix(u,t){return u.useMedium(t),a0}var r0=jx(),zh=function(){},Jl=z.forwardRef(function(u,t){var e=z.useRef(null),s=z.useState({onScrollCapture:zh,onWheelCapture:zh,onTouchMoveCapture:zh}),a=s[0],o=s[1],l=u.forwardProps,h=u.children,d=u.className,f=u.removeScrollBar,g=u.enabled,p=u.shards,y=u.sideCar,A=u.noRelative,S=u.noIsolation,v=u.inert,E=u.allowPinchZoom,x=u.as,R=x===void 0?"div":x,M=u.gapMode,N=s0(u,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=y,L=Bx([e,t]),P=Zn(Zn({},N),a);return z.createElement(z.Fragment,null,g&&z.createElement(k,{sideCar:r0,removeScrollBar:f,shards:p,noRelative:A,noIsolation:S,inert:v,setCallbacks:o,allowPinchZoom:!!E,lockRef:e,gapMode:M}),l?z.cloneElement(z.Children.only(h),Zn(Zn({},P),{ref:L})):z.createElement(R,Zn({},P,{className:d,ref:L}),h))});Jl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jl.classNames={fullWidth:Ul,zeroRight:Fl};var Fx=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Ux(){if(!document)return null;var u=document.createElement("style");u.type="text/css";var t=Fx();return t&&u.setAttribute("nonce",t),u}function Hx(u,t){u.styleSheet?u.styleSheet.cssText=t:u.appendChild(document.createTextNode(t))}function Gx(u){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(u)}var qx=function(){var u=0,t=null;return{add:function(e){u==0&&(t=Ux())&&(Hx(t,e),Gx(t)),u++},remove:function(){u--,!u&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vx=function(){var u=qx();return function(t,e){z.useEffect(function(){return u.add(t),function(){u.remove()}},[t&&e])}},o0=function(){var u=Vx(),t=function(e){var s=e.styles,a=e.dynamic;return u(s,a),null};return t},Yx={left:0,top:0,right:0,gap:0},jh=function(u){return parseInt(u||"",10)||0},Xx=function(u){var t=window.getComputedStyle(document.body),e=t[u==="padding"?"paddingLeft":"marginLeft"],s=t[u==="padding"?"paddingTop":"marginTop"],a=t[u==="padding"?"paddingRight":"marginRight"];return[jh(e),jh(s),jh(a)]},$x=function(u){if(u===void 0&&(u="margin"),typeof window>"u")return Yx;var t=Xx(u),e=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-e+t[2]-t[0])}},Kx=o0(),ka="data-scroll-locked",Wx=function(u,t,e,s){var a=u.left,o=u.top,l=u.right,h=u.gap;return e===void 0&&(e="margin"),`
  .`.concat(Nx,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(h,"px ").concat(s,`;
  }
  body[`).concat(ka,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(s,`;
    `),e==="padding"&&"padding-right: ".concat(h,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fl,` {
    right: `).concat(h,"px ").concat(s,`;
  }
  
  .`).concat(Ul,` {
    margin-right: `).concat(h,"px ").concat(s,`;
  }
  
  .`).concat(Fl," .").concat(Fl,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ul," .").concat(Ul,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(ka,`] {
    `).concat(kx,": ").concat(h,`px;
  }
`)},Rb=function(){var u=parseInt(document.body.getAttribute(ka)||"0",10);return isFinite(u)?u:0},Qx=function(){z.useEffect(function(){return document.body.setAttribute(ka,(Rb()+1).toString()),function(){var u=Rb()-1;u<=0?document.body.removeAttribute(ka):document.body.setAttribute(ka,u.toString())}},[])},Zx=function(u){var t=u.noRelative,e=u.noImportant,s=u.gapMode,a=s===void 0?"margin":s;Qx();var o=z.useMemo(function(){return $x(a)},[a]);return z.createElement(Kx,{styles:Wx(o,!t,a,e?"":"!important")})},Ad=!1;if(typeof window<"u")try{var Cl=Object.defineProperty({},"passive",{get:function(){return Ad=!0,!0}});window.addEventListener("test",Cl,Cl),window.removeEventListener("test",Cl,Cl)}catch{Ad=!1}var Sa=Ad?{passive:!1}:!1,Jx=function(u){return u.tagName==="TEXTAREA"},l0=function(u,t){if(!(u instanceof Element))return!1;var e=window.getComputedStyle(u);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!Jx(u)&&e[t]==="visible")},tE=function(u){return l0(u,"overflowY")},eE=function(u){return l0(u,"overflowX")},Db=function(u,t){var e=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=c0(u,s);if(a){var o=u0(u,s),l=o[1],h=o[2];if(l>h)return!0}s=s.parentNode}while(s&&s!==e.body);return!1},nE=function(u){var t=u.scrollTop,e=u.scrollHeight,s=u.clientHeight;return[t,e,s]},iE=function(u){var t=u.scrollLeft,e=u.scrollWidth,s=u.clientWidth;return[t,e,s]},c0=function(u,t){return u==="v"?tE(t):eE(t)},u0=function(u,t){return u==="v"?nE(t):iE(t)},sE=function(u,t){return u==="h"&&t==="rtl"?-1:1},aE=function(u,t,e,s,a){var o=sE(u,window.getComputedStyle(t).direction),l=o*s,h=e.target,d=t.contains(h),f=!1,g=l>0,p=0,y=0;do{if(!h)break;var A=u0(u,h),S=A[0],v=A[1],E=A[2],x=v-E-o*S;(S||x)&&c0(u,h)&&(p+=x,y+=S);var R=h.parentNode;h=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!d&&h!==document.body||d&&(t.contains(h)||t===h));return(g&&Math.abs(p)<1||!g&&Math.abs(y)<1)&&(f=!0),f},Tl=function(u){return"changedTouches"in u?[u.changedTouches[0].clientX,u.changedTouches[0].clientY]:[0,0]},Nb=function(u){return[u.deltaX,u.deltaY]},kb=function(u){return u&&"current"in u?u.current:u},rE=function(u,t){return u[0]===t[0]&&u[1]===t[1]},oE=function(u){return`
  .block-interactivity-`.concat(u,` {pointer-events: none;}
  .allow-interactivity-`).concat(u,` {pointer-events: all;}
`)},lE=0,xa=[];function cE(u){var t=z.useRef([]),e=z.useRef([0,0]),s=z.useRef(),a=z.useState(lE++)[0],o=z.useState(o0)[0],l=z.useRef(u);z.useEffect(function(){l.current=u},[u]),z.useEffect(function(){if(u.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Dx([u.lockRef.current],(u.shards||[]).map(kb),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(a))})}}},[u.inert,u.lockRef.current,u.shards]);var h=z.useCallback(function(v,E){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!l.current.allowPinchZoom;var x=Tl(v),R=e.current,M="deltaX"in v?v.deltaX:R[0]-x[0],N="deltaY"in v?v.deltaY:R[1]-x[1],k,L=v.target,P=Math.abs(M)>Math.abs(N)?"h":"v";if("touches"in v&&P==="h"&&L.type==="range")return!1;var F=window.getSelection(),Q=F&&F.anchorNode,it=Q?Q===L||Q.contains(L):!1;if(it)return!1;var nt=Db(P,L);if(!nt)return!0;if(nt?k=P:(k=P==="v"?"h":"v",nt=Db(P,L)),!nt)return!1;if(!s.current&&"changedTouches"in v&&(M||N)&&(s.current=k),!k)return!0;var lt=s.current||k;return aE(lt,E,v,lt==="h"?M:N)},[]),d=z.useCallback(function(v){var E=v;if(!(!xa.length||xa[xa.length-1]!==o)){var x="deltaY"in E?Nb(E):Tl(E),R=t.current.filter(function(k){return k.name===E.type&&(k.target===E.target||E.target===k.shadowParent)&&rE(k.delta,x)})[0];if(R&&R.should){E.cancelable&&E.preventDefault();return}if(!R){var M=(l.current.shards||[]).map(kb).filter(Boolean).filter(function(k){return k.contains(E.target)}),N=M.length>0?h(E,M[0]):!l.current.noIsolation;N&&E.cancelable&&E.preventDefault()}}},[]),f=z.useCallback(function(v,E,x,R){var M={name:v,delta:E,target:x,should:R,shadowParent:uE(x)};t.current.push(M),setTimeout(function(){t.current=t.current.filter(function(N){return N!==M})},1)},[]),g=z.useCallback(function(v){e.current=Tl(v),s.current=void 0},[]),p=z.useCallback(function(v){f(v.type,Nb(v),v.target,h(v,u.lockRef.current))},[]),y=z.useCallback(function(v){f(v.type,Tl(v),v.target,h(v,u.lockRef.current))},[]);z.useEffect(function(){return xa.push(o),u.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",d,Sa),document.addEventListener("touchmove",d,Sa),document.addEventListener("touchstart",g,Sa),function(){xa=xa.filter(function(v){return v!==o}),document.removeEventListener("wheel",d,Sa),document.removeEventListener("touchmove",d,Sa),document.removeEventListener("touchstart",g,Sa)}},[]);var A=u.removeScrollBar,S=u.inert;return z.createElement(z.Fragment,null,S?z.createElement(o,{styles:oE(a)}):null,A?z.createElement(Zx,{noRelative:u.noRelative,gapMode:u.gapMode}):null)}function uE(u){for(var t=null;u!==null;)u instanceof ShadowRoot&&(t=u.host,u=u.host),u=u.parentNode;return t}const hE=Ix(r0,cE);var h0=z.forwardRef(function(u,t){return z.createElement(Jl,Zn({},u,{ref:t,sideCar:hE}))});h0.classNames=Jl.classNames;var dE=function(u){if(typeof document>"u")return null;var t=Array.isArray(u)?u[0]:u;return t.ownerDocument.body},Ea=new WeakMap,Ml=new WeakMap,Rl={},Ih=0,d0=function(u){return u&&(u.host||d0(u.parentNode))},fE=function(u,t){return t.map(function(e){if(u.contains(e))return e;var s=d0(e);return s&&u.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",u,". Doing nothing"),null)}).filter(function(e){return!!e})},mE=function(u,t,e,s){var a=fE(t,Array.isArray(u)?u:[u]);Rl[e]||(Rl[e]=new WeakMap);var o=Rl[e],l=[],h=new Set,d=new Set(a),f=function(p){!p||h.has(p)||(h.add(p),f(p.parentNode))};a.forEach(f);var g=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(y){if(h.has(y))g(y);else try{var A=y.getAttribute(s),S=A!==null&&A!=="false",v=(Ea.get(y)||0)+1,E=(o.get(y)||0)+1;Ea.set(y,v),o.set(y,E),l.push(y),v===1&&S&&Ml.set(y,!0),E===1&&y.setAttribute(e,"true"),S||y.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",y,x)}})};return g(t),h.clear(),Ih++,function(){l.forEach(function(p){var y=Ea.get(p)-1,A=o.get(p)-1;Ea.set(p,y),o.set(p,A),y||(Ml.has(p)||p.removeAttribute(s),Ml.delete(p)),A||p.removeAttribute(e)}),Ih--,Ih||(Ea=new WeakMap,Ea=new WeakMap,Ml=new WeakMap,Rl={})}},pE=function(u,t,e){e===void 0&&(e="data-aria-hidden");var s=Array.from(Array.isArray(u)?u:[u]),a=dE(u);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),mE(s,a,e,"aria-hidden")):function(){return null}},tc="Dialog",[f0]=KS(tc),[gE,In]=f0(tc),m0=u=>{const{__scopeDialog:t,children:e,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=u,h=z.useRef(null),d=z.useRef(null),[f,g]=tx({prop:s,defaultProp:a??!1,onChange:o,caller:tc});return T.jsx(gE,{scope:t,triggerRef:h,contentRef:d,contentId:kh(),titleId:kh(),descriptionId:kh(),open:f,onOpenChange:g,onOpenToggle:z.useCallback(()=>g(p=>!p),[g]),modal:l,children:e})};m0.displayName=tc;var p0="DialogTrigger",g0=z.forwardRef((u,t)=>{const{__scopeDialog:e,...s}=u,a=In(p0,e),o=Ds(t,a.triggerRef);return T.jsx(xi.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Gd(a.open),...s,ref:o,onClick:ts(u.onClick,a.onOpenToggle)})});g0.displayName=p0;var Ud="DialogPortal",[bE,b0]=f0(Ud,{forceMount:void 0}),y0=u=>{const{__scopeDialog:t,forceMount:e,children:s,container:a}=u,o=In(Ud,t);return T.jsx(bE,{scope:t,forceMount:e,children:z.Children.map(s,l=>T.jsx(Zl,{present:e||o.open,children:T.jsx(i0,{asChild:!0,container:a,children:l})}))})};y0.displayName=Ud;var $l="DialogOverlay",v0=z.forwardRef((u,t)=>{const e=b0($l,u.__scopeDialog),{forceMount:s=e.forceMount,...a}=u,o=In($l,u.__scopeDialog);return o.modal?T.jsx(Zl,{present:s||o.open,children:T.jsx(vE,{...a,ref:t})}):null});v0.displayName=$l;var yE=Qy("DialogOverlay.RemoveScroll"),vE=z.forwardRef((u,t)=>{const{__scopeDialog:e,...s}=u,a=In($l,e);return T.jsx(h0,{as:yE,allowPinchZoom:!0,shards:[a.contentRef],children:T.jsx(xi.div,{"data-state":Gd(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Ts="DialogContent",A0=z.forwardRef((u,t)=>{const e=b0(Ts,u.__scopeDialog),{forceMount:s=e.forceMount,...a}=u,o=In(Ts,u.__scopeDialog);return T.jsx(Zl,{present:s||o.open,children:o.modal?T.jsx(AE,{...a,ref:t}):T.jsx(wE,{...a,ref:t})})});A0.displayName=Ts;var AE=z.forwardRef((u,t)=>{const e=In(Ts,u.__scopeDialog),s=z.useRef(null),a=Ds(t,e.contentRef,s);return z.useEffect(()=>{const o=s.current;if(o)return pE(o)},[]),T.jsx(w0,{...u,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ts(u.onCloseAutoFocus,o=>{o.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:ts(u.onPointerDownOutside,o=>{const l=o.detail.originalEvent,h=l.button===0&&l.ctrlKey===!0;(l.button===2||h)&&o.preventDefault()}),onFocusOutside:ts(u.onFocusOutside,o=>o.preventDefault())})}),wE=z.forwardRef((u,t)=>{const e=In(Ts,u.__scopeDialog),s=z.useRef(!1),a=z.useRef(!1);return T.jsx(w0,{...u,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{u.onCloseAutoFocus?.(o),o.defaultPrevented||(s.current||e.triggerRef.current?.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{u.onInteractOutside?.(o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;e.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),w0=z.forwardRef((u,t)=>{const{__scopeDialog:e,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=u,h=In(Ts,e),d=z.useRef(null),f=Ds(t,d);return Rx(),T.jsxs(T.Fragment,{children:[T.jsx(e0,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:T.jsx(Jy,{role:"dialog",id:h.contentId,"aria-describedby":h.descriptionId,"aria-labelledby":h.titleId,"data-state":Gd(h.open),...l,ref:f,onDismiss:()=>h.onOpenChange(!1)})}),T.jsxs(T.Fragment,{children:[T.jsx(SE,{titleId:h.titleId}),T.jsx(EE,{contentRef:d,descriptionId:h.descriptionId})]})]})}),Hd="DialogTitle",S0=z.forwardRef((u,t)=>{const{__scopeDialog:e,...s}=u,a=In(Hd,e);return T.jsx(xi.h2,{id:a.titleId,...s,ref:t})});S0.displayName=Hd;var x0="DialogDescription",E0=z.forwardRef((u,t)=>{const{__scopeDialog:e,...s}=u,a=In(x0,e);return T.jsx(xi.p,{id:a.descriptionId,...s,ref:t})});E0.displayName=x0;var _0="DialogClose",C0=z.forwardRef((u,t)=>{const{__scopeDialog:e,...s}=u,a=In(_0,e);return T.jsx(xi.button,{type:"button",...s,ref:t,onClick:ts(u.onClick,()=>a.onOpenChange(!1))})});C0.displayName=_0;function Gd(u){return u?"open":"closed"}var T0="DialogTitleWarning",[gT,M0]=$S(T0,{contentName:Ts,titleName:Hd,docsSlug:"dialog"}),SE=({titleId:u})=>{const t=M0(T0),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return z.useEffect(()=>{u&&(document.getElementById(u)||console.error(e))},[e,u]),null},xE="DialogDescriptionWarning",EE=({contentRef:u,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${M0(xE).contentName}}.`;return z.useEffect(()=>{const a=u.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,u,t]),null},R0=m0,_E=g0,D0=y0,ec=v0,nc=A0,ic=S0,sc=E0,N0=C0;const CE=R0,TE=_E,ME=D0,k0=z.forwardRef(({className:u,...t},e)=>T.jsx(ec,{className:On("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",u),...t,ref:e}));k0.displayName=ec.displayName;const RE=Py("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),O0=z.forwardRef(({side:u="right",className:t,children:e,...s},a)=>T.jsxs(ME,{children:[T.jsx(k0,{}),T.jsxs(nc,{ref:a,className:On(RE({side:u}),t),...s,children:[T.jsxs(N0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[T.jsx(jd,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]}),e]})]}));O0.displayName=nc.displayName;const L0=({className:u,...t})=>T.jsx("div",{className:On("flex flex-col space-y-2 text-center sm:text-left",u),...t});L0.displayName="SheetHeader";const B0=z.forwardRef(({className:u,...t},e)=>T.jsx(ic,{ref:e,className:On("text-lg font-semibold text-foreground",u),...t}));B0.displayName=ic.displayName;const DE=z.forwardRef(({className:u,...t},e)=>T.jsx(sc,{ref:e,className:On("text-sm text-muted-foreground",u),...t}));DE.displayName=sc.displayName;const NE=R0,kE=D0,P0=z.forwardRef(({className:u,...t},e)=>T.jsx(ec,{ref:e,className:On("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",u),...t}));P0.displayName=ec.displayName;const z0=z.forwardRef(({className:u,children:t,...e},s)=>T.jsxs(kE,{children:[T.jsx(P0,{}),T.jsxs(nc,{ref:s,className:On("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",u),...e,children:[t,T.jsxs(N0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[T.jsx(jd,{className:"h-4 w-4"}),T.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));z0.displayName=nc.displayName;const j0=({className:u,...t})=>T.jsx("div",{className:On("flex flex-col space-y-1.5 text-center sm:text-left",u),...t});j0.displayName="DialogHeader";const I0=z.forwardRef(({className:u,...t},e)=>T.jsx(ic,{ref:e,className:On("text-lg font-semibold leading-none tracking-tight",u),...t}));I0.displayName=ic.displayName;const OE=z.forwardRef(({className:u,...t},e)=>T.jsx(sc,{ref:e,className:On("text-sm text-muted-foreground",u),...t}));OE.displayName=sc.displayName;const Ye=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),wd=[.001,0,0,.001,0,0],Fh=1.35,bn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ji={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Kr="pdfjs_internal_editor_",Tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},zt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},LE={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Sd={TRIANGLES:1,LATTICE:2},ke={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Hl={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ve={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ca={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ac={ERRORS:0,WARNINGS:1,INFOS:5},Wr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zr={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},BE={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let rc=ac.WARNINGS;function PE(u){Number.isInteger(u)&&(rc=u)}function zE(){return rc}function oc(u){rc>=ac.INFOS&&console.info(`Info: ${u}`)}function _t(u){rc>=ac.WARNINGS&&console.warn(`Warning: ${u}`)}function Zt(u){throw new Error(u)}function jt(u,t){u||Zt(t)}function jE(u){switch(u?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function F0(u,t=null,e=null){if(!u)return null;if(e&&typeof u=="string"&&(e.addDefaultProtocol&&u.startsWith("www.")&&u.match(/\./g)?.length>=2&&(u=`http://${u}`),e.tryConvertEncoding))try{u=GE(u)}catch{}const s=t?URL.parse(u,t):URL.parse(u);return jE(s)?s:null}function U0(u,t,e=!1){const s=URL.parse(u);return s?(s.hash=t,s.href):e&&F0(u,"http://example.com")?u.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(u,t,e,s=!1){return Object.defineProperty(u,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Ns=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Ob extends Ns{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Uh extends Ns{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class xd extends Ns{constructor(t){super(t,"InvalidPDFException")}}class Kl extends Ns{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class IE extends Ns{constructor(t){super(t,"FormatError")}}class es extends Ns{constructor(t){super(t,"AbortException")}}function H0(u){(typeof u!="object"||u?.length===void 0)&&Zt("Invalid argument for bytesToString");const t=u.length,e=8192;if(t<e)return String.fromCharCode.apply(null,u);const s=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=u.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function Jr(u){typeof u!="string"&&Zt("Invalid argument for stringToBytes");const t=u.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=u.charCodeAt(s)&255;return e}function FE(u){return String.fromCharCode(u>>24&255,u>>16&255,u>>8&255,u&255)}function UE(){const u=new Uint8Array(4);return u[0]=1,new Uint32Array(u.buffer,0,1)[0]===1}function HE(){try{return new Function(""),!0}catch{return!1}}class Pe{static get isLittleEndian(){return Ct(this,"isLittleEndian",UE())}static get isEvalSupported(){return Ct(this,"isEvalSupported",HE())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ct(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ct(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ct(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Hh=Array.from(Array(256).keys(),u=>u.toString(16).padStart(2,"0"));class ft{static makeHexColor(t,e,s){return`#${Hh[t]}${Hh[e]}${Hh[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const a=t[s],o=t[s+1];t[s]=a*e[0]+o*e[2]+e[4],t[s+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const p=t[s+g],y=t[s+g+1];t[s+g]=p*a+y*l+d,t[s+g+1]=p*o+y*h+f}}static applyInverseTransform(t,e){const s=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const a=e[0],o=e[1],l=e[2],h=e[3],d=e[4],f=e[5],g=t[0],p=t[1],y=t[2],A=t[3];let S=a*g+d,v=S,E=a*y+d,x=E,R=h*p+f,M=R,N=h*A+f,k=N;if(o!==0||l!==0){const L=o*g,P=o*y,F=l*p,Q=l*A;S+=F,x+=F,E+=Q,v+=Q,R+=L,k+=L,N+=P,M+=P}s[0]=Math.min(s[0],S,E,v,x),s[1]=Math.min(s[1],R,N,M,k),s[2]=Math.max(s[2],S,E,v,x),s[3]=Math.max(s[3],R,N,M,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],a=t[1],o=t[2],l=t[3],h=s**2+a**2,d=s*o+a*l,f=o**2+l**2,g=(h+f)/2,p=Math.sqrt(g**2-(h*f-d**2));e[0]=Math.sqrt(g+p||1),e[1]=Math.sqrt(g-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,a)}static#t(t,e,s,a,o,l,h,d,f,g){if(f<=0||f>=1)return;const p=1-f,y=f*f,A=y*f,S=p*(p*(p*t+3*f*e)+3*y*s)+A*a,v=p*(p*(p*o+3*f*l)+3*y*h)+A*d;g[0]=Math.min(g[0],S),g[1]=Math.min(g[1],v),g[2]=Math.max(g[2],S),g[3]=Math.max(g[3],v)}static#e(t,e,s,a,o,l,h,d,f,g,p,y){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,s,a,o,l,h,d,-p/g,y);return}const A=g**2-4*p*f;if(A<0)return;const S=Math.sqrt(A),v=2*f;this.#t(t,e,s,a,o,l,h,d,(-g+S)/v,y),this.#t(t,e,s,a,o,l,h,d,(-g-S)/v,y)}static bezierBoundingBox(t,e,s,a,o,l,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,s,o,h,e,a,l,d,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,h,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),f)}}function GE(u){return decodeURIComponent(escape(u))}let Gh=null,Lb=null;function qE(u){return Gh||(Gh=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Lb=new Map([["ﬅ","ſt"]])),u.replaceAll(Gh,(t,e,s)=>e?e.normalize("NFKC"):Lb.get(s))}function G0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const u=new Uint8Array(32);return crypto.getRandomValues(u),H0(u)}const Ra="pdfjs_internal_id_";function VE(u,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...o]=e;if(!u(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let h=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Xe(u,t,e){return Math.min(Math.max(u,t),e)}function q0(u){return Uint8Array.prototype.toBase64?u.toBase64():btoa(H0(u))}function YE(u){return Uint8Array.fromBase64?Uint8Array.fromBase64(u):Jr(atob(u))}typeof Promise.try!="function"&&(Promise.try=function(u,...t){return new Promise(e=>{e(u(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(u){return u.reduce((t,e)=>t+e,0)});class Qr{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const h=o.name;if(h==="#text")l=o.value;else if(Qr.shouldBuildText(h))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class V0{static setupStorage(t,e,s,a,o){const l=a.getValue(e,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const h of s.children)h.attributes.value===l.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:o}){const{attributes:l}=e,h=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const h=o!=="richText",d=t.div;if(d.append(l),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=p}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const p=document.createTextNode(a.value);l.append(p),h&&Qr.shouldBuildText(a.name)&&f.push(p)}return{textDivs:f}}const g=[[a,-1,l]];for(;g.length>0;){const[p,y,A]=g.at(-1);if(y+1===p.children.length){g.pop();continue}const S=p.children[++g.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const x=document.createTextNode(S.value);f.push(x),A.append(x);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(A.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:e,intent:o,linkService:s}),S.children?.length>0)g.push([S,-1,E]);else if(S.value){const x=document.createTextNode(S.value);h&&Qr.shouldBuildText(v)&&f.push(x),E.append(x)}}for(const p of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const wi="http://www.w3.org/2000/svg";class za{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function to(u,t="text"){if(Gr(u,document.baseURI)){const e=await fetch(u);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",u,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class eo{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,p,y,A;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,p=0,y=0,A=1;break;case 90:g=0,p=1,y=1,A=0;break;case 270:g=0,p=-1,y=-1,A=0;break;case 0:g=1,p=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(y=-y,A=-A);let S,v,E,x;g===0?(S=Math.abs(f-t[1])*s+o,v=Math.abs(d-t[0])*s+l,E=(t[3]-t[1])*s,x=(t[2]-t[0])*s):(S=Math.abs(d-t[0])*s+o,v=Math.abs(f-t[1])*s+l,E=(t[2]-t[0])*s,x=(t[3]-t[1])*s),this.transform=[g*s,p*s,y*s,A*s,S-g*s*d-y*s*f,v-p*s*d-A*s*f],this.width=E,this.height=x}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new eo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return ft.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];ft.applyTransform(e,this.transform);const s=[t[2],t[3]];return ft.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return ft.applyInverseTransform(s,this.transform),s}}class qd extends Ns{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function lc(u){const t=u.length;let e=0;for(;e<t&&u[e].trim()==="";)e++;return u.substring(e,e+5).toLowerCase()==="data:"}function Vd(u){return typeof u=="string"&&/\.pdf$/i.test(u)}function XE(u){return[u]=u.split(/[#?]/,1),u.substring(u.lastIndexOf("/")+1)}function $E(u,t="document.pdf"){if(typeof u!="string")return t;if(lc(u))return _t('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(u);if(!s)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const h=Array.from(s.searchParams.values()).reverse();for(const f of h)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class Bb{started=Object.create(null);times=[];time(t){t in this.started&&_t(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||_t(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Gr(u,t){const e=t?URL.parse(u,t):URL.parse(u);return e?.protocol==="http:"||e?.protocol==="https:"}function kn(u){u.preventDefault()}function ce(u){u.preventDefault(),u.stopPropagation()}function KE(u){console.log("Deprecated API usage: "+u)}class Ed{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,f==="-"?(l+=g,h+=p):f==="+"&&(l-=g,h-=p),new Date(Date.UTC(s,a,o,l,h,d))}}function WE(u,{scale:t=1,rotation:e=0}){const{width:s,height:a}=u.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new eo({viewBox:o,userUnit:1,scale:t,rotation:e})}function no(u){if(u.startsWith("#")){const t=parseInt(u.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return u.startsWith("rgb(")?u.slice(4,-1).split(",").map(t=>parseInt(t)):u.startsWith("rgba(")?u.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(_t(`Not a valid color format: "${u}"`),[0,0,0])}function QE(u){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of u.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;u.set(e,no(s))}t.remove()}function ae(u){const{a:t,b:e,c:s,d:a,e:o,f:l}=u.getTransform();return[t,e,s,a,o,l]}function $n(u){const{a:t,b:e,c:s,d:a,e:o,f:l}=u.getTransform().invertSelf();return[t,e,s,a,o,l]}function Ms(u,t,e=!1,s=!0){if(t instanceof eo){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=u,h=Pe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,p=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=g,l.height=p):(l.width=p,l.height=g)}s&&u.setAttribute("data-main-rotation",t.rotation)}class Jn{constructor(){const{pixelRatio:t}=Jn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a,o=-1){let l=1/0,h=1/0,d=1/0;s=Jn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(l,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const _d=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ZE{static get isDarkMode(){return Ct(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class JE{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),Ct(this,"commentForegroundColor",no(s))}}function t_(u,t,e,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return u=Math.round(u*s+a),t=Math.round(t*s+a),e=Math.round(e*s+a),[u,t,e]}function Pb(u,t){const e=u[0]/255,s=u[1]/255,a=u[2]/255,o=Math.max(e,s,a),l=Math.min(e,s,a),h=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=h<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-s)/d+4)*60;break}}t[2]=h}function Cd(u,t){const e=u[0],s=u[1],a=u[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(e/60%2-1)),h=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=l+h,t[2]=h;break;case 1:t[0]=l+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=l+h;break;case 3:t[0]=h,t[1]=l+h,t[2]=o+h;break;case 4:t[0]=l+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=l+h;break}}function zb(u){return u<=.03928?u/12.92:((u+.055)/1.055)**2.4}function jb(u,t,e){Cd(u,e),e.map(zb);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];Cd(t,e),e.map(zb);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Ib=new Map;function e_(u,t){const e=u[0]+u[1]*256+u[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Ib.get(e);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);Pb(u,l);const h=a.subarray(6,9);Pb(t,h);const d=h[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),jb(l,h,o)<f){let g,p;d?(g=l[2],p=1):(g=0,p=l[2]);const y=.005;for(;p-g>y;){const A=l[2]=(g+p)/2;d===jb(l,h,o)<f?g=A:p=A}l[2]=d?p:g}return Cd(l,o),s=ft.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Ib.set(e,s),s}function Y0({html:u,dir:t,className:e},s){const a=document.createDocumentFragment();if(typeof u=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=u.split(/(?:\r\n?|\n)/);for(let h=0,d=l.length;h<d;++h){const f=l[h];o.append(document.createTextNode(f)),h<d-1&&o.append(document.createElement("br"))}a.append(o)}else V0.render({xfaHtml:u,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),s.append(a)}function X0(u){const t=new Path2D;if(!u)return t;for(let e=0,s=u.length;e<s;)switch(u[e++]){case zr.moveTo:t.moveTo(u[e++],u[e++]);break;case zr.lineTo:t.lineTo(u[e++],u[e++]);break;case zr.curveTo:t.bezierCurveTo(u[e++],u[e++],u[e++],u[e++],u[e++],u[e++]);break;case zr.quadraticCurveTo:t.quadraticCurveTo(u[e++],u[e++],u[e++],u[e++]);break;case zr.closePath:t.closePath();break;default:_t(`Unrecognized drawing path operator: ${u[e-1]}`);break}return t}class Yr{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,Yr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",kn,{signal:e}),t.addEventListener("pointerdown",Yr.#l,{signal:e}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ce(t)}#h(t){this.#i._focusEventsAllowed=!0,ce(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",kn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Yr.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(s)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#a)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#s=this.#g;e?(this.#n.insertBefore(s,e),this.#n.insertBefore(a,e)):this.#n.append(s,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,s){if(!e&&t==="comment")return;const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class n_{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",kn,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const h=o.x+(e?o.width:0);if(l>s){a=h,s=l;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,s]}show(t,e,s){const[a,o]=this.#r(e,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",kn,{signal:h}),o.addEventListener("click",a,{signal:h})),this.#t.append(o)}}function $0(u,t,e){for(const s of e)t.addEventListener(s,u[s].bind(u))}class qt{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(qt.#e||=new Set).add(t)}static setPointer(t,e){qt.#t||=e,qt.#n??=t}static setTimeStamp(t){qt.#i=t}static isSamePointerId(t){return qt.#t===t}static isSamePointerIdOrRemove(t){return qt.#t===t?!0:(qt.#e?.delete(t),!1)}static isSamePointerType(t){return qt.#n===t}static isInitializedAndDifferentPointerType(t){return qt.#n!==null&&!qt.isSamePointerType(t)}static isSameTimeStamp(t){return qt.#i===t}static isUsingMultiplePointers(){return qt.#e?.size>=1}static clearPointerType(){qt.#n=null}static clearPointerIds(){qt.#t=NaN,qt.#e=null}static clearTimeStamp(){qt.#i=NaN}}class i_{#t=0;get id(){return`${Kr}${this.#t++}`}}class Yd{#t=G0();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(s.url=e,a=await to(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Yd._isSVGFittingCanvas,l=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{s.bitmap=h,s.isSvg=!0,f()},l.onload=async()=>{const p=s.svgUrl=l.result;h.src=await o?`${p}#svgView(preserveAspectRatio(none))`:p},h.onerror=l.onerror=g});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){_t(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:a,type:o}=t;return this.#n(`${e}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const s=await e;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=a.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class s_{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class io{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Pe.platform;for(const[s,a,o={}]of t)for(const l of s){const h=l.startsWith("mac+");e&&h?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!h&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:h=null}}=s;h&&!h(t,e)||(a.bind(t,...l,e)(),o||ce(e))}}class Xd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return QE(t),Ct(this,"_colors",t)}convert(t){const e=no(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((o,l)=>o===e[l]))return Xd._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?ft.makeHexColor(...e):t}}class ns{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new s_;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#_=null;#x=null;#w=null;#T=null;#A=!1;#E=null;#D=new i_;#M=!1;#R=!1;#z=!1;#k=null;#L=null;#j=null;#B=null;#q=null;#C=Tt.NONE;#S=new Set;#O=null;#I=null;#U=null;#X=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#V=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=ns.prototype,e=l=>l.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new io([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#V.contains(h)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:h})=>!(h instanceof HTMLButtonElement)&&l.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,a,o,l,h,d,f,g,p,y,A,S,v,E){const x=this._signal=this.#t.signal;this.#V=t,this.#Z=e,this.#J=s,this.#a=a,this.#l=o,this.#I=l,this.#Y=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:x}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),h._on("setpreference",this.onSetPreference.bind(this),{signal:x}),h._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:x}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:x}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#_=d.filterFactory,this.#U=f,this.#T=g||null,this.#b=p,this.#v=y,this.#y=A,this.#q=S||null,this.viewParameters={realScale:za.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#B?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#E?.hide(),this.#E=null,this.#j?.destroy(),this.#j=null,this.#i=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Ct(this,"hcmFilter",this.#U?this.#_.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Ct(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ct(this,"highlightColors",null);const e=new Map,s=!!this.#U;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){e.set(a.replace("_HCM",""),o);continue}!s&&!l&&e.set(a,o)}return Ct(this,"highlightColors",e)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,a){this.#l?.showDialog(this,t,e,s,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,e){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:h}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+h)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*za.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h}=s,d=s.toString(),g=this.#Q(s).closest(".textLayer"),p=this.getSelectionBoxes(g);if(!p)return;s.empty();const y=this.#tt(g),A=this.#C===Tt.NONE,S=()=>{const v=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:p,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:h,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&v?.editComment()};if(A){this.switchToMode(Tt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#E||=new n_(this),this.#E.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Kr}${t}`,s=this.#s.getRawValue(e);return s&&this.#s.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#O&&(this.#E?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#O=e,this.#N({hasSelectedText:!0}),!(this.#C!==Tt.HIGHLIGHT&&this.#C!==Tt.NONE)&&(this.#C===Tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#C===Tt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#R){const l=new AbortController,h=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===Tt.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#k?.abort(),this.#k=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#S){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){_t(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#nt(d);this.#it(o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:h,mustExec:!0})}catch(o){_t(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==Tt.NONE&&!this.isEditorHandlingKeyboard&&ns._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===Tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[zt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#N({isEditing:this.#C!==Tt.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,a=!1,o=!1){if(this.#C!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===Tt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#C=t,t===Tt.NONE){this.setEditingState(!1),this.#mt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===Tt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===Tt.POPUP){this.#i||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,h=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:g,deleted:p}=d;f&&l.add(f),g&&!p&&h.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:g,contentsObj:p}=d;g&&p?.str&&!l.has(f)&&!this.#g.has(f)&&h.push(d)}this.#l?.showSidebar(h)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case zt.CREATE:this.currentLayer.addNewEditor(e);return;case zt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#S)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#X?.get(zt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[zt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#mt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#B?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#pt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],s=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#nt(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==Tt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,o]=this.#H,l=[...this.#S],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},h);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#S)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},h]of t)h.newX=a,h.newY=o,h.newPageIndex=l,e||=a!==h.savedX||o!==h.savedY||l!==h.savedPageIndex;if(!e)return!1;const s=(a,o,l,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,o,l):(a.pageIndex=h,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:h}]of t)s(a,o,l,h)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:h}]of t)s(a,o,l,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==Tt.NONE}get imageManager(){return Ct(this,"imageManager",new Yd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,p,y)=>({x:(g-a)/l,y:1-(f+p-s)/o,width:y/l,height:p/o});break;case"180":h=(f,g,p,y)=>({x:1-(f+p-s)/o,y:1-(g+y-a)/l,width:p/o,height:y/l});break;case"270":h=(f,g,p,y)=>({x:1-(g+y-a)/l,y:(f-s)/o,width:y/l,height:p/o});break;default:h=(f,g,p,y)=>({x:(f-s)/o,y:(g-a)/l,width:p/o,height:y/l});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const p=e.getRangeAt(f);if(!p.collapsed)for(const{x:y,y:A,width:S,height:v}of p.getClientRects())S===0||v===0||d.push(h(y,A,S,v))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#s.getRawValue(e);s&&(this.#C===Tt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const a=this.#B?.get(t);a&&(a.setCanvas(e,s),this.#B.delete(t))}addMissingCanvas(t,e){(this.#B||=new Map).set(t,e)}}class Qn{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,Qn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Qn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",Qn.#f.missing),e.setAttribute("data-l10n-id",Qn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",kn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:s}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await Qn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Qn.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Qn.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Dl{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+s-o)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",kn,{signal:s}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,ce(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,ce(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,a;if(e)[s,a]=e;else{[s,a]=this.#n.commentButtonPosition;const{width:g,height:p,x:y,y:A}=this.#n;s=y+s*g,a=A+a*p}const o=this.#n.parent.boundingClientRect,{x:l,y:h,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+s*d,h+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class cc{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:h}){this.#t=t,this.#i=s,this.#n=e,this.#r=a,this.#a=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Jn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,h={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ce(f),d(f))},h),l.addEventListener("pointerup",d,h),l.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const h=this.#p.bind(this);o.addEventListener("touchend",h,l),o.addEventListener("touchcancel",h,l),l.capture=!0,o.addEventListener("pointerdown",ce,l),o.addEventListener("pointermove",ce,l),o.addEventListener("pointercancel",ce,l),o.addEventListener("pointerup",ce,l),this.#r?.()}if(ce(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;ce(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:h}=s,d=this.#l,{touch0X:f,touch0Y:g,touch1X:p,touch1Y:y}=d,A=p-f,S=y-g,v=l-a,E=h-o,x=Math.hypot(v,E)||1,R=Math.hypot(A,S)||1;if(!this.#e&&Math.abs(R-x)<=cc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=h,!this.#e){this.#e=!0;return}const M=[(a+l)/2,(o+h)/2];this.#a?.(M,R,x)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ce(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class wt{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#b=!1;#v=!1;#y=null;#_=0;#x=0;#w=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=wt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Xd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=wt.prototype._resizeWithKeyboard,e=ns.TRANSLATE_SMALL,s=ns.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new io([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],wt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new a_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(wt._l10n??=t,wt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),wt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);wt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}#D([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:h}=this;const[d,f]=this.getBaseTranslation();l+=d,h+=f;const{style:g}=s;g.left=`${(100*l).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(l,h),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=wt,a=s/t,o=s/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:o,y:l,width:h,height:d}=this;if(h*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=Xe(o,0,s-h),l=Xe(l,0,a-d);break;case 90:o=Xe(o,0,s-d),l=Xe(l,h,a);break;case 180:o=Xe(o,h,s),l=Xe(l,d,a);break;case 270:o=Xe(o,d,s),l=Xe(l,0,a-h);break}this.x=o/=s,this.y=l/=a;const[f,g]=this.getBaseTranslation();o+=f,l+=g,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return wt.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return wt.#M(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#k.bind(this,s),{signal:e}),a.addEventListener("contextmenu",kn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:s}=Pe.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#B.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",ce,{passive:!1,signal:l}),window.addEventListener("contextmenu",kn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#L(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,h=this.width,d=this.height;o===t&&l===e&&h===s&&d===a||this.addCommands({cmd:this.#L.bind(this,o,l,h,d),undo:this.#L.bind(this,t,e,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#B(t,e){const[s,a]=this.parentDimensions,o=this.x,l=this.y,h=this.width,d=this.height,f=wt.MIN_SIZE/s,g=wt.MIN_SIZE/a,p=this.#R(this.rotation),y=(O,G)=>[p[0]*O+p[2]*G,p[1]*O+p[3]*G],A=this.#R(360-this.rotation),S=(O,G)=>[A[0]*O+A[2]*G,A[1]*O+A[3]*G];let v,E,x=!1,R=!1;switch(t){case"topLeft":x=!0,v=(O,G)=>[0,0],E=(O,G)=>[O,G];break;case"topMiddle":v=(O,G)=>[O/2,0],E=(O,G)=>[O/2,G];break;case"topRight":x=!0,v=(O,G)=>[O,0],E=(O,G)=>[0,G];break;case"middleRight":R=!0,v=(O,G)=>[O,G/2],E=(O,G)=>[0,G/2];break;case"bottomRight":x=!0,v=(O,G)=>[O,G],E=(O,G)=>[0,0];break;case"bottomMiddle":v=(O,G)=>[O/2,G],E=(O,G)=>[O/2,0];break;case"bottomLeft":x=!0,v=(O,G)=>[0,G],E=(O,G)=>[O,0];break;case"middleLeft":R=!0,v=(O,G)=>[0,G/2],E=(O,G)=>[O,G/2];break}const M=v(h,d),N=E(h,d);let k=y(...N);const L=wt._round(o+k[0]),P=wt._round(l+k[1]);let F=1,Q=1,it,nt;if(e.fromKeyboard)({deltaX:it,deltaY:nt}=e);else{const{screenX:O,screenY:G}=e,[K,X]=this.#l;[it,nt]=this.screenToPageTranslation(O-K,G-X),this.#l[0]=O,this.#l[1]=G}if([it,nt]=S(it/s,nt/a),x){const O=Math.hypot(h,d);F=Q=Math.max(Math.min(Math.hypot(N[0]-M[0]-it,N[1]-M[1]-nt)/O,1/h,1/d),f/h,g/d)}else R?F=Xe(Math.abs(N[0]-M[0]-it),f,1)/h:Q=Xe(Math.abs(N[1]-M[1]-nt),g,1)/d;const lt=wt._round(h*F),ht=wt._round(d*Q);k=y(...E(lt,ht));const gt=L-k[0],yt=P-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=lt,this.height=ht,this.x=gt,this.y=yt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Yr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Qn.initialize(wt._l10n),this.#i=new Qn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Dl(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:a}}=this.#n;return{text:e,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Dl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#n||=new Dl(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Dl(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,h=l+o+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),$0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new cc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#q(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const l=this.#R(this.rotation),h=(L,P)=>[l[0]*L+l[2]*P,l[1]*L+l[3]*P],[d,f]=this.parentDimensions,g=this.x,p=this.y,y=this.width,A=this.height,S=wt.MIN_SIZE/d,v=wt.MIN_SIZE/f;o=Math.max(Math.min(o,1/y,1/A),S/y,v/A);const E=wt._round(y*o),x=wt._round(A*o);if(E===y&&x===A)return;this.#u||=[g,p,y,A];const R=h(y/2,A/2),M=wt._round(g+R[0]),N=wt._round(p+R[1]),k=h(E/2,x/2);this.x=M-k[0],this.y=N-k[1],this.width=E,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#I(t);return}this.#O(t)}#O(t){const{isMac:e}=Pe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},h=f=>{a.abort(),this.#s=null,this.#p=!1,this._uiManager.endDragSession()||this.#O(f),s&&this._onStopDragging()};e&&(this.#_=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:p,pointerId:y}=f;if(y!==this.#s){ce(f);return}const[A,S]=this.screenToPageTranslation(g-this.#_,p-this.#x);this.#_=g,this.#x=p,this._uiManager.dragSelectedEditors(A,S)},l),window.addEventListener("touchmove",ce,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&h(f),ce(f)},l));const d=f=>{if(!this.#s||this.#s===f.pointerId){h(f);return}ce(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=e/a,p=this.x*o,y=this.y*l,A=this.width*o,S=this.height*l;switch(s){case 0:return[p+f+h,l-y-g-S+d,p+f+A+h,l-y-g+d];case 90:return[p+g+h,l-y+f+d,p+g+S+h,l-y+f+A+d];case 180:return[p-f-A+h,l-y+g+d,p-f+h,l-y+g+S+d];case 270:return[p-g-S+h,l-y-f-A+d,p-g+h,l-y-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,o,l]=t,h=o-s,d=l-a;switch(this.rotation){case 0:return[s,e-l,h,d];case 90:return[s,e-a,d,h];case 180:return[o,e-a,h,d];case 270:return[o,e-l,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:a,deleted:o,richText:l},uid:h,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||g,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,l);return a.x=h/o,a.y=d/l,a.width=f/o,a.height=g/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#P(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#T?.destroy(),this.#T=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,a,o,l]=this.getPDFRect();return[wt._round(s+(o-s)*t),wt._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#X.bind(this),h=this.#Y.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#$.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",wt._l10nResizer[g])}}const s=this.#e[0];let a=0;for(const l of e){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)this.#c.append(this.#c.firstElementChild);else if(o>a)for(let h=0;h<o-a;h++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const h of e){const f=this.#e[l++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",wt._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){wt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#$(t){this.#g=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#B(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:s}=t;let a=this.#w.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(s),this.#w.size===0&&(this.#w=null)},wt._telemetryTimeout),this.#w.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class a_ extends wt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Fb=3285377520,Rn=4294901760,Kn=65535;class K0{constructor(t){this.h1=t?t&4294967295:Fb,this.h2=t?t&4294967295:Fb}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,E=t.length;v<E;v++){const x=t.charCodeAt(v);x<=255?e[s++]=x:(e[s++]=x>>>8,e[s++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const p=3432918353,y=461845907,A=p&Kn,S=y&Kn;for(let v=0;v<a;v++)v&1?(h=l[v],h=h*p&Rn|h*A&Kn,h=h<<15|h>>>17,h=h*y&Rn|h*S&Kn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[v],d=d*p&Rn|d*A&Kn,d=d<<15|d>>>17,d=d*y&Rn|d*S&Kn,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,o){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*p&Rn|h*A&Kn,h=h<<15|h>>>17,h=h*y&Rn|h*S&Kn,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Rn|t*36045&Kn,e=e*4283543511&Rn|((e<<16|t>>>16)*2950163797&Rn)>>>16,t^=e>>>1,t=t*444984403&Rn|t*60499&Kn,e=e*3301882366&Rn|((e<<16|t>>>16)*3120437893&Rn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Td=Object.freeze({map:null,hash:"",transfer:void 0});class $d{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof wt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof wt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(e))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof wt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new W0(this)}get serializable(){if(this.#n.size===0)return Td;const t=new Map,e=new K0,s=[],a=Object.create(null);let o=!1;for(const[l,h]of this.#n){const d=h instanceof wt?h.serialize(!1,a):h;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:Td}get editorStats(){let t=null;const e=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof wt)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:h}=l;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,g]of Object.entries(l)){if(f==="type")continue;let p=d.get(f);p||(p=new Map,d.set(f,p));const y=p.get(g)??0;p.set(g,y+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class W0 extends $d{#t;constructor(t){super();const{map:e,hash:s,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}class r_{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(jt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,h=new FontFace(a,o,l);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),s?.(t)}catch{_t(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw _t(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",Ye||Pe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(jt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(N,k){return N.charCodeAt(k)<<24|N.charCodeAt(k+1)<<16|N.charCodeAt(k+2)<<8|N.charCodeAt(k+3)&255}function a(N,k,L,P){const F=N.substring(0,k),Q=N.substring(k+L);return F+P+Q}let o,l;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(N,k){if(++f>30){_t("Load test font never loaded."),k();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(g.bind(null,N,k))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,p.length,p);const S=16,v=1482184792;let E=s(y,S);for(o=0,l=p.length-3;o<l;o+=4)E=E-v+s(p,o)|0;o<p.length&&(E=E-v+s(p+"XXX",o)|0),y=a(y,S,4,FE(E));const x=`url(data:font/opentype;base64,${btoa(y)});`,R=`@font-face {font-family:"${p}";src:${x}}`;this.insertRule(R);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const N of[t.loadedName,p]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=N,M.append(k)}this._document.body.append(M),g(p,()=>{M.remove(),e.complete()})}}class o_{#t;constructor(t,e=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${q0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(l){_t(`getPathGenerator - ignoring character: "${l}".`)}const o=X0(a);return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){Ct(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){Ct(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Oa{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let a=0;for(const f of Oa.strings){const g=e.encode(t[f]);s[f]=g,a+=4+g.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),h=new DataView(o);let d=0;for(const f of Oa.strings){const g=s[f],p=g.length;h.setUint32(d,p),l.set(g,d+4),d+=4+p}return jt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){jt(t<Oa.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class La{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let a=0;for(const y of La.strings){const A=e.encode(t[y]);s[y]=A,a+=4+A.length}a+=4;let o,l,h=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),h+=4+o.length+4+l.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let p=0;g.setUint8(p++,t.guessFallback?1:0),g.setUint32(p,0),p+=4,a=0;for(const y of La.strings){const A=s[y],S=A.length;a+=4+S,g.setUint32(p,S),f.set(A,p+4),p+=4+S}return g.setUint32(p-a-4,a),t.style&&(g.setUint32(p,o.length),f.set(o,p+4),p+=4+o.length,g.setUint32(p,l.length),f.set(l,p+4),p+=4+l.length),jt(p<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(p)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){jt(t<La.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Wt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){jt(t<Wt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(e)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return jt(t<Wt.numbers.length,"Invalid number index"),this.#o.getFloat64(Wt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Wt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Wt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Wt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){jt(t<Wt.strings.length,"Invalid string index");let e=Wt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const s=this.#o.getUint32(e),a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,e+4,s)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Wt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=Wt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Wt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#a,t+4,a)),new Oa(o.buffer)}get systemFontInfo(){let t=Wt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#a,t+4,s)),new La(a.buffer)}static write(t){const e=t.systemFontInfo?La.write(t.systemFontInfo):null,s=t.cssFontInfo?Oa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const v of Wt.strings)o[v]=a.encode(t[v]),l+=4+o[v].length;const h=Wt.#r+4+l+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let p=0;const y=Wt.bools.length;let A=0,S=0;for(let v=0;v<y;v++){const E=t[Wt.bools[v]];A|=(E===void 0?0:E?2:1)<<S,S+=2,(S===8||v===y-1)&&(g.setUint8(p++,A),A=0,S=0)}jt(p===Wt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const v of Wt.numbers)g.setFloat64(p,t[v]),p+=8;if(jt(p===Wt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(p++,4);for(const v of t.bbox)g.setInt16(p,v,!0),p+=2}else g.setUint8(p++,0),p+=8;if(jt(p===Wt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(p++,6);for(const v of t.fontMatrix)g.setFloat64(p,v,!0),p+=8}else g.setUint8(p++,0),p+=48;if(jt(p===Wt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(p++,1);for(const v of t.defaultVMetrics)g.setInt16(p,v,!0),p+=2}else g.setUint8(p++,0),p+=6;jt(p===Wt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Wt.#r,0),p+=4;for(const v of Wt.strings){const E=o[v],x=E.length;g.setUint32(p,x),f.set(E,p+4),p+=4+x}if(g.setUint32(Wt.#r,p-Wt.#r-4),!e)g.setUint32(p,0),p+=4;else{const v=e.byteLength;g.setUint32(p,v),jt(p+4+v<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),p+4),p+=4+v}if(!s)g.setUint32(p,0),p+=4;else{const v=s.byteLength;g.setUint32(p,v),jt(p+4+v<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),p+4),p+=4+v}return t.data===void 0?(g.setUint32(p,0),p+=4):(g.setUint32(p,t.data.length),f.set(t.data,p+4),p+=4+t.data.length),jt(p<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(p)}}class _e{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,s=null,a=[],o=[],l=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,s=t[2],l=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],o=t[3],h=t[4]||[],s=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(a.length/2),p=Math.floor(o.length/3),y=l.length,A=h.length;let S=0;for(const k of h)S+=1,S=Math.ceil(S/4)*4,S+=4+k.coords.length*4,S+=4+k.colors.length*4,k.verticesPerRow!==void 0&&(S+=4);const v=20+g*8+p*3+y*8+(s?16:0)+(f?3:0)+S,E=new ArrayBuffer(v),x=new DataView(E),R=new Uint8Array(E);x.setUint8(_e.#t,e),x.setUint8(_e.#e,s?1:0),x.setUint8(_e.#i,f?1:0),x.setUint8(_e.#n,d),x.setUint32(_e.#r,g,!0),x.setUint32(_e.#a,p,!0),x.setUint32(_e.#s,y,!0),x.setUint32(_e.#o,A,!0);let M=20;new Float32Array(E,M,g*2).set(a),M+=g*8,R.set(o,M),M+=p*3;for(const[k,L]of l)x.setFloat32(M,k,!0),M+=4,x.setUint32(M,parseInt(L.slice(1),16),!0),M+=4;if(s)for(const k of s)x.setFloat32(M,k,!0),M+=4;f&&(R.set(f,M),M+=3);for(let k=0;k<h.length;k++){const L=h[k];x.setUint8(M,L.type),M+=1,M=Math.ceil(M/4)*4,x.setUint32(M,L.coords.length,!0),M+=4,new Int32Array(E,M,L.coords.length).set(L.coords),M+=L.coords.length*4,x.setUint32(M,L.colors.length,!0),M+=4,new Int32Array(E,M,L.colors.length).set(L.colors),M+=L.colors.length*4,L.verticesPerRow!==void 0&&(x.setUint32(M,L.verticesPerRow,!0),M+=4)}return E}getIR(){const t=this.view,e=this.data[_e.#t],s=!!this.data[_e.#e],a=!!this.data[_e.#i],o=t.getUint32(_e.#r,!0),l=t.getUint32(_e.#a,!0),h=t.getUint32(_e.#s,!0),d=t.getUint32(_e.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,o*2);f+=o*8;const p=new Uint8Array(this.buffer,f,l*3);f+=l*3;const y=[];for(let E=0;E<h;++E){const x=t.getFloat32(f,!0);f+=4;const R=t.getUint32(f,!0);f+=4,y.push([x,`#${R.toString(16).padStart(6,"0")}`])}let A=null;if(s){A=[];for(let E=0;E<4;++E)A.push(t.getFloat32(f,!0)),f+=4}let S=null;a&&(S=new Uint8Array(this.buffer,f,3),f+=3);const v=[];for(let E=0;E<d;++E){const x=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const R=t.getUint32(f,!0);f+=4;const M=new Int32Array(this.buffer,f,R);f+=R*4;const N=t.getUint32(f,!0);f+=4;const k=new Int32Array(this.buffer,f,N);f+=N*4;const L={type:x,coords:M,colors:k};x===Sd.LATTICE&&(L.verticesPerRow=t.getUint32(f,!0),f+=4),v.push(L)}if(e===1)return["RadialAxial","axial",A,y,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",A,y,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(e===3){const E=this.data[_e.#n];let x=null;if(g.length>0){let R=g[0],M=g[0],N=g[1],k=g[1];for(let L=0;L<g.length;L+=2){const P=g[L],F=g[L+1];R=R>P?P:R,N=N>F?F:N,M=M<P?P:M,k=k<F?F:k}x=[R,N,M,k]}return["Mesh",E,g,p,v,x,A,S]}throw new Error(`Unsupported pattern kind: ${e}`)}}function l_(u){if(u instanceof URL)return u.href;if(typeof u=="string"){if(Ye)return u;const t=URL.parse(u,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function c_(u){if(Ye&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return Jr(u);if(u instanceof ArrayBuffer||ArrayBuffer.isView(u)||typeof u=="object"&&!isNaN(u?.length))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Nl(u){if(typeof u!="string")return null;if(u.endsWith("/"))return u;throw new Error(`Invalid factory url: "${u}" must include trailing slash.`)}const Md=u=>typeof u=="object"&&Number.isInteger(u?.num)&&u.num>=0&&Number.isInteger(u?.gen)&&u.gen>=0,u_=u=>typeof u=="object"&&typeof u?.name=="string",h_=VE.bind(null,Md,u_);class d_{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){_t("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const kl={DATA:1,ERROR:2},ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ub(){}function an(u){if(u instanceof es||u instanceof xd||u instanceof Ob||u instanceof Kl||u instanceof Uh)return u;switch(u instanceof Error||typeof u=="object"&&u!==null||Zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),u.name){case"AbortException":return new es(u.message);case"InvalidPDFException":return new xd(u.message);case"PasswordException":return new Ob(u.message,u.code);case"ResponseException":return new Kl(u.message,u.status,u.missing);case"UnknownErrorException":return new Uh(u.message,u.details)}return new Uh(u.message,u.toString())}class qr{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===kl.DATA)a.resolve(t.data);else if(t.callback===kl.ERROR)a.reject(an(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:kl.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:kl.ERROR,callbackId:t.callbackId,reason:an(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,s,a){const o=this.streamId++,l=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:h,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[o].pullCall=g,d.postMessage({sourceName:l,targetName:h,stream:ye.PULL,streamId:o,desiredSize:f.desiredSize}),g.promise},cancel:f=>{jt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[o].cancelCall=g,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:h,stream:ye.CANCEL,streamId:o,reason:an(f)}),g.promise}},s)}#i(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,p){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=g,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:ye.ENQUEUE,streamId:e,chunk:f},p)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ye.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){jt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:ye.ERROR,streamId:e,reason:an(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ye.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ye.START_COMPLETE,streamId:e,reason:an(f)})})}#n(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case ye.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(an(t.reason));break;case ye.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(an(t.reason));break;case ye.PULL:if(!h){o.postMessage({sourceName:s,targetName:a,stream:ye.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||Ub).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ye.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ye.PULL_COMPLETE,streamId:e,reason:an(f)})});break;case ye.ENQUEUE:if(jt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ye.CLOSE:if(jt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case ye.ERROR:jt(l,"error should have stream controller"),l.controller.error(an(t.reason)),this.#r(l,e);break;case ye.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(an(t.reason)),this.#r(l,e);break;case ye.CANCEL:if(!h)break;const d=an(t.reason);Promise.try(h.onCancel||Ub,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:ye.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:ye.CANCEL_COMPLETE,streamId:e,reason:an(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Q0{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Zt("Abstract method `_createCanvas` called.")}}class f_ extends Q0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Z0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Hb extends Z0{async _fetch(t){const e=await to(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Jr(e)}}class J0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,o){return"none"}destroy(t=!1){}}class m_ extends J0{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(wi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(wi,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let p=0;p<256;p++)f[p]=d[p]/255;const g=f.join(",");return[g,g,g]}const[e,s,a]=t,o=new Array(256),l=new Array(256),h=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=s[d]/255,h[d]=a[d]/255;return[o.join(","),l.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(lc(e)?_t('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=U0(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(h);return this.#m(s,a,o,f),d}addHCMFilter(t,e){const s=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#v(t);t=ft.makeHexColor(...l);const h=this.#v(e);if(e=ft.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const S=A/255;d[A]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,p=o.filter=this.#p(g);this.#m(f,f,f,p),this.#g(p);const y=(A,S)=>{const v=l[A]/255,E=h[A]/255,x=new Array(S+1);for(let R=0;R<=S;R++)x[R]=v+R/S*(E-v);return x.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),p),o.url=this.#h(g),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),a=`alpha_${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#b(s,h),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const h=this.#p(o);return this.#f(h),t&&this.#b(s,h),l}addHighlightHCMFilter(t,e,s,a,o){const l=`${e}-${s}-${a}-${o}`;let h=this.#c.get(t);if(h?.key===l||(h?(h.filter?.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},this.#c.set(t,h)),!e||!s))return h.url;const[d,f]=[e,s].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),p=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,A]=[a,o].map(this.#v.bind(this));p<g&&([g,p,y,A]=[p,g,A,y]),this.#l.style.color="";const S=(x,R,M)=>{const N=new Array(256),k=(p-g)/M,L=x/255,P=(R-x)/(255*M);let F=0;for(let Q=0;Q<=M;Q++){const it=Math.round(g+Q*k),nt=L+Q*P;for(let lt=F;lt<=it;lt++)N[lt]=nt;F=it+1}for(let Q=F;Q<256;Q++)N[Q]=N[F-1];return N.join(",")},v=`g_${this.#n}_hcm_${t}_filter`,E=h.filter=this.#p(v);return this.#g(E),this.#m(S(y[0],A[0],5),S(y[1],A[1],5),S(y[2],A[2],5),E),h.url=this.#h(v),h.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(wi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(wi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(wi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const a=this.#r.createElementNS(wi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#m(t,e,s,a){const o=this.#r.createElementNS(wi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",s)}#b(t,e){const s=this.#r.createElementNS(wi,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,no(getComputedStyle(this.#l).getPropertyValue("color"))}}class tv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Gb extends tv{async _fetch(t){const e=await to(t,"arraybuffer");return new Uint8Array(e)}}class ev{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class qb extends ev{async _fetch(t){const e=await to(t,"arraybuffer");return new Uint8Array(e)}}Ye&&_t("Please use the `legacy` build in Node.js environments.");async function Kd(u){const e=await process.getBuiltinModule("fs").promises.readFile(u);return new Uint8Array(e)}class p_ extends J0{}class g_ extends Q0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class b_ extends Z0{async _fetch(t){return Kd(t)}}class y_ extends tv{async _fetch(t){return Kd(t)}}class v_ extends ev{async _fetch(t){return Kd(t)}}const _a="__forcedDependency",{floor:Vb,ceil:Yb}=Math;function Ol(u,t,e,s,a,o){u[t*4+0]=Math.min(u[t*4+0],e),u[t*4+1]=Math.min(u[t*4+1],s),u[t*4+2]=Math.max(u[t*4+2],a),u[t*4+3]=Math.max(u[t*4+3],o)}const Rd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class A_{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Rd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Ll=(u,t)=>{if(!u)return;let e=u.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},u.set(t,e)),e};class w_{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[_a]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,s=!1){this.#f=t.width,this.#g=t.height,this.#b(e),s&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(Rd,e.length)):this.#u.fill(Rd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[_a]:{__proto__:this.#e[_a]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const s=this.#n.pop();return s!==void 0&&(Ll(this.#m,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Ll(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Ll(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(ft.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#i.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(_a,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(_a,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,s,a,o,l){const h=ft.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];ft.axialAlignedBoundingBox([s,o,a,l],h,d);const f=ft.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,s,a,o,l){const h=this.#s;if(h[0]===1/0)return this;const d=ft.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(h[0]===-1/0)return ft.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return ft.axialAlignedBoundingBox([s,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,s,a=1,o=0,l=0,h){const d=s.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(g=[0,0,0,0],ft.axialAlignedBoundingBox(d,s.fontMatrix,g),(a!==1||o!==0||l!==0)&&ft.scaleMinMax([a,0,0,-a,o,l],g),f)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const p=h();return d&&g&&f===void 0&&(f=g[0]<=o-p.actualBoundingBoxLeft&&g[2]>=o+p.actualBoundingBoxRight&&g[1]<=l-p.actualBoundingBoxAscent&&g[3]>=l+p.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,o-p.actualBoundingBoxLeft,o+p.actualBoundingBoxRight,l-p.actualBoundingBoxAscent,l+p.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[_a]),this.#m){const s=Ll(this.#m,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Vb(this.#o[0]*256/this.#f),a=Vb(this.#o[1]*256/this.#g),o=Yb(this.#o[2]*256/this.#f),l=Yb(this.#o[3]*256/this.#g);Ol(this.#p,t,s,a,o,l);for(const h of this.#l)h!==t&&Ol(this.#p,h,s,a,o,l);for(const h of this.#n)h!==t&&Ol(this.#p,h,s,a,o,l);for(const h of this.#r)h!==t&&Ol(this.#p,h,s,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new A_(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class Wl{#t;#e;#i;#n=0;#r=0;constructor(t,e,s){if(t instanceof Wl&&t.#i===!!s)return t;this.#t=t,this.#e=e,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,s,a,o,l),this}recordBBox(t,e,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,e,s,a,o,l),this}recordCharacterBBox(t,e,s,a,o,l,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,s,a,o,l,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Dn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Be={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Dd(u,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),u.clip(a)}class Wd{isModifyingCurrentTransform(){return!1}getPattern(){Zt("Abstract method `getPattern` called.")}}class S_ extends Wd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,a){let o;if(a===Be.STROKE||a===Be.FILL){const l=e.current.getClippedPathBoundingBox(a,ae(t))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-l[0],-l[1]),s=ft.transform(s,[1,0,0,1,l[0],l[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Dd(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),o=t.createPattern(f.canvas,"no-repeat");const p=new DOMMatrix(s);o.setTransform(p)}else Dd(t,this._bbox),o=this._createGradient(t);return o}}function qh(u,t,e,s,a,o,l,h){const d=t.coords,f=t.colors,g=u.data,p=u.width*4;let y;d[e+1]>d[s+1]&&(y=e,e=s,s=y,y=o,o=l,l=y),d[s+1]>d[a+1]&&(y=s,s=a,a=y,y=l,l=h,h=y),d[e+1]>d[s+1]&&(y=e,e=s,s=y,y=o,o=l,l=y);const A=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,v=(d[s]+t.offsetX)*t.scaleX,E=(d[s+1]+t.offsetY)*t.scaleY,x=(d[a]+t.offsetX)*t.scaleX,R=(d[a+1]+t.offsetY)*t.scaleY;if(S>=R)return;const M=f[o],N=f[o+1],k=f[o+2],L=f[l],P=f[l+1],F=f[l+2],Q=f[h],it=f[h+1],nt=f[h+2],lt=Math.round(S),ht=Math.round(R);let gt,yt,O,G,K,X,V,C;for(let I=lt;I<=ht;I++){if(I<E){const st=I<S?0:(S-I)/(S-E);gt=A-(A-v)*st,yt=M-(M-L)*st,O=N-(N-P)*st,G=k-(k-F)*st}else{let st;I>R?st=1:E===R?st=0:st=(E-I)/(E-R),gt=v-(v-x)*st,yt=L-(L-Q)*st,O=P-(P-it)*st,G=F-(F-nt)*st}let B;I<S?B=0:I>R?B=1:B=(S-I)/(S-R),K=A-(A-x)*B,X=M-(M-Q)*B,V=N-(N-it)*B,C=k-(k-nt)*B;const $=Math.round(Math.min(gt,K)),et=Math.round(Math.max(gt,K));let rt=p*I+$*4;for(let st=$;st<=et;st++)B=(gt-st)/(gt-K),B<0?B=0:B>1&&(B=1),g[rt++]=yt-(yt-X)*B|0,g[rt++]=O-(O-V)*B|0,g[rt++]=G-(G-C)*B|0,g[rt++]=255}}function x_(u,t,e){const s=t.coords,a=t.colors;let o,l;switch(t.type){case Sd.LATTICE:const h=t.verticesPerRow,d=Math.floor(s.length/h)-1,f=h-1;for(o=0;o<d;o++){let g=o*h;for(let p=0;p<f;p++,g++)qh(u,e,s[g],s[g+1],s[g+h],a[g],a[g+1],a[g+h]),qh(u,e,s[g+h+1],s[g+1],s[g+h],a[g+h+1],a[g+1],a[g+h])}break;case Sd.TRIANGLES:for(o=0,l=s.length;o<l;o+=3)qh(u,e,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class E_ extends Wd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,p=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),A=f/p,S=g/y,v={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/S},E=p+4,x=y+4,R=s.getCanvas("mesh",E,x),M=R.context,N=M.createImageData(p,y);if(e){const L=N.data;for(let P=0,F=L.length;P<F;P+=4)L[P]=e[0],L[P+1]=e[1],L[P+2]=e[2],L[P+3]=255}for(const L of this._figures)x_(N,L,v);return M.putImageData(N,2,2),{canvas:R.canvas,offsetX:h-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){Dd(t,this._bbox);const o=new Float32Array(2);if(a===Be.SHADING)ft.singularValueDecompose2dScale(ae(t),o);else if(this.matrix){ft.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;ft.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=d}else ft.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Be.SHADING?null:this._background,e.cachedCanvases);return a!==Be.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class __ extends Wd{getPattern(){return"hotpink"}}function C_(u){switch(u[0]){case"RadialAxial":return new S_(u);case"Mesh":return new E_(u);case"Dummy":return new __}throw new Error(`Unknown IR type: ${u[0]}`)}const Xb={COLORED:1,UNCOLORED:2};class Qd{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),oc("TilingType: "+l);const p=s[0],y=s[1],A=s[2],S=s[3],v=A-p,E=S-y,x=new Float32Array(2);ft.singularValueDecompose2dScale(this.matrix,x);const[R,M]=x;ft.singularValueDecompose2dScale(this.baseTransform,x);const N=R*x[0],k=M*x[1];let L=v,P=E,F=!1,Q=!1;const it=Math.ceil(f*N),nt=Math.ceil(g*k),lt=Math.ceil(v*N),ht=Math.ceil(E*k);it>=lt?L=f:F=!0,nt>=ht?P=g:Q=!0;const gt=this.getSizeAndScale(L,this.ctx.canvas.width,N),yt=this.getSizeAndScale(P,this.ctx.canvas.height,k),O=t.cachedCanvases.getCanvas("pattern",gt.size,yt.size),G=O.context,K=d.createCanvasGraphics(G,e);if(K.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(K,o,h),G.translate(-gt.scale*p,-yt.scale*y),K.transform(0,gt.scale,0,0,yt.scale,0,0),G.save(),K.dependencyTracker?.save(),this.clipBbox(K,p,y,A,S),K.baseTransform=ae(K.ctx),K.executeOperatorList(a),K.endDrawing(),K.dependencyTracker?.restore(),G.restore(),F||Q){const X=O.canvas;F&&(L=f),Q&&(P=g);const V=this.getSizeAndScale(L,this.ctx.canvas.width,N),C=this.getSizeAndScale(P,this.ctx.canvas.height,k),I=V.size,B=C.size,$=t.cachedCanvases.getCanvas("pattern-workaround",I,B),et=$.context,rt=F?Math.floor(v/f):0,st=Q?Math.floor(E/g):0;for(let ct=0;ct<=rt;ct++)for(let ot=0;ot<=st;ot++)et.drawImage(X,I*ct,B*ot,I,B,0,0,I,B);return{canvas:$.canvas,scaleX:V.scale,scaleY:C.scale,offsetX:p,offsetY:y}}return{canvas:O.canvas,scaleX:gt.scale,scaleY:yt.scale,offsetX:p,offsetY:y}}getSizeAndScale(t,e,s){const a=Math.max(Qd.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,a,o){const l=a-e,h=o-s;t.ctx.rect(e,s,l,h),ft.axialAlignedBoundingBox([e,s,a,o],ae(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,o=t.current;switch(e){case Xb.COLORED:const{fillStyle:l,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=h;break;case Xb.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new IE(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a,o){let l=s;a!==Be.SHADING&&(l=ft.transform(l,e.baseTransform),this.matrix&&(l=ft.transform(l,this.matrix)));const h=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function T_({src:u,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const h=Pe.isLittleEndian?4278190080:255,[d,f]=l?[o,h]:[h,o],g=s>>3,p=s&7,y=u.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<a;S++){for(const E=t+g;t<E;t++){const x=t<y?u[t]:255;e[A++]=x&128?f:d,e[A++]=x&64?f:d,e[A++]=x&32?f:d,e[A++]=x&16?f:d,e[A++]=x&8?f:d,e[A++]=x&4?f:d,e[A++]=x&2?f:d,e[A++]=x&1?f:d}if(p===0)continue;const v=t<y?u[t++]:255;for(let E=0;E<p;E++)e[A++]=v&1<<7-E?f:d}return{srcPos:t,destPos:A}}const $b=16,Kb=100,M_=15,Wb=10,on=16,Vh=new DOMMatrix,yn=new Float32Array(2),Da=new Float32Array([1/0,1/0,-1/0,-1/0]);function R_(u,t){if(u._removeMirroring)throw new Error("Context is already forwarding operations.");u.__originalSave=u.save,u.__originalRestore=u.restore,u.__originalRotate=u.rotate,u.__originalScale=u.scale,u.__originalTranslate=u.translate,u.__originalTransform=u.transform,u.__originalSetTransform=u.setTransform,u.__originalResetTransform=u.resetTransform,u.__originalClip=u.clip,u.__originalMoveTo=u.moveTo,u.__originalLineTo=u.lineTo,u.__originalBezierCurveTo=u.bezierCurveTo,u.__originalRect=u.rect,u.__originalClosePath=u.closePath,u.__originalBeginPath=u.beginPath,u._removeMirroring=()=>{u.save=u.__originalSave,u.restore=u.__originalRestore,u.rotate=u.__originalRotate,u.scale=u.__originalScale,u.translate=u.__originalTranslate,u.transform=u.__originalTransform,u.setTransform=u.__originalSetTransform,u.resetTransform=u.__originalResetTransform,u.clip=u.__originalClip,u.moveTo=u.__originalMoveTo,u.lineTo=u.__originalLineTo,u.bezierCurveTo=u.__originalBezierCurveTo,u.rect=u.__originalRect,u.closePath=u.__originalClosePath,u.beginPath=u.__originalBeginPath,delete u._removeMirroring},u.save=function(){t.save(),this.__originalSave()},u.restore=function(){t.restore(),this.__originalRestore()},u.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},u.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},u.transform=function(e,s,a,o,l,h){t.transform(e,s,a,o,l,h),this.__originalTransform(e,s,a,o,l,h)},u.setTransform=function(e,s,a,o,l,h){t.setTransform(e,s,a,o,l,h),this.__originalSetTransform(e,s,a,o,l,h)},u.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},u.rotate=function(e){t.rotate(e),this.__originalRotate(e)},u.clip=function(e){t.clip(e),this.__originalClip(e)},u.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},u.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},u.bezierCurveTo=function(e,s,a,o,l,h){t.bezierCurveTo(e,s,a,o,l,h),this.__originalBezierCurveTo(e,s,a,o,l,h)},u.rect=function(e,s,a,o){t.rect(e,s,a,o),this.__originalRect(e,s,a,o)},u.closePath=function(){t.closePath(),this.__originalClosePath()},u.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class D_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Bl(u,t,e,s,a,o,l,h,d,f){const[g,p,y,A,S,v]=ae(u);if(p===0&&y===0){const R=l*g+S,M=Math.round(R),N=h*A+v,k=Math.round(N),L=(l+d)*g+S,P=Math.abs(Math.round(L)-M)||1,F=(h+f)*A+v,Q=Math.abs(Math.round(F)-k)||1;return u.setTransform(Math.sign(g),0,0,Math.sign(A),M,k),u.drawImage(t,e,s,a,o,0,0,P,Q),u.setTransform(g,p,y,A,S,v),[P,Q]}if(g===0&&A===0){const R=h*y+S,M=Math.round(R),N=l*p+v,k=Math.round(N),L=(h+f)*y+S,P=Math.abs(Math.round(L)-M)||1,F=(l+d)*p+v,Q=Math.abs(Math.round(F)-k)||1;return u.setTransform(0,Math.sign(p),Math.sign(y),0,M,k),u.drawImage(t,e,s,a,o,0,0,Q,P),u.setTransform(g,p,y,A,S,v),[Q,P]}u.drawImage(t,e,s,a,o,l,h,d,f);const E=Math.hypot(g,p),x=Math.hypot(y,A);return[E*d,x*f]}class Qb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=wd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ke.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Da.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Be.FILL,e=null){const s=this.minMax.slice();if(t===Be.STROKE){e||Zt("Stroke bounding box must include transform."),ft.singularValueDecompose2dScale(e,yn);const a=yn[0]*this.lineWidth/2,o=yn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=ft.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Da,0)}getClippedPathBoundingBox(t=Be.FILL,e=null){return ft.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Zb(u,t){if(t instanceof ImageData){u.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%on,o=(e-a)/on,l=a===0?o:o+1,h=u.createImageData(s,on);let d=0,f;const g=t.data,p=h.data;let y,A,S,v;if(t.kind===Hl.GRAYSCALE_1BPP){const E=g.byteLength,x=new Uint32Array(p.buffer,0,p.byteLength>>2),R=x.length,M=s+7>>3,N=4294967295,k=Pe.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(S=y<o?on:a,f=0,A=0;A<S;A++){const L=E-d;let P=0;const F=L>M?s:L*8-7,Q=F&-8;let it=0,nt=0;for(;P<Q;P+=8)nt=g[d++],x[f++]=nt&128?N:k,x[f++]=nt&64?N:k,x[f++]=nt&32?N:k,x[f++]=nt&16?N:k,x[f++]=nt&8?N:k,x[f++]=nt&4?N:k,x[f++]=nt&2?N:k,x[f++]=nt&1?N:k;for(;P<F;P++)it===0&&(nt=g[d++],it=128),x[f++]=nt&it?N:k,it>>=1}for(;f<R;)x[f++]=0;u.putImageData(h,0,y*on)}}else if(t.kind===Hl.RGBA_32BPP){for(A=0,v=s*on*4,y=0;y<o;y++)p.set(g.subarray(d,d+v)),d+=v,u.putImageData(h,0,A),A+=on;y<l&&(v=s*a*4,p.set(g.subarray(d,d+v)),u.putImageData(h,0,A))}else if(t.kind===Hl.RGB_24BPP)for(S=on,v=s*S,y=0;y<l;y++){for(y>=o&&(S=a,v=s*S),f=0,A=v;A--;)p[f++]=g[d++],p[f++]=g[d++],p[f++]=g[d++],p[f++]=255;u.putImageData(h,0,y*on)}else throw new Error(`bad image kind: ${t.kind}`)}function Jb(u,t){if(t.bitmap){u.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%on,o=(e-a)/on,l=a===0?o:o+1,h=u.createImageData(s,on);let d=0;const f=t.data,g=h.data;for(let p=0;p<l;p++){const y=p<o?on:a;({srcPos:d}=T_({src:f,srcPos:d,dest:g,width:s,height:y,nonBlackColor:0})),u.putImageData(h,0,p*on)}}function jr(u,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)u[s]!==void 0&&(t[s]=u[s]);u.setLineDash!==void 0&&(t.setLineDash(u.getLineDash()),t.lineDashOffset=u.lineDashOffset)}function Pl(u){u.strokeStyle=u.fillStyle="#000000",u.fillRule="nonzero",u.globalAlpha=1,u.lineWidth=1,u.lineCap="butt",u.lineJoin="miter",u.miterLimit=10,u.globalCompositeOperation="source-over",u.font="10px sans-serif",u.setLineDash!==void 0&&(u.setLineDash([]),u.lineDashOffset=0);const{filter:t}=u;t!=="none"&&t!==""&&(u.filter="none")}function ty(u,t){if(t)return!0;ft.singularValueDecompose2dScale(u,yn);const e=Math.fround(Jn.pixelRatio*za.PDF_TO_CSS_UNITS);return yn[0]<=e&&yn[1]<=e}const N_=["butt","round","square"],k_=["miter","round","bevel"],O_={},ey={};class Ba{constructor(t,e,s,a,o,{optionalContentConfig:l,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new Qb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=l,this.cachedCanvases=new D_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=h,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ae(this.compositeCtx))}this.ctx.save(),Pl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ae(this.ctx)}executeOperatorList(t,e,s,a,o){const l=t.argsArray,h=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const g=f-d>Wb&&typeof s=="function",p=g?Date.now()+M_:0;let y=0;const A=this.commonObjs,S=this.objs;let v,E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(v=h[d],E=l[d]??null,v!==Wr.dependency)E===null?this[v](d):this[v](d,...E);else for(const x of E){this.dependencyTracker?.recordNamedData(x,d);const R=x.startsWith("g_")?A:S;if(!R.has(x))return R.get(x,s),d}if(d++,d===f)return d;if(g&&++y>Wb){if(Date.now()>p)return s(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),h=s,d=a,f="prescale1",g,p;for(;o>2&&h>1||l>2&&d>1;){let y=h,A=d;o>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/y),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),g=this.cachedCanvases.getCanvas(f,y,A),p=g.context,p.clearRect(0,0,y,A),p.drawImage(t,0,0,h,d,0,0,y,A),t=g.canvas,h=y,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const s=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,h=this.current.patternFill,d=ae(s);let f,g,p,y;if((e.bitmap||e.data)&&e.count>1){const it=e.bitmap||e.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(it),f||(f=new Map,this._cachedBitmapsMap.set(it,f));const nt=f.get(g);if(nt&&!h){const lt=Math.round(Math.min(d[0],d[2])+d[4]),ht=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Dn.transformAndFill),{canvas:nt,offsetX:lt,offsetY:ht}}p=nt}p||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),Jb(y.context,e));let A=ft.transform(d,[1/a,0,0,-1/o,0,0]);A=ft.transform(A,[1,0,0,1,0,-o]);const S=Da.slice();ft.axialAlignedBoundingBox([0,0,a,o],A,S);const[v,E,x,R]=S,M=Math.round(x-v)||1,N=Math.round(R-E)||1,k=this.cachedCanvases.getCanvas("fillCanvas",M,N),L=k.context,P=v,F=E;L.translate(-P,-F),L.transform(...A),p||(p=this._scaleImage(y.canvas,$n(L)),p=p.img,f&&h&&f.set(g,p)),L.imageSmoothingEnabled=ty(ae(L),e.interpolate),Bl(L,p,0,0,p.width,p.height,0,0,a,o),L.globalCompositeOperation="source-in";const Q=ft.transform($n(L),[1,0,0,1,-P,-F]);return L.fillStyle=h?l.getPattern(s,this,Q,Be.FILL,t):l,L.fillRect(0,0,a,o),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,k.canvas)),this.dependencyTracker?.recordDependencies(t,Dn.transformAndFill),{canvas:k.canvas,offsetX:Math.round(P),offsetY:Math.round(F)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=N_[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=k_[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,a]of e)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),jr(this.suspendedCtx,l),R_(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),jr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const o=a[0],l=a[1],h=a[2]-o,d=a[3]-l;h===0||d===0||(this.genericComposeSMask(e.context,s,h,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,o,l,h,d,f,g,p){let y=t.canvas,A=d-g,S=f-p;if(l)if(A<0||S<0||A+s>y.width||S+a>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,a),x=E.context;x.drawImage(y,-A,-S),x.globalCompositeOperation="destination-atop",x.fillStyle=l,x.fillRect(0,0,s,a),x.globalCompositeOperation="source-over",y=E.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(A,S,s,a),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,S,s,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const v=new Path2D;v.rect(d,f,s,a),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(y,A,S,s,a,d,f,s,a),e.restore()}save(t){this.inSMaskMode&&jr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&jr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,o,l,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,a,o,l,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Wr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=s[0]=X0(o)),ft.axialAlignedBoundingBox(a,ae(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,$n(a),Be.STROKE,t),l){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Dn.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Be.STROKE,ae(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let h=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,$n(a),Be.FILL,t),f){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Dn.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Dn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=O_}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=ey}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:h,y:d,fontSize:f,path:g}of e)g&&a.addPath(g,new DOMMatrix(l).preMultiplySelf(o).translate(h,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||wd,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&_t("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=s;s<$b?g=$b:s>Kb&&(g=Kb),this.current.fontSizeScale=s/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a}paintChar(t,e,s,a,o,l){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,p=d.fontSize/d.fontSizeScale,y=g&ke.FILL_STROKE_MASK,A=!!(g&ke.ADD_TO_PATH_FLAG),S=d.patternFill&&!f.missingFile,v=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||A||S||v)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,e)),E&&(f.disableFontFace||S||v)){h.save(),h.translate(s,a),h.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(t,h,f);let x;if(y===ke.FILL||y===ke.FILL_STROKE)if(o){x=h.getTransform(),h.setTransform(...o);const R=this.#i(E,x,o);h.fill(R)}else h.fill(E);if(y===ke.STROKE||y===ke.FILL_STROKE)if(l){x||=h.getTransform(),h.setTransform(...l);const{a:R,b:M,c:N,d:k}=x,L=ft.inverseTransform(l),P=ft.transform([R,M,N,k,0,0],L);ft.singularValueDecompose2dScale(P,yn),h.lineWidth*=Math.max(yn[0],yn[1])/p,h.stroke(this.#i(E,x,l))}else h.lineWidth/=p,h.stroke(E);h.restore()}else(y===ke.FILL||y===ke.FILL_STROKE)&&(h.fillText(e,s,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,p,s,a,()=>h.measureText(e))),(y===ke.STROKE||y===ke.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,p,s,a,()=>h.measureText(e)).recordDependencies(t,Dn.stroke),h.strokeText(e,s,a));A&&((this.pendingTextPaths||=[]).push({transform:ae(h),x:s,y:a,fontSize:p,path:E}),this.dependencyTracker?.recordCharacterBBox(t,h,f,p,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return Ct(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Dn.showText).resetBBox(t),this.current.textRenderingMode&ke.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,h=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,g=s.fontDirection,p=s.textHScale*g,y=e.length,A=a.vertical,S=A?1:-1,v=a.defaultVMetrics,E=o*s.fontMatrix[0],x=s.textRenderingMode===ke.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),g>0?l.scale(p,-1):l.scale(p,1);let R,M;if(s.patternFill){l.save();const F=s.fillColor.getPattern(l,this,$n(l),Be.FILL,t);R=ae(l),l.restore(),l.fillStyle=F}if(s.patternStroke){l.save();const F=s.strokeColor.getPattern(l,this,$n(l),Be.STROKE,t);M=ae(l),l.restore(),l.strokeStyle=F}let N=s.lineWidth;const k=s.textMatrixScale;if(k===0||N===0){const F=s.textRenderingMode&ke.FILL_STROKE_MASK;(F===ke.STROKE||F===ke.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=k;if(h!==1&&(l.scale(h,h),N/=h),l.lineWidth=N,a.isInvalidPDFjsFont){const F=[];let Q=0;for(const nt of e)F.push(nt.unicode),Q+=nt.width;const it=F.join("");if(l.fillText(it,0,0),this.dependencyTracker!==null){const nt=l.measureText(it);this.dependencyTracker.recordBBox(t,this.ctx,-nt.actualBoundingBoxLeft,nt.actualBoundingBoxRight,-nt.actualBoundingBoxAscent,nt.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=Q*E*p,l.restore(),this.compose();return}let L=0,P;for(P=0;P<y;++P){const F=e[P];if(typeof F=="number"){L+=S*F*o/1e3;continue}let Q=!1;const it=(F.isSpace?f:0)+d,nt=F.fontChar,lt=F.accent;let ht,gt,yt=F.width;if(A){const K=F.vmetric||v,X=-(F.vmetric?K[1]:yt*.5)*E,V=K[2]*E;yt=K?-K[0]:yt,ht=X/h,gt=(L+V)/h}else ht=L/h,gt=0;let O;if(a.remeasure&&yt>0){O=l.measureText(nt);const K=O.width*1e3/o*h;if(yt<K&&this.isFontSubpixelAAEnabled){const X=yt/K;Q=!0,l.save(),l.scale(X,1),ht/=X}else yt!==K&&(ht+=(yt-K)/2e3*o/h)}if(this.contentVisible&&(F.isInFont||a.missingFile)){if(x&&!lt)l.fillText(nt,ht,gt),this.dependencyTracker?.recordCharacterBBox(t,l,O?{bbox:null}:a,o/h,ht,gt,()=>O??l.measureText(nt));else if(this.paintChar(t,nt,ht,gt,R,M),lt){const K=ht+o*lt.offset.x/h,X=gt-o*lt.offset.y/h;this.paintChar(t,lt.fontChar,K,X,R,M)}}const G=A?yt*E-it*g:yt*E+it*g;L+=G,Q&&l.restore()}A?s.y-=L:s.x+=L*p,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,h=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,p=a.textHScale*h,y=a.fontMatrix||wd,A=e.length,S=a.textRenderingMode===ke.INVISIBLE;let v,E,x,R;if(S||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(p,h);const M=this.dependencyTracker;for(this.dependencyTracker=M?new Wl(M,t):null,v=0;v<A;++v){if(E=e[v],typeof E=="number"){R=d*E*l/1e3,this.ctx.translate(R,0),a.x+=R*p;continue}const N=(E.isSpace?g:0)+f,k=o.charProcOperatorList[E.operatorListId];k?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...y),this.executeOperatorList(k),this.restore()):_t(`Type3 character "${E.operatorListId}" is not available.`);const L=[E.width,0];ft.applyTransform(L,y),x=L[0]*l+N,s.translate(x,0),a.x+=x*p}s.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,a,o,l,h){const d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,h).recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const a=this.baseTransform||ae(this.ctx),o={createCanvasGraphics:(l,h)=>new Ba(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Wl(this.dependencyTracker,h,!0):null)};s=new Qd(e,this.ctx,o,a)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=C_(this.getObject(t,e)),this.cachedPatterns.set(e,a)),s&&(a.matrix=s),a}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,e);s.fillStyle=a.getPattern(s,this,$n(s),Be.SHADING,t);const o=$n(s);if(o){const{width:l,height:h}=s.canvas,d=Da.slice();ft.axialAlignedBoundingBox([0,0,l,h],o,d);const[f,g,p,y]=d;this.ctx.fillRect(f,g,p-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Dn.transform).recordDependencies(t,Dn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Zt("Should not call beginInlineImage")}beginImageData(){Zt("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ae(this.ctx),s)){ft.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,h]=s,d=new Path2D;d.rect(a,o,l-a,h-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||oc("TODO: Support non-isolated groups."),e.knockout&&_t("Knockout groups not supported.");const a=ae(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Da.slice();ft.axialAlignedBoundingBox(e.bbox,ae(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=ft.intersect(o,l)||[0,0,0,0];const h=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-h,1),g=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,f,g),A=y.context;A.translate(-h,-d),A.transform(...a);let S=new Path2D;const[v,E,x,R]=e.bbox;if(S.rect(v,E,x-v,R-E),e.matrix){const M=new Path2D;M.addPath(S,new DOMMatrix(e.matrix)),S=M}A.clip(S),e.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(h,d),s.save()),jr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ae(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Da.slice();ft.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,a,o,l){if(this.#t(),Pl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const h=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=h,s[3]=d,ft.singularValueDecompose2dScale(ae(this.ctx),yn);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),p=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,p);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(yn[0],0,0,-yn[1],0,d*yn[1]),Pl(this.ctx)}else{Pl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],h,d),this.ctx.clip(f)}}this.current=new Qb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,a=0,o=0,l,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ae(d);d.transform(s,a,o,l,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let p=0,y=h.length;p<y;p+=2){const A=ft.transform(f,[s,a,o,l,h[p],h[p+1]]);d.drawImage(g.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+g.canvas.width,A[5],A[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Dn.transformAndFill);for(const l of e){const{data:h,width:d,height:f,transform:g}=l,p=this.cachedCanvases.getCanvas("maskCanvas",d,f),y=p.context;y.save();const A=this.getObject(t,h,l);Jb(y,A),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,$n(s),Be.FILL,t):a,y.fillRect(0,0,d,f),y.restore(),s.save(),s.transform(...g),s.scale(1,-1),Bl(s,p.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){_t("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){_t("Dependent image isn't ready yet");return}const h=l.width,d=l.height,f=[];for(let g=0,p=o.length;g<p;g+=2)f.push({transform:[s,0,0,a,o[g],o[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Zb(g,e),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,$n(o));o.imageSmoothingEnabled=ty(ae(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,Dn.imageXObject).recordOperation(t),Bl(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,h).context;Zb(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),Bl(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Dn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===ey?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ae(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:o}=this.ctx.getTransform();let l,h;if(s===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=h=1/d;else{const g=d*t;l=h=g<1?1/g:1}else if(t===0)l=1/d,h=1/f;else{const g=d*t,p=f*t;l=g<1?1/g:1,h=p<1?1/p:1}}else{const d=Math.abs(e*o-s*a),f=Math.hypot(e,s),g=Math.hypot(a,o);if(t===0)l=g/d,h=f/d;else{const p=t*d;l=g>p?g/p:1,h=f>p?f/p:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const h=s.getLineDash();e&&s.save(),s.scale(o,l),Vh.a=1/o,Vh.d=1/l;const d=new Path2D;if(d.addPath(t,Vh),h.length>0){const f=Math.max(o,l);s.setLineDash(h.map(g=>g/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const u in Wr)Ba.prototype[u]!==void 0&&(Ba.prototype[Wr[u]]=Ba.prototype[u]);class Pa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class L_{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ta=Symbol("INTERNAL");class B_{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&bn.DISPLAY),this.#e=!!(t&bn.PRINT),this.name=e,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==Ta&&Zt("Internal method `_setVisible` called."),this.#i=s,this.#n=e}}class P_{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=bn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new B_(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Ta,!1);for(const s of t.on)this.#e.get(s)._setVisible(Ta,!0);for(const s of t.off)this.#e.get(s)._setVisible(Ta,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return _t(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return oc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(_t(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return _t(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return _t(`Unknown optional content policy ${t.policy}.`),!0}return _t(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const a=this.#e.get(t);if(!a){_t(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Ta,!1,!0);a._setVisible(Ta,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new K0;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class z_{constructor(t,{disableRange:e=!1,disableStream:s=!1}){jt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=h,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});jt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){jt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new j_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new I_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class j_{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Vd(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class I_{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function F_(u){let t=!0,e=s("filename\\*","i").exec(u);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=f(g),o(g)}if(e=l(u),e){const g=f(e);return o(g)}if(e=s("filename","i").exec(u),e){e=e[1];let g=h(e);return g=f(g),o(g)}function s(g,p){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function a(g,p){if(g){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(g,{fatal:!0}),A=Jr(p);p=y.decode(A),t=!1}catch{}}return p}function o(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function l(g){const p=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(g))!==null;){let[,v,E,x]=y;if(v=parseInt(v,10),v in p){if(v===0)break;continue}p[v]=[E,x]}const S=[];for(let v=0;v<p.length&&v in p;++v){let[E,x]=p[v];x=h(x),E&&(x=unescape(x),v===0&&(x=d(x))),S.push(x)}return S.join("")}function h(g){if(g.startsWith('"')){const p=g.slice(1).split('\\"');for(let y=0;y<p.length;++y){const A=p[y].indexOf('"');A!==-1&&(p[y]=p[y].slice(0,A),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}g=p.join('"')}return g}function d(g){const p=g.indexOf("'");if(p===-1)return g;const y=g.slice(0,p),S=g.slice(p+1).replace(/^[^']*'/,"");return a(y,S)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,E){return String.fromCharCode(parseInt(E,16))}),a(y,S);try{S=atob(S)}catch{}return a(y,S)})}return""}function nv(u,t){const e=new Headers;if(!u||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function uc(u){return URL.parse(u)?.origin??null}function iv({responseHeaders:u,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(u.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||s||!t||u.get("Accept-Ranges")!=="bytes"||(u.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function sv(u){const t=u.get("Content-Disposition");if(t){let e=F_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Vd(e))return e}return null}function so(u,t){return new Kl(`Unexpected server response (${u}) while retrieving PDF "${t}".`,u,u===404||u===0&&t.startsWith("file:"))}function av(u){return u===200||u===206}function rv(u,t,e){return{method:"GET",headers:u,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ov(u){return u instanceof Uint8Array?u.buffer:u instanceof ArrayBuffer?u:(_t(`getArrayBuffer - unexpected data format: ${u}`),new Uint8Array(u).buffer)}class U_{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=nv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return jt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new H_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new G_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class H_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,rv(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=uc(o.url),!av(o.status))throw so(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:h,suggestedLength:d}=iv({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=sv(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new es("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:ov(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class G_{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const l=a.url;fetch(l,rv(o,this._withCredentials,this._abortController)).then(h=>{const d=uc(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!av(h.status))throw so(h.status,l);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:ov(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Yh=200,Xh=206;function q_(u){const t=u.response;return typeof t!="string"?t:Jr(t).buffer}class V_{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=nv(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Xh):a.expectedStatus=Yh,e.responseType="arraybuffer",jt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||Yh;if(!(o===Yh&&s.expectedStatus===Xh)&&o!==s.expectedStatus){s.onError(a.status);return}const h=q_(a);if(o===Xh){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:h}):(_t('Missing or invalid "Content-Range" header.'),s.onError(0))}else h?s.onDone({begin:0,chunk:h}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Y_{constructor(t){this._source=t,this._manager=new V_(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return jt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new X_(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new $_(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class X_{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=uc(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=iv({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=sv(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=so(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $_{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=uc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=so(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const K_=/^[a-z][a-z0-9\-+.]+:/i;function W_(u){if(K_.test(u))return new URL(u);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(u))}class Q_{constructor(t){this.source=t,this.url=W_(t.url),jt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return jt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Z_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new J_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Z_{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=so(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new es("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class J_{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ir=Symbol("INITIAL_DATA");class lv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ir}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const s=this.#t[t];if(!s||s.data===Ir)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ir}delete(t){const e=this.#t[t];return!e||e.data===Ir?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ir&&(yield[t,e])}}}const tC=1e5,ny=30;class Ve{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#_=new WeakMap;static#x=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*Jn.pixelRatio,this.#d=s.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:h}=s.rawDims;this.#b=[1,0,0,-1,-l,h+o],this.#o=a,this.#s=o,Ve.#R(),Ms(e,s),this.#t.promise.finally(()=>{Ve.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Pe.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),Ve.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*Jn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ms(this.#l,{rotation:a})),s!==this.#h){e?.(),this.#h=s;const o={div:null,properties:null,ctx:Ve.#D(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const t=new es("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#i)return;this.#a.ctx??=Ve.#D(this.#r);const e=this.#u,s=this.#g;for(const a of t){if(e.length>tC){_t("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#A(a)}}#A(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=ft.transform(this.#b,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let h=this.#n&&l.fontSubstitution||l.fontFamily;h=Ve.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*Ve.#z(h,l,this.#r);let g,p;o===0?(g=a[4],p=a[5]-f):(g=a[4]+f*Math.sin(o),p=a[5]-f*Math.cos(o));const y="calc(var(--total-scale-factor) *",A=e.style;this.#e===this.#l?(A.left=`${(100*g/this.#o).toFixed(2)}%`,A.top=`${(100*p/this.#s).toFixed(2)}%`):(A.left=`${y}${g.toFixed(2)}px)`,A.top=`${y}${p.toFixed(2)}px)`),A.fontSize=`${y}${(Ve.#x*d).toFixed(2)}px)`,A.fontFamily=h,s.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);v!==E&&Math.max(v,E)/Math.min(v,E)>1.5&&(S=!0)}if(S&&(s.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,s),this.#a.div=e,this.#a.properties=s,this.#E(this.#a),s.hasText&&this.#e.append(e),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),this.#e.append(v)}}#E(t){const{div:e,properties:s,ctx:a}=t,{style:o}=e;let l="";if(Ve.#x>1&&(l=`scale(${1/Ve.#x})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:f}=s;Ve.#M(a,f*this.#h,h);const{width:g}=a.measureText(e.textContent);g>0&&(l=`scaleX(${d*this.#h/g}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#D(t=null){let e=this.#y.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#_.set(e,{size:0,family:""})}return e}static#M(t,e,s){const a=this.#_.get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)}static#R(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#z(t,e,s){const a=this.#v.get(t);if(a)return a;const o=this.#D(s);o.canvas.width=o.canvas.height=ny,this.#M(o,ny,t);const l=o.measureText(""),h=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return h?f=h/(h+d):(Pe.platform.isFirefox&&_t("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const eC=100;function cv(u={}){typeof u=="string"||u instanceof URL?u={url:u}:(u instanceof ArrayBuffer||ArrayBuffer.isView(u))&&(u={data:u});const t=new Zd,{docId:e}=t,s=u.url?l_(u.url):null,a=u.data?c_(u.data):null,o=u.httpHeaders||null,l=u.withCredentials===!0,h=u.password??null,d=u.range instanceof uv?u.range:null,f=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:2**16;let g=u.worker instanceof Le?u.worker:null;const p=u.verbosity,y=typeof u.docBaseUrl=="string"&&!lc(u.docBaseUrl)?u.docBaseUrl:null,A=Nl(u.cMapUrl),S=u.cMapPacked!==!1,v=u.CMapReaderFactory||(Ye?b_:Hb),E=Nl(u.iccUrl),x=Nl(u.standardFontDataUrl),R=u.StandardFontDataFactory||(Ye?y_:Gb),M=Nl(u.wasmUrl),N=u.WasmFactory||(Ye?v_:qb),k=u.stopAtErrors!==!0,L=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,P=u.isEvalSupported!==!1,F=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!Ye,Q=typeof u.isImageDecoderSupported=="boolean"?u.isImageDecoderSupported:!Ye&&(Pe.platform.isFirefox||!globalThis.chrome),it=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,nt=typeof u.disableFontFace=="boolean"?u.disableFontFace:Ye,lt=u.fontExtraProperties===!0,ht=u.enableXfa===!0,gt=u.ownerDocument||globalThis.document,yt=u.disableRange===!0,O=u.disableStream===!0,G=u.disableAutoFetch===!0,K=u.pdfBug===!0,X=u.CanvasFactory||(Ye?g_:f_),V=u.FilterFactory||(Ye?p_:m_),C=u.enableHWA===!0,I=u.useWasm!==!1,B=d?d.length:u.length??NaN,$=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!Ye&&!nt,et=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:!!(v===Hb&&R===Gb&&N===qb&&A&&x&&M&&Gr(A,document.baseURI)&&Gr(x,document.baseURI)&&Gr(M,document.baseURI)),rt=null;PE(p);const st={canvasFactory:new X({ownerDocument:gt,enableHWA:C}),filterFactory:new V({docId:e,ownerDocument:gt}),cMapReaderFactory:et?null:new v({baseUrl:A,isCompressed:S}),standardFontDataFactory:et?null:new R({baseUrl:x}),wasmFactory:et?null:new N({baseUrl:M})};g||(g=Le.create({verbosity:p,port:Pa.workerPort}),t._worker=g);const ct={docId:e,apiVersion:"5.4.449",data:a,password:h,disableAutoFetch:G,rangeChunkSize:f,length:B,docBaseUrl:y,enableXfa:ht,evaluatorOptions:{maxImageSize:L,disableFontFace:nt,ignoreErrors:k,isEvalSupported:P,isOffscreenCanvasSupported:F,isImageDecoderSupported:Q,canvasMaxAreaInBytes:it,fontExtraProperties:lt,useSystemFonts:$,useWasm:I,useWorkerFetch:et,cMapUrl:A,iccUrl:E,standardFontDataUrl:x,wasmUrl:M}},ot={ownerDocument:gt,pdfBug:K,styleElement:rt,loadingParams:{disableAutoFetch:G,enableXfa:ht}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const vt=g.messageHandler.sendWithPromise("GetDocRequest",ct,a?[a.buffer]:null);let Rt;if(d)Rt=new z_(d,{disableRange:yt,disableStream:O});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const It=Gr(s)?U_:Ye?Q_:Y_;Rt=new It({url:s,length:B,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:yt,disableStream:O})}return vt.then(It=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const fe=new qr(e,It,g.port),ee=new sC(fe,t,Rt,ot,st,C);t._transport=ee,fe.send("Ready",null)})}).catch(t._capability.reject),t}class Zd{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Zd.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class uv{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#n)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class nC{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class iC{#t=!1;constructor(t,e,s,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new Bb:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new lv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new eo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:a="display",annotationMode:o=Ji.ENABLE,transform:l=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:p=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:S=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(a,o,p,y),{renderingIntent:E,cacheKey:x}=v;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let R=this._intentStates.get(x);R||(R=Object.create(null),this._intentStates.set(x,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const M=!!(E&bn.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(A||N),L=Q=>{if(R.renderTasks.delete(P),k){const it=P.gfx?.dependencyTracker.take();it&&(P.stepper&&P.stepper.setOperatorBBoxes(it,P.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=it))}M&&(this.#t=!0),this.#e(),Q?(P.capability.reject(Q),this._abortOperatorList({intentState:R,reason:Q instanceof Error?Q:new Error(Q)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Na({callback:L,params:{canvas:e,canvasContext:t,dependencyTracker:k?new w_(e,R.operatorList.length,N):null,viewport:s,transform:l,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:S});(R.renderTasks||=new Set).add(P);const F=P.task;return Promise.all([R.displayReadyCapability.promise,d]).then(([Q,it])=>{if(this.destroyed){L();return}if(this._stats?.time("Rendering"),!(it.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:Q,optionalContentConfig:it}),P.operatorListChanged()}).catch(L),F}getOperatorList({intent:t="display",annotationMode:e=Ji.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,s,a,!0);let h=this._intentStates.get(l.cacheKey);h||(h=Object.create(null),this._intentStates.set(l.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Qr.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:f}){if(f){s(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const l=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Bb),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:p,done:y})=>{if(y){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,f),g())},p=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const y of f.renderTasks)y.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(p);else if(f.opListReadCapability)f.opListReadCapability.reject(p);else throw p}})};g()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof qd){let a=eC;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new es(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}class Le{#t=Promise.withResolvers();#e=null;#i=null;#n=null;static#r=0;static#a=!1;static#s=new WeakMap;static{Ye&&(this.#a=!0,Pa.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},this._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},this.fromPort=t=>{if(KE("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(t)}}constructor({name:t=null,port:e=null,verbosity:s=zE()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(Le.#s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");Le.#s.set(e,this),this.#c(e)}else this.#l()}get promise(){return this.#t.promise}#o(){this.#t.resolve(),this.#e.send("configure",{verbosity:this.verbosity})}get port(){return this.#i}get messageHandler(){return this.#e}#c(t){this.#i=t,this.#e=new qr("main","worker",t),this.#e.on("ready",()=>{}),this.#o()}#l(){if(Le.#a||Le.#h){this.#d();return}let{workerSrc:t}=Le;try{Le._isSameOrigin(window.location,t)||(t=Le._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new qr("main","worker",e),a=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?this.#t.reject(new Error("Worker was destroyed")):this.#d()},o=new AbortController;e.addEventListener("error",()=>{this.#n||a()},{signal:o.signal}),s.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}this.#e=s,this.#i=e,this.#n=e,this.#o()}),s.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{this.#d()}});const l=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};l();return}catch{oc("The worker has been disabled.")}this.#d()}#d(){Le.#a||(_t("Setting up fake worker."),Le.#a=!0),Le._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#t.reject(new Error("Worker was destroyed"));return}const e=new d_;this.#i=e;const s=`fake${Le.#r++}`,a=new qr(s+"_worker",s,e);t.setup(a,e),this.#e=new qr(s,s+"_worker",e),this.#o()}).catch(t=>{this.#t.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this.#n?.terminate(),this.#n=null,Le.#s.delete(this.#i),this.#i=null,this.#e?.destroy(),this.#e=null}static create(t){const e=this.#s.get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Le(t)}static get workerSrc(){if(Pa.workerSrc)return Pa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#h(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>this.#h?this.#h:(await import(this.workerSrc)).WorkerMessageHandler)())}}class sC{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,s,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new lv,this.fontLoader=new r_({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#a(t,e=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Ct(this,"annotationStorage",new $d)}getRenderingIntent(t,e=Ji.ENABLE,s=null,a=!1,o=!1){let l=bn.DISPLAY,h=Td;switch(t){case"any":l=bn.ANY;break;case"display":break;case"print":l=bn.PRINT;break;default:_t(`getRenderingIntent - invalid intent: ${t}`)}const d=l&bn.PRINT&&s instanceof W0?s:this.annotationStorage;switch(e){case Ji.DISABLE:l+=bn.ANNOTATIONS_DISABLE;break;case Ji.ENABLE:break;case Ji.ENABLE_FORMS:l+=bn.ANNOTATIONS_FORMS;break;case Ji.ENABLE_STORAGE:l+=bn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:_t(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=bn.IS_EDITING),o&&(l+=bn.OPLIST);const{ids:f,hash:g}=d.modifiedIds,p=[l,h.hash,g];return{renderingIntent:l,cacheKey:p.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Ve.cleanup(),this._networkStream?.cancelAllRequests(new es("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{jt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}jt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{jt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:h}){if(h){a.close();return}jt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new nC(s,this))}),t.on("DocException",s=>{e._capability.reject(an(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw an(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const p=o.error;_t(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const l=new Wt(o),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,y)=>globalThis.FontInspector.fontAdded(p,y):null,d=new o_(l,h,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;jt(f,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,y]of p.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(s,o);break;case"Pattern":const g=new _e(o);this.commonObjs.resolve(s,g.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(s)){if(h._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&_t("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#i.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new iC(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,a),a}getPageIndex(t){return Md(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new P_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new L_(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Ve.cleanup()}}cachedPageNumber(t){if(!Md(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class aC{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Na{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:p=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:S=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new aC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Na.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Na.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ba(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Na.#e.delete(this._canvas),t||=new qd(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Na.#e.delete(this._canvas),this.callback())))}}const hv="5.4.449",rC="f44e5f0e6";class Nn{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return Ct(this,"_keyboardManager",new io([[["Escape","mac+Escape"],Nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Nn.prototype._moveToPrevious],[["Home","mac+Home"],Nn.prototype._moveToBeginning],[["End","mac+End"],Nn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Nn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",kn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",Nn.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:zt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastElementChild?.focus()}#g(t){Nn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#m){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Zr{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Zr.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Zr.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function iy(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}function Fr(u){return Math.max(0,Math.min(255,255*u))}class sy{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Fr(t),[t,t,t]}static G_HTML([t]){const e=iy(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Fr)}static RGB_HTML(t){return`#${t.map(iy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[Fr(1-Math.min(1,t+a)),Fr(1-Math.min(1,s+a)),Fr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,o=1-e,l=1-s,h=Math.min(a,o,l);return["CMYK",a,o,l,h]}}class oC{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Zt("Abstract method `_createSVG` called.")}}class Ql extends oC{_createSVG(t){return document.createElementNS(wi,t)}}const lC=9,Rs=new WeakSet,cC=new Date().getTimezoneOffset()*60*1e3;class $h{static create(t){switch(t.data.annotationType){case ve.LINK:return new Jd(t);case ve.TEXT:return new hC(t);case ve.WIDGET:switch(t.data.fieldType){case"Tx":return new dC(t);case"Btn":return t.data.radioButton?new dv(t):t.data.checkBox?new mC(t):new pC(t);case"Ch":return new gC(t);case"Sig":return new fC(t)}return new ks(t);case ve.POPUP:return new Nd(t);case ve.FREETEXT:return new fv(t);case ve.LINE:return new yC(t);case ve.SQUARE:return new vC(t);case ve.CIRCLE:return new AC(t);case ve.POLYLINE:return new mv(t);case ve.CARET:return new SC(t);case ve.INK:return new tf(t);case ve.POLYGON:return new wC(t);case ve.HIGHLIGHT:return new pv(t);case ve.UNDERLINE:return new xC(t);case ve.SQUIGGLY:return new EC(t);case ve.STRIKEOUT:return new _C(t);case ve.STAMP:return new gv(t);case ve.FILEATTACHMENT:return new CC(t);default:return new re(t)}}}class re{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return re._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>l?(l=e[h+1],o=e[h+2]):e[h+1]===l&&(o=Math.max(o,e[h+2]));return[o,l]}if(s?.length>=1){for(const h of s)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>l?(l=h[d+1],o=h[d]):h[d+1]===l&&(o=Math.max(o,h[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Kr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${Kr}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:h,pageY:d}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof ks)&&!(this instanceof Jd)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Nd){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,o),o}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(v>0||E>0){const R=`calc(${v}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=R}else if(this instanceof dv){const R=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=R}switch(e.borderStyle.style){case Ca.SOLID:l.borderStyle="solid";break;case Ca.DASHED:l.borderStyle="dashed";break;case Ca.BEVELED:_t("Unimplemented border style: beveled");break;case Ca.INSET:_t("Unimplemented border style: inset");break;case Ca.UNDERLINE:l.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(this.#e=!0,l.borderColor=ft.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):l.borderWidth=0}const f=ft.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:g,pageHeight:p,pageX:y,pageY:A}=a.rawDims;l.left=`${100*(f[0]-y)/g}%`,l.top=`${100*(f[1]-A)/p}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(l.width=`${100*h/g}%`,l.height=`${100*d/p}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const o=a.detail[e],l=o[0],h=o.slice(1);a.target.style[s]=sy[`${l}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[s]:sy[`${l}_rgb`](h)})};return Ct(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||s[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,o]of Object.entries(e)){const l=s[a];if(l){const h={detail:{[a]:o},target:t};l(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,o]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,E,x,R]=t.subarray(2,6);if(a===v&&o===E&&e===x&&s===R)return}const{style:l}=this.container;let h;if(this.#e){const{borderColor:v,borderWidth:E}=l;l.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-s,{svgFactory:g}=this,p=g.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const y=g.createElement("defs");p.append(y);const A=g.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let v=2,E=t.length;v<E;v+=8){const x=t[v],R=t[v+1],M=t[v+2],N=t[v+3],k=g.createElement("rect"),L=(M-e)/d,P=(o-R)/f,F=(x-M)/d,Q=(R-N)/f;k.setAttribute("x",L),k.setAttribute("y",P),k.setAttribute("width",F),k.setAttribute("height",Q),A.append(k),h?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${P}" width="${F}" height="${Q}"/>`)}this.#e&&(h.push("</g></svg>')"),l.backgroundImage=h.join("")),this.container.append(p),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let s,a;t?(s={str:t.text},a=t.date):(s=e.contentsObj,a=e.modificationDate),this.#i=new Nd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:h}of a){if(o===-1||l===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Rs.has(f)){_t(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&Rs.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class uC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Jd extends re{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=s,this.container.append(s)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){_t('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=e,h=[];if(a.length!==0||o.length!==0){const g=new Set(o);for(const p of a){const y=this._fieldObjects[p]||[];for(const{id:A}of y)g.add(A)}for(const p of Object.values(this._fieldObjects))for(const y of p)g.has(y.id)===l&&h.push(y)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:p}=g;switch(f.push(p),g.type){case"text":{const A=g.defaultValue||"";d.setValue(p,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;d.setValue(p,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";d.setValue(p,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!Rs.has(y)){_t(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class hC extends re{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class ks extends re{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Pe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ft.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||lC,o=t.style;let l;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(Fh*a))||1,p=f/g;l=Math.min(a,d(p/Fh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);l=Math.min(a,d(f/Fh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=ft.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class dC extends ks{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Rs.add(s),this.contentElement=s,s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:p}=this.data,y=!!g&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(s,"value",S.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",S=>{const v=this.data.defaultFieldValue??"";s.value=d.userValue=v,d.formattedValue=null});let A=S=>{const{formattedValue:v}=d;v!=null&&(S.target.value=v),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{if(d.focused)return;const{target:E}=v;if(y&&(E.type=g,p&&(E.step=p)),d.userValue){const x=d.userValue;if(y)if(g==="time"){const R=new Date(x),M=[R.getHours(),R.getMinutes(),R.getSeconds()];E.value=M.map(N=>N.toString().padStart(2,"0")).join(":")}else E.value=new Date(x-cC).toISOString().split(g==="date"?"T":".",1)[0];else E.value=x}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const E={value(x){d.userValue=x.detail.value??"",y||t.setValue(e,{value:d.userValue.toString()}),x.target.value=d.userValue},formattedValue(x){const{formattedValue:R}=x.detail;d.formattedValue=R,R!=null&&x.target!==document.activeElement&&(x.target.value=R);const M={formattedValue:R};y&&(M.value=R),t.setValue(e,M)},selRange(x){x.target.setSelectionRange(...x.detail.selRange)},charLimit:x=>{const{charLimit:R}=x.detail,{target:M}=x;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let N=d.userValue;!N||N.length<=R||(N=N.slice(0,R),M.value=d.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(E,v)}),s.addEventListener("keydown",v=>{d.commitKey=1;let E=-1;if(v.key==="Escape"?E=0:v.key==="Enter"&&!this.data.multiLine?E=2:v.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:x}=v.target;d.lastCommittedValue!==x&&(d.lastCommittedValue=x,d.userValue=x,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:E,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const S=A;A=null,s.addEventListener("blur",v=>{if(!d.focused||!v.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=v;let{value:x}=E;if(y){if(x&&g==="time"){const R=x.split(":").map(M=>parseInt(M,10));x=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),E.step=""}else x.includes("T")||(x=`${x}T00:00`),x=new Date(x).valueOf();E.type="text"}d.userValue=x,d.lastCommittedValue!==x&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),S(v)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",v=>{d.lastCommittedValue=null;const{data:E,target:x}=v,{value:R,selectionStart:M,selectionEnd:N}=x;let k=M,L=N;switch(v.inputType){case"deleteWordBackward":{const P=R.substring(0,M).match(/\w*[^\w]*$/);P&&(k-=P[0].length);break}case"deleteWordForward":{const P=R.substring(M).match(/^[^\w]*\w*/);P&&(L+=P[0].length);break}case"deleteContentBackward":M===N&&(k-=1);break;case"deleteContentForward":M===N&&(L+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:E||"",willCommit:!1,selStart:k,selEnd:L}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class fC extends ks{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class mC extends ks{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Rs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,s)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue||"Off";l.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class dv extends ks{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Rs.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:h,checked:d}=l.target;for(const f of this._getElementsByName(h,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const h=e.defaultFieldValue;l.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=l===f.detail.value;for(const p of this._getElementsByName(f.target.name)){const y=g&&p.id===s;p.domElement&&(p.domElement.checked=y),t.setValue(p.id,{value:y})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class pC extends Jd{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class gC extends ks{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Rs.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const p=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===p});for(const g of this.data.options){const p=document.createElement("option");p.textContent=g.displayValue,p.value=g.exportValue,s.value.includes(g.exportValue)&&(p.setAttribute("selected",!0),o=!1),a.append(p)}let l=null;if(o){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),l=()=>{g.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const h=g=>{const p=g?"value":"textContent",{options:y,multiple:A}=a;return A?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[p]):y.selectedIndex===-1?null:y[y.selectedIndex][p]};let d=h(!1);const f=g=>{const p=g.target.options;return Array.prototype.map.call(p,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const p={value(y){l?.();const A=y.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const v of a.options)v.selected=S.has(v.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(y){a.multiple=!0},remove(y){const A=a.options,S=y.detail.remove;A[S].selected=!1,a.remove(S),A.length>0&&Array.prototype.findIndex.call(A,E=>E.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:f(y)}),d=h(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(y){const{index:A,displayValue:S,exportValue:v}=y.detail.insert,E=a.children[A],x=document.createElement("option");x.textContent=S,x.value=v,E?E.before(x):a.append(x),t.setValue(e,{value:h(!0),items:f(y)}),d=h(!1)},items(y){const{items:A}=y.detail;for(;a.length!==0;)a.remove(0);for(const S of A){const{displayValue:v,exportValue:E}=S,x=document.createElement("option");x.textContent=v,x.value=E,a.append(x)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(y)}),d=h(!1)},indices(y){const A=new Set(y.detail.indices);for(const S of y.target.options)S.selected=A.has(S.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(p,g)}),a.addEventListener("input",g=>{const p=h(!0),y=h(!1);t.setValue(e,{value:p}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:y,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Nd extends re{constructor(t){const{data:e,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&re._hasPopupData(e)}),this.elements=s,o&&re._hasPopupData(e)){const l=this.popup=this.#t();for(const h of s)h.popup=l}else this.popup=null}#t(){return new bC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${Ra}${a}`).join(",")),this.container}}class bC{#t=null;#e=this.#q.bind(this);#i=this.#I.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#b=null;#v=null;#y=null;#_=null;#x=null;#w=null;#T=!1;#A=null;#E=null;constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:h,parent:d,rect:f,parentRect:g,open:p,commentManager:y=null}){this.#s=t,this.#x=a,this.#o=l,this.#_=h,this.#d=d,this.#a=e,this.#y=f,this.#h=g,this.#l=s,this.#t=y,this.#A=s[0],this.#c=Ed.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y||(this.#D(),this.#s.hidden=!0,p&&this.#S())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m){this.#m.parentNode||this.#A.container.after(this.#m);return}if(this.#b||this.#M(),!this.#b)return;const{signal:t}=this.#p=new AbortController,e=this.#A.hasOwnCommentButton,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#A.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const h=this.#A.container;l.style.zIndex=h.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#R(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),h.after(l)}}#R(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#m||this.renderCommentButton();const[t,e]=this.#b,{style:s}=this.#m;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#z(){this.#A.extraPopupElement||(this.#m||this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(t){t!==this.comment&&(this.#A.commentText=this.#E=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:s}=this.#m.getBoundingClientRect(),{x:a,y:o,width:l,height:h}=this.#A.layer.getBoundingClientRect();return[(t-a)/l,(e+s-o)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:h,height:d}=a;this.#t.showDialog(null,this,o+e*h,l+s*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const s=t.style.outlineColor=ft.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#x?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#x}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}Y0({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#k(){const t=this.#_,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#_.html||null}get#L(){return this.#k?.attributes?.style?.fontSize||0}get#j(){return this.#k?.attributes?.style?.color||null}#B(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#j,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return s}#q(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#z(),this.#E=e.text)),t&&(this.#b=null,this.#M(),this.#R());return}if(s||e?.deleted){this.remove();return}this.#D(),this.#w||={contentsObj:this.#o,richText:this.#_},t&&(this.#u=null),e&&e.text&&(this.#_=this.#B(e.text),this.#c=Ed.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#_}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,h=l?this.#h:this.#y;for(const S of this.#l)if(!h||ft.intersect(S.data.rect,h)!==null){h=S.data.rect,l=!0;break}const d=ft.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=l?h[2]-h[0]+5:0,p=d[0]+g,y=d[1];this.#u=[100*(p-a)/e,100*(y-o)/s];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#C(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#g||this.#O(),this.#T=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class fv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class yC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class AC extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",s/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class mv extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const h=this.svgFactory.create(o,l,!0);let d=[];for(let g=0,p=e.length;g<p;g+=2){const y=e[g]-t[0],A=t[3]-e[g+1];d.push(`${y},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class wC extends mv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class SC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class tf extends re{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tt.HIGHLIGHT:Tt.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:h,height:d}=this.#i(e,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",l);for(let p=0,y=s.length;p<y;p++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[p].join(",")),g.append(A)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let l=0,h=this.#e.length;l<h;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:h,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class xC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class EC extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class _C extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class gv extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class CC extends re{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=Pe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ef{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=e,this.#e=s,this.#r=h||null,this.#a=f||null,this.#i=g||new $d,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,s=this.div;Ms(s,this.viewport);const a=new Map,o=[],l={data:null,layer:s,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ql,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const d=h.annotationType===ve.POPUP;if(d){const p=a.get(h.id);if(!p)continue;if(!this._commentManager){o.push(h);continue}l.elements=p}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;l.data=h;const f=$h.create(l);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),h.popupRef)){const p=a.get(h.popupRef);p?p.push(f):a.set(h.popupRef,[f])}const g=f.render();h.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const h of o){const d=l.elements=a.get(h.id);l.data=h;const f=$h.create(l);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${Ra}${h.id}`,h.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:s,data:{id:a}}of this.#s){const o=s.id=`${Ra}${a}`;t.push(this.#r?.getAriaAttributes(o).then(l=>{if(l)for(const[h,d]of l)s.setAttribute(h,d)}))}}this.#s.sort(({data:{rect:[s,a,o,l]}},{data:{rect:[h,d,f,g]}})=>{if(s===o&&a===l)return 1;if(h===f&&d===g)return-1;const p=l,y=a,A=(a+l)/2,S=g,v=d,E=(d+g)/2;if(A>=S&&E<=y)return-1;if(E>=p&&A<=v)return 1;const x=(s+o)/2,R=(h+f)/2;return x-R});const e=document.createDocumentFragment();for(const s of this.#s)e.append(s.container),this._commentManager?(s.extraPopupElement?.popup||s.popup)?.renderCommentButton():s.extraPopupElement&&e.append(s.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const s of this.#s)this.#t.addPointerInTextLayer(s.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Ql,parent:this};for(const s of t){s.borderStyle||=ef._defaultBorderStyle,e.data=s;const a=$h.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${Ra}${s.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Ms(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:a}=t,o=new uC({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return o.render(),o.contentElement.id=`${Ra}${s}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const e=this.#s.findIndex(a=>a.data.id===t);if(e<0)return;const[s]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(s.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ca.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const zl=/\r\n?|\n/g;class Ce extends wt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ce.prototype,e=o=>o.isEmpty(),s=ns.TRANSLATE_SMALL,a=ns.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new io([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=Tt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ce._defaultColor||wt._defaultLineColor,this.#n=t.fontSize||Ce._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){wt.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case zt.FREETEXT_SIZE:Ce._defaultFontSize=e;break;case zt.FREETEXT_COLOR:Ce._defaultColor=e;break}}updateParams(t,e){switch(t){case zt.FREETEXT_SIZE:this.#r(e);break;case zt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[zt.FREETEXT_SIZE,Ce._defaultFontSize],[zt.FREETEXT_COLOR,Ce._defaultColor||wt._defaultLineColor]]}get propertiesToUpdate(){return[[zt.FREETEXT_SIZE,this.#n],[zt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Zr(this),[["colorPicker",this._colorPicker]]}get colorType(){return zt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ce._internalPadding*t,-(Ce._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Ce.#c(s)),e=s);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,h=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ce._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[p,y]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=t+(l[0]-p)/f,S=e+this.height-(l[1]-y)/g;break;case 90:A=t+(l[0]-p)/f,S=e-(l[1]-y)/g,[h,d]=[d,-h];break;case 180:A=t-this.width+(l[0]-p)/f,S=e-(l[1]-y)/g,[h,d]=[-h,-d];break;case 270:A=t+(l[0]-p-this.height*g)/f,S=e+(l[1]-y-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(A*a,S*o,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(zl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Ce.#h(e.getData("text")||"").replaceAll(zl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:h,startOffset:d}=l,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(zl,"")),A!==this.editorDiv){let S=f;for(const v of this.editorDiv.childNodes){if(v===A){S=g;continue}S.push(Ce.#c(v))}}f.push(h.nodeValue.slice(0,d).replaceAll(zl,""))}else if(h===this.editorDiv){let A=f,S=0;for(const v of this.editorDiv.childNodes)S++===d&&(A=g),A.push(Ce.#c(v))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const p=new Range;let y=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const S=A.nodeValue.length;if(y<=S){p.setStart(A,y),p.setEnd(A,y);break}y-=S}o.removeAllRanges(),o.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ce._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let a=null;if(t instanceof fv){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:d,rotation:f,id:g,popupRef:p,richText:y,contentsObj:A,creationDate:S,modificationDate:v},textContent:E,textPosition:x,parent:{page:{pageNumber:R}}}=t;if(!E||E.length===0)return null;a=t={annotationType:Tt.FREETEXT,color:Array.from(h),fontSize:l,value:E.join(`
`),position:x,pageIndex:R-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:p,comment:A?.str||null,richText:y,creationDate:S,modificationDate:v}}const o=await super.deserialize(t,e,s);return o.#n=t.fontSize,o.color=ft.makeHexColor(...t.color),o.#t=Ce.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=wt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((l,h)=>l!==a[h])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ut{static PRECISION=1e-4;toSVGPath(){Zt("Abstract method `toSVGPath` must be implemented.")}get box(){Zt("Abstract getter `box` must be implemented.")}serialize(t,e){Zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h]*a,l[h+1]=s+t[h+1]*o;return l}static _rescaleAndSwap(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)l[h]=e+t[h+1]*a,l[h+1]=s+t[h]*o;return l}static _translate(t,e,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,o){switch(o){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,o,l){return[(t+5*s)/6,(e+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class Cs{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=Cs.#g+Cs.#p;constructor({x:t,y:e},s,a,o,l,h=0){this.#t=s,this.#h=o*a,this.#n=l,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=Cs.#g*a,this.#c=Cs.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#m(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#s+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#s+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#s=t,this.#o=e;const[s,a,o,l]=this.#t;let[h,d,f,g]=this.#a.subarray(8,12);const p=t-f,y=e-g,A=Math.hypot(p,y);if(A<this.#c)return!1;const S=A-this.#l,v=S/A,E=v*p,x=v*y;let R=h,M=d;h=f,d=g,f+=E,g+=x,this.#f?.push(t,e);const N=-x/S,k=E/S,L=N*this.#h,P=k*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+L,g+P],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-L,g-P],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([h+L,d+P],2),this.#r.push(NaN,NaN,NaN,NaN,(h+L-s)/o,(d+P-a)/l),this.#a.set([h-L,d-P],14),this.#e.push(NaN,NaN,NaN,NaN,(h-L-s)/o,(d-P-a)/l)),this.#a.set([R,M,h,d,f,g],6),!this.isEmpty()):(this.#a.set([R,M,h,d,f,g],6),Math.abs(Math.atan2(M-d,R-h)-Math.atan2(x,E))<Math.PI/2?([h,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-s)/o,((d+g)/2-a)/l),[h,d,R,M]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((R+h)/2-s)/o,((M+d)/2-a)/l),!0):([R,M,h,d,f,g]=this.#a.subarray(0,6),this.#r.push(((R+5*h)/6-s)/o,((M+5*d)/6-a)/l,((5*h+f)/6-s)/o,((5*d+g)/6-a)/l,((h+f)/2-s)/o,((d+g)/2-a)/l),[f,g,h,d,R,M]=this.#a.subarray(12,18),this.#e.push(((R+5*h)/6-s)/o,((M+5*d)/6-a)/l,((5*h+f)/6-s)/o,((5*d+g)/6-a)/l,((h+f)/2-s)/o,((d+g)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#y(s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,e,s,a]=this.#t,[o,l,h,d]=this.#m();return`M${(this.#a[2]-t)/s} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/s} ${(this.#a[5]-e)/a} L${o} ${l} L${h} ${d} L${(this.#a[16]-t)/s} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/s} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){const[e,s,a,o]=this.#t,l=this.#a.subarray(4,6),h=this.#a.subarray(16,18),[d,f,g,p]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-s)/o} L${d} ${f} L${g} ${p} L${(h[0]-e)/a} ${(h[1]-s)/o}`)}newFreeDrawOutline(t,e,s,a,o,l){return new bv(t,e,s,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,s=this.#a,[a,o,l,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let p=0,y=d.length-2;p<y;p+=2)d[p]=(this.#f[p]-a)/l,d[p+1]=(this.#f[p+1]-o)/h;if(d[d.length-2]=(this.#s-a)/l,d[d.length-1]=(this.#o-o)/h,isNaN(s[6])&&!this.isEmpty())return this.#_(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let p=0;p<g;p+=2){if(isNaN(t[p])){f[p]=f[p+1]=NaN;continue}f[p]=t[p],f[p+1]=t[p+1]}g=this.#w(f,g);for(let p=e.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(e[p+y])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[p+y],f[g+1]=e[p+y+1],g+=2}return this.#x(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#_(t){const e=this.#a,[s,a,o,l]=this.#t,[h,d,f,g]=this.#m(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(p,t,this.#t,this.#d,this.#i,this.#n)}#x(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#w(t,e){const s=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[o,l,h,d]=this.#t,[f,g,p,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/h,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,p,y,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-l)/d],e),e+=24}}class bv extends ut{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,s,a,o,l){super(),this.#s=t,this.#r=e,this.#t=s,this.#a=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[h,d,f,g]=this.#e;for(let p=0,y=t.length;p<y;p+=2)t[p]=(t[p]-h)/f,t[p+1]=(t[p+1]-d)/g;for(let p=0,y=e.length;p<y;p+=2)e[p]=(e[p]-h)/f,e[p+1]=(e[p+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,s=this.#s.length;e<s;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,a],o){const l=s-t,h=a-e;let d,f;switch(o){case 0:d=ut._rescale(this.#s,t,a,l,-h),f=ut._rescale(this.#r,t,a,l,-h);break;case 90:d=ut._rescaleAndSwap(this.#s,t,e,l,h),f=ut._rescaleAndSwap(this.#r,t,e,l,h);break;case 180:d=ut._rescale(this.#s,s,e,-l,h),f=ut._rescale(this.#r,s,e,-l,h);break;case 270:d=ut._rescaleAndSwap(this.#s,s,a,-l,-h),f=ut._rescaleAndSwap(this.#r,s,a,-l,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let s=e[4],a=e[5];const o=[s,a,s,a];let l=s,h=a,d=s,f=a;const g=t?Math.max:Math.min,p=new Float32Array(4);for(let A=6,S=e.length;A<S;A+=6){const v=e[A+4],E=e[A+5];isNaN(e[A])?(ft.pointBoundingBox(v,E,o),h>E?(l=v,h=E):h===E&&(l=g(l,v)),f<E?(d=v,f=E):f===E&&(d=g(d,v))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ft.bezierBoundingBox(s,a,...e.slice(A,A+6),p),ft.rectBoundingBox(p[0],p[1],p[2],p[3],o),h>p[1]?(l=p[0],h=p[1]):h===p[1]&&(l=g(l,p[0])),f<p[3]?(d=p[2],f=p[3]):f===p[3]&&(d=g(d,p[2]))),s=v,a=E}const y=this.#e;y[0]=o[0]-this.#i,y[1]=o[1]-this.#i,y[2]=o[2]-o[0]+2*this.#i,y[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,s,a,o,l=0){return new Cs(t,e,s,a,o,l)}getNewOutline(t,e){const[s,a,o,l]=this.#e,[h,d,f,g]=this.#t,p=o*f,y=l*g,A=s*f+h,S=a*g+d,v=this.newOutliner({x:this.#r[0]*p+A,y:this.#r[1]*y+S},this.#t,this.#a,t,this.#n,e??this.#i);for(let E=2;E<this.#r.length;E+=2)v.add({x:this.#r[E]*p+A,y:this.#r[E+1]*y+S});return v.getOutlines()}}class kd{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:v,y:E,width:x,height:R}of t){const M=Math.floor((v-e)/l)*l,N=Math.ceil((v+x+e)/l)*l,k=Math.floor((E-e)/l)*l,L=Math.ceil((E+R+e)/l)*l,P=[M,k,L,!0],F=[N,k,L,!1];this.#n.push(P,F),ft.rectBoundingBox(M,k,N,L,o)}const h=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,g=o[1]-s;let p=a?-1/0:1/0,y=1/0;const A=this.#n.at(a?-1:-2),S=[A[0],A[2]];for(const v of this.#n){const[E,x,R,M]=v;!M&&a?x<y?(y=x,p=E):x===y&&(p=Math.max(p,E)):M&&!a&&(x<y?(y=x,p=E):x===y&&(p=Math.min(p,E))),v[0]=(E-f)/h,v[1]=(x-g)/d,v[2]=(R-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=[p,y],this.#i=S}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],s=new Set;for(const l of t){const[h,d,f]=l;e.push([h,d,l],[h,f,l])}e.sort((l,h)=>l[1]-h[1]||l[0]-h[0]);for(let l=0,h=e.length;l<h;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[h,d,f,g,p]=l;s.delete(l);let y=h,A=d;for(o=[h,f],a.push(o);;){let S;if(s.has(g))S=g;else if(s.has(p))S=p;else break;s.delete(S),[h,d,f,g,p]=S,y!==h&&(o.push(y,A,h,A===d?d:f),y=h),A=A===d?f:d}o.push(y,A)}return new TC(a,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let s=0,a=e.length-1;for(;s<=a;){const o=s+a>>1,l=e[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,e]){const s=this.#s(t);this.#r.splice(s,0,[t,e])}#c([,t,e]){const s=this.#s(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,s,a]=t,o=[[e,s,a]],l=this.#s(a);for(let h=0;h<l;h++){const[d,f]=this.#r[h];for(let g=0,p=o.length;g<p;g++){const[,y,A]=o[g];if(!(f<=y||A<=d)){if(y>=d){if(A>f)o[g][1]=f;else{if(p===1)return[];o.splice(g,1),g--,p--}continue}o[g][2]=d,A>f&&o.push([e,f,A])}}}return o}}class TC extends ut{#t;#e;constructor(t,e,s,a){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[s,a]=e;t.push(`M${s} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],h=e[o+1];l===s?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,e,s,a],o){const l=[],h=s-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let p=0;p<f.length;p+=2)g[p]=t+f[p]*h,g[p+1]=a-f[p+1]*d;l.push(g)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Od extends Cs{newFreeDrawOutline(t,e,s,a,o,l){return new MC(t,e,s,a,o,l)}}class MC extends bv{newOutliner(t,e,s,a,o,l=0){return new Od(t,e,s,a,o,l)}}class de extends wt{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Tt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=de.prototype;return Ct(this,"_keyboardManager",new io([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||de._defaultColor,this.#m=t.thickness||de._defaultThickness,this.opacity=t.opacity||de._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#A()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new kd(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new kd(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#n=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:de.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:de.#E(this.#a.box,p),path:{d:this.#a.toSVGPath()}})}const[o,l,h,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=h,this.height=d;break;case 90:{const[p,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=h*y/p,this.height=d*p/y;break}case 180:this.x=1-o,this.y=1-l,this.width=h,this.height=d;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=h*y/p,this.height=d*p/y;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/h,(f[1]-l)/d];const{lastPoint:g}=this.#a;this.#g=[(g[0]-o)/h,(g[1]-l)/d]}static initialize(t,e){wt.initialize(t,e),de._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case zt.HIGHLIGHT_COLOR:de._defaultColor=e;break;case zt.HIGHLIGHT_THICKNESS:de._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case zt.HIGHLIGHT_COLOR:this.#_(e);break;case zt.HIGHLIGHT_THICKNESS:this.#x(e);break}}static get defaultPropertiesToUpdate(){return[[zt.HIGHLIGHT_COLOR,de._defaultColor],[zt.HIGHLIGHT_THICKNESS,de._defaultThickness]]}get propertiesToUpdate(){return[[zt.HIGHLIGHT_COLOR,this.color||de._defaultColor],[zt.HIGHLIGHT_THICKNESS,this.#m||de._defaultThickness],[zt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#_(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,de._defaultOpacity),undo:e.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const e=this.#m,s=a=>{this.#m=a,this.#w(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Nn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,e,s,a],o){switch(o){case 90:return[1-e-a,t,a,s];case 180:return[1-t-s,1-e-a,s,a];case 270:return[e,1-t-s,a,s]}return[t,e,s,a]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=de.#E(this.#l.box,t)):s=de.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:de.#E(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),$0(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){de._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let h=0;for(const{x:d,y:f,width:g,height:p}of o){const y=d*t+s,A=(1-f)*e+a;l[h]=l[h+4]=y,l[h+1]=l[h+3]=A,l[h+2]=l[h+6]=y+g*t,l[h+5]=l[h+7]=A-p*e,h+=8}return l}#k(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,e,{target:s,x:a,y:o}){const{x:l,y:h,width:d,height:f}=s.getBoundingClientRect(),g=new AbortController,p=t.combinedSignal(g),y=A=>{g.abort(),this.#j(t,A)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",ce,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",kn,{signal:p}),s.addEventListener("pointermove",this.#L.bind(this,t),{signal:p}),this._freeHighlight=new Od({x:a,y:o},[l,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let a=null;if(t instanceof pv){const{data:{quadPoints:S,rect:v,rotation:E,id:x,color:R,opacity:M,popupRef:N,richText:k,contentsObj:L,creationDate:P,modificationDate:F},parent:{page:{pageNumber:Q}}}=t;a=t={annotationType:Tt.HIGHLIGHT,color:Array.from(R),opacity:M,quadPoints:S,boxes:null,pageIndex:Q-1,rect:v.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:N,richText:k,comment:L?.str||null,creationDate:P,modificationDate:F}}else if(t instanceof tf){const{data:{inkLists:S,rect:v,rotation:E,id:x,color:R,borderStyle:{rawWidth:M},popupRef:N,richText:k,contentsObj:L,creationDate:P,modificationDate:F},parent:{page:{pageNumber:Q}}}=t;a=t={annotationType:Tt.HIGHLIGHT,color:Array.from(R),thickness:M,inkLists:S,boxes:null,pageIndex:Q-1,rect:v.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,popupRef:N,richText:k,comment:L?.str||null,creationDate:P,modificationDate:F}}const{color:o,quadPoints:l,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,s);f.color=ft.makeHexColor(...o),f.opacity=d||1,h&&(f.#m=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,p]=f.pageDimensions,[y,A]=f.pageTranslation;if(l){const S=f.#i=[];for(let v=0;v<l.length;v+=8)S.push({x:(l[v]-y)/g,y:1-(l[v+1]-A)/p,width:(l[v+2]-l[v])/g,height:(l[v+1]-l[v+5])/p});f.#v(),f.#A(),f.rotate(f.rotation)}else if(h){f.#h=!0;const S=h[0],v={x:S[0]-y,y:p-(S[1]-A)},E=new Od(v,[0,0,g,p],1,f.#m/2,!0,.001);for(let M=0,N=S.length;M<N;M+=2)v.x=S[M]-y,v.y=p-(S[M+1]-A),E.add(v);const{id:x,clipPathId:R}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#y({highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:R}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#z(),outlines:this.#k(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#B(s)?null:(s.id=this.annotationElementId,s)}#B(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class yv{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Zt("Not implemented")}}class Gt extends wt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:s}=e.drawLayer.draw(Gt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Zt("Not implemented")}static get typesMap(){Zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(Gt.#i.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,e[a]]);return t}_updateProperty(t,e,s){const a=this._drawingOptions,o=a[e],l=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,s,a]){const{parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[e,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-e,s,a];case 270:return[1-e,t,s*(l/o),a*(o/l)];default:return[t,e,s,a]}}#d(){const{x:t,y:e,width:s,height:a,parentDimensions:[o,l],rotation:h}=this;switch(h){case 90:return[1-e,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-e,s,a];case 270:return[e,1-t,s*(o/l),a*(l/o)];default:return[t,e,s,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[h,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,s];case 2:return[1-t-s,1-e-a,s,a];case 3:return[e,1-t-s,a,s];case 4:return[t,e-s*(h/d),a*(d/h),s*(h/d)];case 5:return[1-e,t,s*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),s*(h/d)];case 7:return[e-s*(h/d),1-t-a*(d/h),s*(h/d),a*(d/h)];case 8:return[t-s,e-a,s,a];case 9:return[1-e,t-s,a,s];case 10:return[1-t,1-e,s,a];case 11:return[e-a,1-t,a,s];case 12:return[t-a*(d/h),e,a*(d/h),s*(h/d)];case 13:return[1-e-s*(h/d),t-a*(d/h),s*(h/d),a*(d/h)];case 14:return[1-t,1-e-s*(h/d),a*(d/h),s*(h/d)];case 15:return[e,1-t,s*(h/d),a*(d/h)];default:return[t,e,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Gt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,a,o){Zt("Not implemented")}static startDrawing(t,e,s,a){const{target:o,offsetX:l,offsetY:h,pointerId:d,pointerType:f}=a;if(qt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:p,height:y}=o.getBoundingClientRect(),A=Gt.#n=new AbortController,S=t.combinedSignal(A);if(qt.setPointer(f,d),window.addEventListener("pointerup",v=>{qt.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:S}),window.addEventListener("pointercancel",v=>{qt.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",v=>{qt.isSamePointerType(v.pointerType)&&(qt.initializeAndAddPointerId(v.pointerId),Gt.#i.isCancellable()&&(Gt.#i.removeLastElement(),Gt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",kn,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",v=>{qt.isSameTimeStamp(v.timeStamp)&&ce(v)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),Gt.#i){t.drawLayer.updateProperties(this._currentDrawId,Gt.#i.startNew(l,h,p,y,g));return}e.updateUIForDefaultProperties(this),Gt.#i=this.createDrawerInstance(l,h,p,y,g),Gt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Gt.#r.toSVGProperties(),Gt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(qt.isSameTimeStamp(t.timeStamp),!Gt.#i)return;const{offsetX:e,offsetY:s,pointerId:a}=t;if(qt.isSamePointerId(a)){if(qt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Gt.#i.add(e,s)),qt.setTimeStamp(t.timeStamp),ce(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Gt.#i=null,Gt.#r=null,qt.clearPointerType(),qt.clearTimeStamp()),Gt.#n&&(Gt.#n.abort(),Gt.#n=null,qt.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Gt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=Gt.#i,a=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:zt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(zt.DRAW_STEP),!Gt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Gt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:Gt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,a,o,l){Zt("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}=e.viewport,d=this.deserializeDraw(l,h,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,s);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class RC{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new ao;#l;#d;constructor(t,e,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:h,points:this.#a}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return ut._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,a,o,l]=this.#t.subarray(2,6),h=t-o,d=e-l;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(s)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,e],0),this.#e.push(...ut.createBezierPoints(s,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:l,points:this.#a}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=ut.svgRound(this.#e[4]),e=ut.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const a=ut.svgRound(this.#e[10]),o=ut.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,h,d,f,g,p]=this.#e.slice(a,a+6).map(ut.svgRound);s.push(`C${l} ${h} ${d} ${f} ${g} ${p}`)}return this.#s+=s.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ao extends ut{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,s,a,o,l,h){this.#r=e,this.#a=s,this.#s=a,this.#o=o,this.#c=l,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${ut.svgRound(e[4])} ${ut.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${ut.svgRound(e[10])} ${ut.svgRound(e[11])}`);continue}for(let s=6,a=e.length;s<a;s+=6){const[o,l,h,d,f,g]=e.subarray(s,s+6).map(ut.svgRound);t.push(`C${o} ${l} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,s,a],o){const l=[],h=[],[d,f,g,p]=this.#d();let y,A,S,v,E,x,R,M,N;switch(this.#o){case 0:N=ut._rescale,y=t,A=e+a,S=s,v=-a,E=t+d*s,x=e+(1-f-p)*a,R=t+(d+g)*s,M=e+(1-f)*a;break;case 90:N=ut._rescaleAndSwap,y=t,A=e,S=s,v=a,E=t+f*s,x=e+d*a,R=t+(f+p)*s,M=e+(d+g)*a;break;case 180:N=ut._rescale,y=t+s,A=e,S=-s,v=a,E=t+(1-d-g)*s,x=e+f*a,R=t+(1-d)*s,M=e+(f+p)*a;break;case 270:N=ut._rescaleAndSwap,y=t+s,A=e+a,S=-s,v=-a,E=t+(1-f-p)*s,x=e+(1-d-g)*a,R=t+(1-f)*s,M=e+(1-d)*a;break}for(const{line:k,points:L}of this.#n)l.push(N(k,y,A,S,v,o?new Array(k.length):null)),h.push(N(L,y,A,S,v,o?new Array(L.length):null));return{lines:l,points:h,rect:[E,x,R,M]}}static deserialize(t,e,s,a,o,{paths:{lines:l,points:h},rotation:d,thickness:f}){const g=[];let p,y,A,S,v;switch(d){case 0:v=ut._rescale,p=-t/s,y=e/a+1,A=1/s,S=-1/a;break;case 90:v=ut._rescaleAndSwap,p=-e/a,y=-t/s,A=1/a,S=1/s;break;case 180:v=ut._rescale,p=t/s+1,y=-e/a,A=-1/s,S=1/a;break;case 270:v=ut._rescaleAndSwap,p=e/a+1,y=t/s+1,A=-1/a,S=-1/s;break}if(!l){l=[];for(const x of h){const R=x.length;if(R===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(R===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const M=new Float32Array(3*(R-2));l.push(M);let[N,k,L,P]=x.subarray(0,4);M.set([NaN,NaN,NaN,NaN,N,k],0);for(let F=4;F<R;F+=2){const Q=x[F],it=x[F+1];M.set(ut.createBezierPoints(N,k,L,P,Q,it),(F-2)*3),[N,k,L,P]=[L,P,Q,it]}}}for(let x=0,R=l.length;x<R;x++)g.push({line:v(l[x].map(M=>M??NaN),p,y,A,S),points:v(h[x].map(M=>M??NaN),p,y,A,S)});const E=new this.prototype.constructor;return E.build(g,s,a,1,d,f,o),E}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)ft.pointBoundingBox(a[h],a[h+1],t);continue}let o=a[4],l=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,p,y,A,S]=a.subarray(h,h+6);ft.bezierBoundingBox(o,l,f,g,p,y,A,S,t),o=A,l=S}}const[e,s]=this.#l();t[0]=Xe(t[0]-e,0,1),t[1]=Xe(t[1]-s,0,1),t[2]=Xe(t[2]+e,0,1),t[3]=Xe(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,h]=[a-e,o-s],d=this.#t;return d[0]-=l,d[1]-=h,d[2]+=2*l,d[3]+=2*h,d}updateParentDimensions([t,e],s){const[a,o]=this.#l();this.#r=t,this.#a=e,this.#s=s;const[l,h]=this.#l(),d=l-a,f=h-o,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ut.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,a=0,o=0,l=0,h=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,h=t;break;case 180:s=-1,l=-1,h=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${ut.svgRound(h)} ${ut.svgRound(d)})`}getPathResizingSVGProperties([t,e,s,a]){const[o,l]=this.#l(),[h,d,f,g]=this.#t;if(Math.abs(f-o)<=ut.PRECISION||Math.abs(g-l)<=ut.PRECISION){const v=t+s/2-(h+f/2),E=e+a/2-(d+g/2);return{path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${E})`}}}const p=(s-2*o)/(f-2*o),y=(a-2*l)/(g-2*l),A=f/s,S=g/a;return{path:{"transform-origin":`${ut.svgRound(h)} ${ut.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${ut.svgRound(o)} ${ut.svgRound(l)}) scale(${p} ${y}) translate(${ut.svgRound(-o)} ${ut.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,s,a]){const[o,l]=this.#l(),h=this.#t,[d,f,g,p]=h;if(h[0]=t,h[1]=e,h[2]=s,h[3]=a,Math.abs(g-o)<=ut.PRECISION||Math.abs(p-l)<=ut.PRECISION){const E=t+s/2-(d+g/2),x=e+a/2-(f+p/2);for(const{line:R,points:M}of this.#n)ut._translate(R,E,x,R),ut._translate(M,E,x,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*o)/(g-2*o),A=(a-2*l)/(p-2*l),S=-y*(d+o)+t+o,v=-A*(f+l)+e+l;if(y!==1||A!==1||S!==0||v!==0)for(const{line:E,points:x}of this.#n)ut._rescale(E,S,v,y,A,E),ut._rescale(x,S,v,y,A,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[a,o]=s,l=this.#t,h=t-l[0],d=e-l[1];if(this.#r===a&&this.#a===o)for(const{line:f,points:g}of this.#n)ut._translate(f,h,d,f),ut._translate(g,h,d,g);else{const f=this.#r/a,g=this.#a/o;this.#r=a,this.#a=o;for(const{line:p,points:y}of this.#n)ut._rescale(p,h,d,f,g,p),ut._rescale(y,h,d,f,g,y);l[2]*=f,l[3]*=g}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(t)} ${ut.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(t[0])} ${ut.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class hc extends yv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:wt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new hc(this._viewParameters);return t.updateAll(this),t}}class nf extends Gt{static _type="ink";static _editorType=Tt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){wt.initialize(t,e),this._defaultDrawingOptions=new hc(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[zt.INK_THICKNESS,"stroke-width"],[zt.INK_COLOR,"stroke"],[zt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,a,o){return new RC(t,e,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,a,o,l){return ao.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){let a=null;if(t instanceof tf){const{data:{inkLists:l,rect:h,rotation:d,id:f,color:g,opacity:p,borderStyle:{rawWidth:y},popupRef:A,richText:S,contentsObj:v,creationDate:E,modificationDate:x},parent:{page:{pageNumber:R}}}=t;a=t={annotationType:Tt.INK,color:Array.from(g),thickness:y,opacity:p,paths:{points:l},boxes:null,pageIndex:R-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:S,comment:v?.str||null,creationDate:E,modificationDate:x}}const o=await super.deserialize(t,e,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Zr(this),[["colorPicker",this._colorPicker]]}get colorType(){return zt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=nf.getDefaultDrawingOptions({stroke:ft.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,h=Object.assign(super.serialize(t),{color:wt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:s}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,h)=>l!==e[h])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Ld extends ao{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const jl=8,Ur=3;class Ma{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,p=this.#i[2*g],y=this.#i[2*g+1];if(t[(s+p)*e+(a+y)]!==0)return g}return-1}static#r(t,e,s,a,o,l,h){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,p=this.#i[2*g],y=this.#i[2*g+1];if(t[(s+p)*e+(a+y)]!==0)return g}return-1}static#a(t,e,s,a){const o=t.length,l=new Int32Array(o);for(let g=0;g<o;g++)l[g]=t[g]<=a?1:0;for(let g=1;g<s-1;g++)l[g*e]=l[g*e+e-1]=0;for(let g=0;g<e;g++)l[g]=l[e*s-1-g]=0;let h=1,d;const f=[];for(let g=1;g<s-1;g++){d=1;for(let p=1;p<e-1;p++){const y=g*e+p,A=l[y];if(A===0)continue;let S=g,v=p;if(A===1&&l[y-1]===0)h+=1,v-=1;else if(A>=1&&l[y+1]===0)h+=1,v+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const E=[p,g],x=v===p+1,R={isHole:x,points:E,id:h,parent:0};f.push(R);let M;for(const nt of f)if(nt.id===d){M=nt;break}M?M.isHole?R.parent=x?M.parent:d:R.parent=x?d:M.parent:R.parent=x?d:0;const N=this.#n(l,e,g,p,S,v,0);if(N===-1){l[y]=-h,l[y]!==1&&(d=Math.abs(l[y]));continue}let k=this.#i[2*N],L=this.#i[2*N+1];const P=g+k,F=p+L;S=P,v=F;let Q=g,it=p;for(;;){const nt=this.#r(l,e,Q,it,S,v,1);k=this.#i[2*nt],L=this.#i[2*nt+1];const lt=Q+k,ht=it+L;E.push(ht,lt);const gt=Q*e+it;if(l[gt+1]===0?l[gt]=-h:l[gt]===1&&(l[gt]=h),lt===g&&ht===p&&Q===P&&it===F){l[y]!==1&&(d=Math.abs(l[y]));break}else S=Q,v=it,Q=lt,it=ht}}}return f}static#s(t,e,s,a){if(s-e<=4){for(let P=e;P<s-2;P+=2)a.push(t[P],t[P+1]);return}const o=t[e],l=t[e+1],h=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(h,d),g=h/f,p=d/f,y=g*l-p*o,A=d/h,S=1/f,v=Math.atan(A),E=Math.cos(v),x=Math.sin(v),R=S*(Math.abs(E)+Math.abs(x)),M=S*(1-R+R**2),N=Math.max(Math.atan(Math.abs(x+E)*M),Math.atan(Math.abs(x-E)*M));let k=0,L=e;for(let P=e+2;P<s-2;P+=2){const F=Math.abs(y-g*t[P+1]+p*t[P]);F>k&&(L=P,k=F)}k>(f*N)**2?(this.#s(t,e,L+2,a),this.#s(t,L,s,a)):a.push(o,l)}static#o(t){const e=[],s=t.length;return this.#s(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,a,o,l){const h=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let v=0;v<l;v++){const E=(v-f)**2;for(let x=0;x<l;x++)h[v*l+x]=Math.exp((E+(x-f)**2)/d)}const g=new Float32Array(256),p=-2*o**2;for(let v=0;v<256;v++)g[v]=Math.exp(v**2/p);const y=t.length,A=new Uint8Array(y),S=new Uint32Array(256);for(let v=0;v<s;v++)for(let E=0;E<e;E++){const x=v*e+E,R=t[x];let M=0,N=0;for(let L=0;L<l;L++){const P=v+L-f;if(!(P<0||P>=s))for(let F=0;F<l;F++){const Q=E+F-f;if(Q<0||Q>=e)continue;const it=t[P*e+Q],nt=h[L*l+F]*g[Math.abs(it-R)];M+=it*nt,N+=nt}}const k=A[x]=Math.round(M/N);S[k]++}return[A,S]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let h=0,d=s.length;h<d;h++){const f=s[h]=t[h<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let h=0,d=s.length;h<d;h++)s[h]=(s[h]-o)*l;return s}static#h(t){let e,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,h=o;for(e=o;e<256;e++){const d=t[e];d>s&&(e-l>a&&(a=e-l,h=e-1),s=d,l=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,h=a;if(s>o||a>o){let y=s,A=a,S=Math.log2(Math.max(s,a)/o);const v=Math.floor(S);S=S===v?v-1:v;for(let x=0;x<S;x++){l=Math.ceil(y/2),h=Math.ceil(A/2);const R=new OffscreenCanvas(l,h);R.getContext("2d").drawImage(t,0,0,y,A,0,0,l,h),y=l,A=h,t!==e&&t.close(),t=R.transferToImageBitmap()}const E=Math.min(o/l,o/h);l=Math.round(l*E),h=Math.round(h*E)}const f=new OffscreenCanvas(l,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,h);const g=f.getImageData(0,0,l,h).data;return[this.#d(g),l,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},o,l,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const p=200,y=g.font=`${s} ${a} ${p}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:v,actualBoundingBoxDescent:E,fontBoundingBoxAscent:x,fontBoundingBoxDescent:R,width:M}=g.measureText(t),N=1.5,k=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,M)*N),L=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||p,Math.abs(x)+Math.abs(R)||p)*N);f=new OffscreenCanvas(k,L),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=y,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,k,L),g.fillStyle="black",g.fillText(t,k*(N-1)/2,L*(3-N)/2);const P=this.#d(g.getImageData(0,0,k,L).data),F=this.#l(P),Q=this.#h(F),it=this.#a(P,k,L,Q);return this.processDrawnLines({lines:{curves:it,width:k,height:L},pageWidth:o,pageHeight:l,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,o){const[l,h,d]=this.#f(t),[f,g]=this.#c(l,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),p=this.#h(g),y=this.#a(f,h,d,p);return this.processDrawnLines({lines:{curves:y,width:h,height:d},pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:h}){a%180!==0&&([e,s]=[s,e]);const{curves:d,width:f,height:g}=t,p=t.thickness??0,y=[],A=Math.min(e/f,s/g),S=A/e,v=A/s,E=[];for(const{points:R}of d){const M=l?this.#o(R):R;if(!M)continue;E.push(M);const N=M.length,k=new Float32Array(N),L=new Float32Array(3*(N===2?2:N-2));if(y.push({line:L,points:k}),N===2){k[0]=M[0]*S,k[1]=M[1]*v,L.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[P,F,Q,it]=M;P*=S,F*=v,Q*=S,it*=v,k.set([P,F,Q,it],0),L.set([NaN,NaN,NaN,NaN,P,F],0);for(let nt=4;nt<N;nt+=2){const lt=k[nt]=M[nt]*S,ht=k[nt+1]=M[nt+1]*v;L.set(ut.createBezierPoints(P,F,Q,it,lt,ht),(nt-2)*3),[P,F,Q,it]=[Q,it,lt,ht]}}if(y.length===0)return null;const x=h?new Ld:new ao;return x.build(y,e,s,1,a,h?0:p,o),{outline:x,newCurves:E,areContours:h,thickness:p,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:o}){let l=1/0,h=-1/0,d=0;for(const M of t){d+=M.length;for(let N=2,k=M.length;N<k;N++){const L=M[N]-M[N-2];l=Math.min(l,L),h=Math.max(h,L)}}let f;l>=-128&&h<=127?f=Int8Array:l>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,p=jl+Ur*g,y=new Uint32Array(p);let A=0;y[A++]=p*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=a,y[A++]=o,y[A++]=e?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=g,y[A++]=f.BYTES_PER_ELEMENT;for(const M of t)y[A++]=M.length-2,y[A++]=M[0],y[A++]=M[1];const S=new CompressionStream("deflate-raw"),v=S.writable.getWriter();await v.ready,v.write(y);const E=f.prototype.constructor;for(const M of t){const N=new E(M.length-2);for(let k=2,L=M.length;k<L;k++)N[k-2]=M[k]-M[k-2];v.write(N)}v.close();const x=await new Response(S.readable).arrayBuffer(),R=new Uint8Array(x);return q0(R)}static async decompressSignature(t){try{const e=YE(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,h=0;for await(const M of s)l||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),l.set(M,h),h+=M.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],p=d[3],y=d[4]===0,A=d[5],S=d[6],v=d[7],E=[],x=(jl+Ur*S)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(v){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(l.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(l.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(l.buffer,x);break}h=0;for(let M=0;M<S;M++){const N=d[Ur*M+jl],k=new Float32Array(N+2);E.push(k);for(let L=0;L<Ur-1;L++)k[L]=d[Ur*M+jl+L+1];for(let L=0;L<N;L++)k[L+2]=k[L]+R[h++]}return{areContours:y,thickness:A,outlines:E,width:g,height:p}}catch(e){return _t(`decompressSignature: ${e}`),null}}}class sf extends yv{constructor(){super(),super.updateProperties({fill:wt._defaultLineColor,"stroke-width":0})}clone(){const t=new sf;return t.updateAll(this),t}}class af extends hc{constructor(t){super(t),super.updateProperties({stroke:wt._defaultLineColor,"stroke-width":1})}clone(){const t=new af(this._viewParameters);return t.updateAll(this),t}}class Wn extends Gt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=Tt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){wt.initialize(t,e),this._defaultDrawingOptions=new sf,this._defaultDrawnSignatureOptions=new af(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:p},rotation:y}=this.parent.viewport,A=Ma.processDrawnLines({lines:a,pageWidth:g,pageHeight:p,rotation:y,innerMargin:Wn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),h=Ma.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,a){const{x:o,y:l}=this,{outline:h}=this.#i=t;this.#t=h instanceof Ld,this.description=s;let d;this.#t?d=Wn.getDefaultDrawingOptions():(d=Wn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let g=e/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ma.process(t,e,s,a,Wn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Ma.extractContoursFromText(t,e,s,a,o,Wn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ma.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:Wn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Wn.getDefaultDrawingOptions():(this._drawingOptions=Wn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,a,o,l){return l.areContours?Ld.deserialize(t,e,s,a,o,l):ao.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){const a=await super.deserialize(t,e,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class DC extends wt{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Tt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){wt.initialize(t,e)}static isHandlingMimeForPasting(t){return _d.includes(t)}static paste(t,e){e.pasteEditor({mode:Tt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,h=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=_d.join(",");const e=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,s=this.height*o;else if(e>l*a||s>l*o){const d=Math.min(l*a/e,l*o/s);e*=d,s*=d}this._uiManager.enableWaiting(!1);const h=this.#s=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Jn;let h=this.#t,d=a,f=o,g=null;if(e){if(a>e||o>e){const L=Math.min(e/a,e/o);d=Math.floor(a*L),f=Math.floor(o*L)}g=document.createElement("canvas");const y=g.width=Math.ceil(d*l.sx),A=g.height=Math.ceil(f*l.sy);this.#l||(h=this.#u(y,A));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let v="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":ZE.isDarkMode&&(v="#8f8f9d",E="#42414d");const x=15,R=x*l.sx,M=x*l.sy,N=new OffscreenCanvas(R*2,M*2),k=N.getContext("2d");k.fillStyle=v,k.fillRect(0,0,R*2,M*2),k.fillStyle=E,k.fillRect(0,0,R,M),k.fillRect(R,M,R,M),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,y,A),S.drawImage(h,0,0,h.width,h.height,0,0,y,A)}let p=null;if(s){let y,A;if(l.symmetric&&h.width<t&&h.height<t)y=h.width,A=h.height;else if(h=this.#t,a>t||o>t){const E=Math.min(t/a,t/o);y=Math.floor(a*E),A=Math.floor(o*E),this.#l||(h=this.#u(y,A))}const v=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});v.drawImage(h,0,0,h.width,h.height,0,0,y,A),p={width:y,height:A,data:v.getImageData(0,0,y,A).data}}return{canvas:g,width:d,height:f,imageData:p}}#u(t,e){const{width:s,height:a}=this.#t;let o=s,l=a,h=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const g=new OffscreenCanvas(o,l);g.getContext("2d").drawImage(h,0,0,d,f,0,0,o,l),h=g.transferToImageBitmap()}return h}#m(){const[t,e]=this.parentDimensions,{width:s,height:a}=this,o=new Jn,l=Math.ceil(s*t*o.sx),h=Math.ceil(a*e*o.sy),d=this.#s;if(!d||d.width===l&&d.height===h)return;d.width=l,d.height=h;const f=this.#l?this.#t:this.#u(l,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,l,h)}#b(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,a=Math.round(this.width*e*za.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*za.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let a=null,o=!1;if(t instanceof gv){const{data:{rect:v,rotation:E,id:x,structParent:R,popupRef:M,richText:N,contentsObj:k,creationDate:L,modificationDate:P},container:F,parent:{page:{pageNumber:Q}},canvas:it}=t;let nt,lt;it?(delete t.canvas,{id:nt,bitmap:lt}=s.imageManager.getFromCanvas(F.id,it),it.remove()):(o=!0,t._hasNoCanvas=!0);const ht=(await e._structTree.getAriaAttributes(`${Ra}${x}`))?.get("aria-label")||"";a=t={annotationType:Tt.STAMP,bitmapId:nt,bitmap:lt,pageIndex:Q-1,rect:v.slice(0),rotation:E,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:ht},isSvg:!1,structParent:R,popupRef:M,richText:N,comment:k?.str||null,creationDate:L,modificationDate:P}}const l=await super.deserialize(t,e,s),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:p,accessibilityData:y}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):g&&s.imageManager.isValidId(g)?(l.#e=g,d&&(l.#t=d)):l.#n=f,l.#l=p;const[A,S]=l.pageDimensions;return l.width=(h[2]-h[0])/A,l.height=(h[3]-h[1])/S,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const h=this.#v(s);return h.isSame?null:(h.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#b(!1);else if(this.#l){const h=e.stamps.get(this.#e);l>h.area&&(h.area=l,h.serialized.bitmap.close(),h.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Si{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Ce,nf,DC,de,Wn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const p=[...Si.#m.values()];if(!Si._initialized){Si._initialized=!0;for(const y of p)y.initialize(g,t)}t.registerEditorTypes(p),this.#u=t,this.pageIndex=e,this.div=s,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Tt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case Tt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Tt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of Si.#m.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#i;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const a=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:h,clientY:d,timeStamp:f}=o,g=this.#p;if(f-g>500){this.#p=f;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const y=document.elementsFromPoint(h,d);if(p.toggle("getElements",!1),!this.div.contains(y[0]))return;let A;const S=new RegExp(`^${Kr}[0-9]+$`);for(const E of y)if(S.test(E.id)){A=E.id;break}if(!A)return;const v=this.#a.get(A);v?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),v.dblclick(o))},{signal:a,capture:!0})}const t=this.#i,e=[];if(t){const a=new Map,o=new Map;for(const h of this.#b){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else o.set(h.annotationElementId,h);this.getEditableAnnotation(h.annotationElementId)?.show(),h.remove()}const l=t.getEditableAnnotations();for(const h of l){const{id:d}=h.data;if(this.#u.isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let f=o.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(h)&&f.show(!1)),h.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const a of Si.#m.values())s.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=Pe.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),de.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),wt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#y(){return Si.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#_(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#x(),o=this.getNextId(),l=this.#_({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Si.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),o=this.#_({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:e,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),h=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,e+a),f=(o+h)/2-t,g=(l+d)/2-e,[p,y]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:p,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===Tt.STAMP||s===Tt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Tt.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Pe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,s){const a=this.#u.findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#w(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ms(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Ms(this.div,{rotation:s}),e!==s)for(const a of this.#a.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Oe{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ct(this,"_svgFactory",new Ql)}static#r(t,[e,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#a(){const t=Oe._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const s=Oe._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Oe._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,e=!1,s=!1){const a=Oe.#n++,o=this.#a(),l=Oe._svgFactory.createElement("defs");o.append(l);const h=Oe._svgFactory.createElement("path");l.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,h);const f=s?this.#s(l,d):null,g=Oe._svgFactory.createElement("use");return o.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const s=Oe.#n++,a=this.#a(),o=Oe._svgFactory.createElement("defs");a.append(o);const l=Oe._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",h),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const p=Oe._svgFactory.createElement("mask");o.append(p),d=`mask_p${this.pageIndex}_${s}`,p.setAttribute("id",d),p.setAttribute("maskUnits","objectBoundingBox");const y=Oe._svgFactory.createElement("rect");p.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=Oe._svgFactory.createElement("use");p.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Oe._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:a,rootClass:o,path:l}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(s&&this.#o(h,s),a&&Oe.#r(h,a),o){const{classList:d}=h;for(const[f,g]of Object.entries(o))d.toggle(f,g)}if(l){const f=h.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:kd};globalThis.pdfjsLib={AbortException:es,AnnotationEditorLayer:Si,AnnotationEditorParamsType:zt,AnnotationEditorType:Tt,AnnotationEditorUIManager:ns,AnnotationLayer:ef,AnnotationMode:Ji,AnnotationType:ve,applyOpacity:t_,build:rC,ColorPicker:Nn,createValidAbsoluteUrl:F0,CSSConstants:JE,DOMSVGFactory:Ql,DrawLayer:Oe,FeatureTest:Pe,fetchData:to,findContrastColor:e_,getDocument:cv,getFilenameFromUrl:XE,getPdfFilenameFromUrl:$E,getRGB:no,getUuid:G0,getXfaPageViewport:WE,GlobalWorkerOptions:Pa,ImageKind:Hl,InvalidPDFException:xd,isDataScheme:lc,isPdfFile:Vd,isValidExplicitDest:h_,MathClamp:Xe,noContextMenu:kn,normalizeUnicode:qE,OPS:Wr,OutputScale:Jn,PasswordResponses:BE,PDFDataRangeTransport:uv,PDFDateString:Ed,PDFWorker:Le,PermissionFlag:LE,PixelsPerInch:za,RenderingCancelledException:qd,renderRichText:Y0,ResponseException:Kl,setLayerDimensions:Ms,shadow:Ct,SignatureExtractor:Ma,stopEvent:ce,SupportedImageMimeTypes:_d,TextLayer:Ve,TouchManager:cc,updateUrlHash:U0,Util:ft,VerbosityLevel:ac,version:hv,XfaLayer:V0};Pa.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${hv}/pdf.worker.min.js`;async function NC(u){const t=await u.arrayBuffer(),e=await cv({data:t}).promise,s=[];let a="";for(let o=1;o<=e.numPages;o++){const d=(await(await e.getPage(o)).getTextContent()).items.map(f=>f.str).join(" ").replace(/\s+/g," ").trim();s.push({pageNumber:o,text:d}),a+=d+`
`}return{text:a,pages:s}}function kC(u,t,e){const s=[],a=t.toLowerCase().split(/\s+/).filter(o=>o.length>0);if(a.length===0)return[];for(const o of e){const l=o.text.toLowerCase(),h=a.filter(d=>l.includes(d));if(h.length>0){const d=OC(o.text,a);for(const f of d)s.push({text:f.text,pageNumber:o.pageNumber,context:f.surrounding,relevance:h.length/a.length,matchedKeywords:h})}}return s.sort((o,l)=>l.relevance-o.relevance),s.slice(0,10)}function OC(u,t){const e=[],s=u.toLowerCase(),a=100;for(const l of t){let h=0;for(;(h=s.indexOf(l,h))!==-1;){const d=Math.max(0,h-a),f=Math.min(u.length,h+l.length+a);let g=u.substring(d,f);d>0&&(g="..."+g),f<u.length&&(g=g+"...");const p=u.substring(h,h+l.length);e.push({text:p,surrounding:g,position:h}),h+=l.length}}return e.filter((l,h)=>{for(let d=0;d<h;d++)if(Math.abs(l.position-e[d].position)<a)return!1;return!0}).slice(0,5)}const ay={burnable:["可燃","燃えるごみ","燃やすごみ","燃やせるごみ","普通ごみ","生ごみ","紙くず","布","木くず","プラスチック製品","革製品","ゴム製品","ビニール","発泡スチロール"],"non-burnable":["不燃","燃えないごみ","燃やせないごみ","金属","ガラス","陶器","小型家電","鏡","アルミ","鉄","ステンレス","フライパン","鍋","傘","電気製品","小型電気","刃物","包丁"],recyclable:["資源","リサイクル","再利用","分別","ペットボトル","PET","缶","びん","瓶","新聞","雑誌","段ボール","ダンボール","紙パック","古紙","プラ","プラスチック容器","容器包装"],hazardous:["危険","有害","電池","バッテリー","スプレー","ライター","蛍光灯","蛍光管","水銀","薬品","塗料","オイル","ガスボンベ","カセットボンベ","殺虫剤"],oversized:["粗大","大型","家具","ベッド","ソファ","テーブル","椅子","たんす","自転車","布団","マットレス","家電","冷蔵庫","洗濯機","テレビ","エアコン"],unknown:[]},ry={burnable:["指定の袋に入れて出してください","生ごみは水を切ってください","収集日の朝8時までに出してください"],"non-burnable":["指定の袋に入れて出してください","刃物は新聞紙等で包んでください","割れ物は「キケン」と表示してください"],recyclable:["きれいに洗ってから出してください","キャップ・ラベルは外してください","種類ごとに分別してください"],hazardous:["他のごみと分けて出してください","中身を使い切ってください","収集場所が異なる場合があります"],oversized:["事前に予約が必要な場合があります","処理券が必要な場合があります","直接持ち込みも可能な場合があります"],unknown:["詳細は自治体のルールをご確認ください"]};function LC(u,t){const e=u.toLowerCase(),s=t.toLowerCase(),a={burnable:{score:0,sourceText:""},"non-burnable":{score:0,sourceText:""},recyclable:{score:0,sourceText:""},hazardous:{score:0,sourceText:""},oversized:{score:0,sourceText:""},unknown:{score:0,sourceText:""}},o=e.indexOf(s);if(o!==-1){const y=Math.max(0,o-200),A=Math.min(u.length,o+200),S=u.substring(y,A),v=S.toLowerCase();for(const[E,x]of Object.entries(ay))for(const R of x)v.includes(R.toLowerCase())&&(a[E].score+=1,a[E].sourceText||(a[E].sourceText=S))}for(const[y,A]of Object.entries(ay))for(const S of A)if(s.includes(S.toLowerCase())||S.toLowerCase().includes(s)){a[y].score+=2;const v=e.indexOf(S.toLowerCase());if(v!==-1&&!a[y].sourceText){const E=Math.max(0,v-100),x=Math.min(u.length,v+S.length+100);a[y].sourceText=u.substring(E,x)}}let l="unknown",h=0,d="";for(const[y,A]of Object.entries(a))y!=="unknown"&&A.score>h&&(h=A.score,l=y,d=A.sourceText);let f="low";h>=5?f="high":h>=2&&(f="medium");const g=BC(l),p=ry[l]||ry.unknown;return{type:l,label:g.label,labelJp:g.labelJp,disposalMethod:p[0]||"",notes:p.slice(1),sourceText:d||"該当する記載が見つかりませんでした",confidence:f}}function BC(u){return{burnable:{label:"Burnable Waste",labelJp:"可燃ごみ"},"non-burnable":{label:"Non-burnable Waste",labelJp:"不燃ごみ"},recyclable:{label:"Recyclable Waste",labelJp:"資源ごみ"},hazardous:{label:"Hazardous Waste",labelJp:"危険ごみ"},oversized:{label:"Oversized Waste",labelJp:"粗大ごみ"},unknown:{label:"Unknown",labelJp:"不明"}}[u]}function PC(u,t){let e=u;for(const s of t){const a=new RegExp(`(${zC(s)})`,"gi");e=e.replace(a,'<mark class="highlight">$1</mark>')}return e}function zC(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var Kh={exports:{}},oy;function jC(){return oy||(oy=1,(function(u){var t=(function(e){var s=Object.prototype,a=s.hasOwnProperty,o=Object.defineProperty||function(X,V,C){X[V]=C.value},l,h=typeof Symbol=="function"?Symbol:{},d=h.iterator||"@@iterator",f=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function p(X,V,C){return Object.defineProperty(X,V,{value:C,enumerable:!0,configurable:!0,writable:!0}),X[V]}try{p({},"")}catch{p=function(V,C,I){return V[C]=I}}function y(X,V,C,I){var B=V&&V.prototype instanceof M?V:M,$=Object.create(B.prototype),et=new O(I||[]);return o($,"_invoke",{value:lt(X,C,et)}),$}e.wrap=y;function A(X,V,C){try{return{type:"normal",arg:X.call(V,C)}}catch(I){return{type:"throw",arg:I}}}var S="suspendedStart",v="suspendedYield",E="executing",x="completed",R={};function M(){}function N(){}function k(){}var L={};p(L,d,function(){return this});var P=Object.getPrototypeOf,F=P&&P(P(G([])));F&&F!==s&&a.call(F,d)&&(L=F);var Q=k.prototype=M.prototype=Object.create(L);N.prototype=k,o(Q,"constructor",{value:k,configurable:!0}),o(k,"constructor",{value:N,configurable:!0}),N.displayName=p(k,g,"GeneratorFunction");function it(X){["next","throw","return"].forEach(function(V){p(X,V,function(C){return this._invoke(V,C)})})}e.isGeneratorFunction=function(X){var V=typeof X=="function"&&X.constructor;return V?V===N||(V.displayName||V.name)==="GeneratorFunction":!1},e.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,k):(X.__proto__=k,p(X,g,"GeneratorFunction")),X.prototype=Object.create(Q),X},e.awrap=function(X){return{__await:X}};function nt(X,V){function C($,et,rt,st){var ct=A(X[$],X,et);if(ct.type==="throw")st(ct.arg);else{var ot=ct.arg,vt=ot.value;return vt&&typeof vt=="object"&&a.call(vt,"__await")?V.resolve(vt.__await).then(function(Rt){C("next",Rt,rt,st)},function(Rt){C("throw",Rt,rt,st)}):V.resolve(vt).then(function(Rt){ot.value=Rt,rt(ot)},function(Rt){return C("throw",Rt,rt,st)})}}var I;function B($,et){function rt(){return new V(function(st,ct){C($,et,st,ct)})}return I=I?I.then(rt,rt):rt()}o(this,"_invoke",{value:B})}it(nt.prototype),p(nt.prototype,f,function(){return this}),e.AsyncIterator=nt,e.async=function(X,V,C,I,B){B===void 0&&(B=Promise);var $=new nt(y(X,V,C,I),B);return e.isGeneratorFunction(V)?$:$.next().then(function(et){return et.done?et.value:$.next()})};function lt(X,V,C){var I=S;return function($,et){if(I===E)throw new Error("Generator is already running");if(I===x){if($==="throw")throw et;return K()}for(C.method=$,C.arg=et;;){var rt=C.delegate;if(rt){var st=ht(rt,C);if(st){if(st===R)continue;return st}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(I===S)throw I=x,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);I=E;var ct=A(X,V,C);if(ct.type==="normal"){if(I=C.done?x:v,ct.arg===R)continue;return{value:ct.arg,done:C.done}}else ct.type==="throw"&&(I=x,C.method="throw",C.arg=ct.arg)}}}function ht(X,V){var C=V.method,I=X.iterator[C];if(I===l)return V.delegate=null,C==="throw"&&X.iterator.return&&(V.method="return",V.arg=l,ht(X,V),V.method==="throw")||C!=="return"&&(V.method="throw",V.arg=new TypeError("The iterator does not provide a '"+C+"' method")),R;var B=A(I,X.iterator,V.arg);if(B.type==="throw")return V.method="throw",V.arg=B.arg,V.delegate=null,R;var $=B.arg;if(!$)return V.method="throw",V.arg=new TypeError("iterator result is not an object"),V.delegate=null,R;if($.done)V[X.resultName]=$.value,V.next=X.nextLoc,V.method!=="return"&&(V.method="next",V.arg=l);else return $;return V.delegate=null,R}it(Q),p(Q,g,"Generator"),p(Q,d,function(){return this}),p(Q,"toString",function(){return"[object Generator]"});function gt(X){var V={tryLoc:X[0]};1 in X&&(V.catchLoc=X[1]),2 in X&&(V.finallyLoc=X[2],V.afterLoc=X[3]),this.tryEntries.push(V)}function yt(X){var V=X.completion||{};V.type="normal",delete V.arg,X.completion=V}function O(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(gt,this),this.reset(!0)}e.keys=function(X){var V=Object(X),C=[];for(var I in V)C.push(I);return C.reverse(),function B(){for(;C.length;){var $=C.pop();if($ in V)return B.value=$,B.done=!1,B}return B.done=!0,B}};function G(X){if(X){var V=X[d];if(V)return V.call(X);if(typeof X.next=="function")return X;if(!isNaN(X.length)){var C=-1,I=function B(){for(;++C<X.length;)if(a.call(X,C))return B.value=X[C],B.done=!1,B;return B.value=l,B.done=!0,B};return I.next=I}}return{next:K}}e.values=G;function K(){return{value:l,done:!0}}return O.prototype={constructor:O,reset:function(X){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(yt),!X)for(var V in this)V.charAt(0)==="t"&&a.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=l)},stop:function(){this.done=!0;var X=this.tryEntries[0],V=X.completion;if(V.type==="throw")throw V.arg;return this.rval},dispatchException:function(X){if(this.done)throw X;var V=this;function C(st,ct){return $.type="throw",$.arg=X,V.next=st,ct&&(V.method="next",V.arg=l),!!ct}for(var I=this.tryEntries.length-1;I>=0;--I){var B=this.tryEntries[I],$=B.completion;if(B.tryLoc==="root")return C("end");if(B.tryLoc<=this.prev){var et=a.call(B,"catchLoc"),rt=a.call(B,"finallyLoc");if(et&&rt){if(this.prev<B.catchLoc)return C(B.catchLoc,!0);if(this.prev<B.finallyLoc)return C(B.finallyLoc)}else if(et){if(this.prev<B.catchLoc)return C(B.catchLoc,!0)}else if(rt){if(this.prev<B.finallyLoc)return C(B.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(X,V){for(var C=this.tryEntries.length-1;C>=0;--C){var I=this.tryEntries[C];if(I.tryLoc<=this.prev&&a.call(I,"finallyLoc")&&this.prev<I.finallyLoc){var B=I;break}}B&&(X==="break"||X==="continue")&&B.tryLoc<=V&&V<=B.finallyLoc&&(B=null);var $=B?B.completion:{};return $.type=X,$.arg=V,B?(this.method="next",this.next=B.finallyLoc,R):this.complete($)},complete:function(X,V){if(X.type==="throw")throw X.arg;return X.type==="break"||X.type==="continue"?this.next=X.arg:X.type==="return"?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):X.type==="normal"&&V&&(this.next=V),R},finish:function(X){for(var V=this.tryEntries.length-1;V>=0;--V){var C=this.tryEntries[V];if(C.finallyLoc===X)return this.complete(C.completion,C.afterLoc),yt(C),R}},catch:function(X){for(var V=this.tryEntries.length-1;V>=0;--V){var C=this.tryEntries[V];if(C.tryLoc===X){var I=C.completion;if(I.type==="throw"){var B=I.arg;yt(C)}return B}}throw new Error("illegal catch attempt")},delegateYield:function(X,V,C){return this.delegate={iterator:G(X),resultName:V,nextLoc:C},this.method==="next"&&(this.arg=l),R}},e})(u.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(Kh)),Kh.exports}var Wh,ly;function rf(){return ly||(ly=1,Wh=(u,t)=>`${u}-${t}-${Math.random().toString(16).slice(3,8)}`),Wh}var Qh,cy;function vv(){if(cy)return Qh;cy=1;const u=rf();let t=0;return Qh=({id:e,action:s,payload:a={}})=>{let o=e;return typeof o>"u"&&(o=u("Job",t),t+=1),{id:o,action:s,payload:a}},Qh}var Hr={},uy;function of(){if(uy)return Hr;uy=1;let u=!1;return Hr.logging=u,Hr.setLogging=t=>{u=t},Hr.log=(...t)=>u?console.log.apply(this,t):null,Hr}var Zh,hy;function IC(){if(hy)return Zh;hy=1;const u=vv(),{log:t}=of(),e=rf();let s=0;return Zh=()=>{const a=e("Scheduler",s),o={},l={};let h=[];s+=1;const d=()=>h.length,f=()=>Object.keys(o).length,g=()=>{if(h.length!==0){const v=Object.keys(o);for(let E=0;E<v.length;E+=1)if(typeof l[v[E]]>"u"){h[0](o[v[E]]);break}}},p=(v,E)=>new Promise((x,R)=>{const M=u({action:v,payload:E});h.push(async N=>{h.shift(),l[N.id]=M;try{x(await N[v].apply(this,[...E,M.id]))}catch(k){R(k)}finally{delete l[N.id],g()}}),t(`[${a}]: Add ${M.id} to JobQueue`),t(`[${a}]: JobQueue length=${h.length}`),g()});return{addWorker:v=>(o[v.id]=v,t(`[${a}]: Add ${v.id}`),t(`[${a}]: Number of workers=${f()}`),g(),v.id),addJob:async(v,...E)=>{if(f()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return p(v,E)},terminate:async()=>{Object.keys(o).forEach(async v=>{await o[v].terminate()}),h=[]},getQueueLen:d,getNumWorkers:f}},Zh}function FC(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Jh,dy;function UC(){return dy||(dy=1,Jh=u=>{const t={};return typeof WorkerGlobalScope<"u"?t.type="webworker":typeof document=="object"?t.type="browser":typeof process=="object"&&typeof FC=="function"&&(t.type="node"),typeof u>"u"?t:t[u]}),Jh}var td,fy;function HC(){if(fy)return td;fy=1;const t=UC()("type")==="browser"?e=>new URL(e,window.location.href).href:e=>e;return td=e=>{const s={...e};return["corePath","workerPath","langPath"].forEach(a=>{e[a]&&(s[a]=t(s[a]))}),s},td}var ed,my;function Av(){return my||(my=1,ed={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ed}const GC="7.0.0",qC={version:GC};var nd,py;function VC(){return py||(py=1,nd={workerBlobURL:!0,logger:()=>{}}),nd}var id,gy;function YC(){if(gy)return id;gy=1;const u=qC.version;return id={...VC(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${u}/dist/worker.min.js`},id}var sd,by;function XC(){return by||(by=1,sd=({workerPath:u,workerBlobURL:t})=>{let e;if(Blob&&URL&&t){const s=new Blob([`importScripts("${u}");`],{type:"application/javascript"});e=new Worker(URL.createObjectURL(s))}else e=new Worker(u);return e}),sd}var ad,yy;function $C(){return yy||(yy=1,ad=u=>{u.terminate()}),ad}var rd,vy;function KC(){return vy||(vy=1,rd=(u,t)=>{u.onmessage=({data:e})=>{t(e)}}),rd}var od,Ay;function WC(){return Ay||(Ay=1,od=async(u,t)=>{u.postMessage(t)}),od}var ld,wy;function QC(){if(wy)return ld;wy=1;const u=e=>new Promise((s,a)=>{const o=new FileReader;o.onload=()=>{s(o.result)},o.onerror=({target:{error:{code:l}}})=>{a(Error(`File could not be read! Code=${l}`))},o.readAsArrayBuffer(e)}),t=async e=>{let s=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?s=atob(e.split(",")[1]).split("").map(a=>a.charCodeAt(0)):s=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(s=await t(e.src)),e.tagName==="VIDEO"&&(s=await t(e.poster)),e.tagName==="CANVAS"&&await new Promise(a=>{e.toBlob(async o=>{s=await u(o),a()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const a=await e.convertToBlob();s=await u(a)}else(e instanceof File||e instanceof Blob)&&(s=await u(e));return new Uint8Array(s)};return ld=t,ld}var cd,Sy;function ZC(){if(Sy)return cd;Sy=1;const u=YC(),t=XC(),e=$C(),s=KC(),a=WC(),o=QC();return cd={defaultOptions:u,spawnWorker:t,terminateWorker:e,onMessage:s,send:a,loadImage:o},cd}var ud,xy;function wv(){if(xy)return ud;xy=1;const u=HC(),t=vv(),{log:e}=of(),s=rf(),a=Av(),{defaultOptions:o,spawnWorker:l,terminateWorker:h,onMessage:d,loadImage:f,send:g}=ZC();let p=0;return ud=async(y="eng",A=a.LSTM_ONLY,S={},v={})=>{const E=s("Worker",p),{logger:x,errorHandler:R,...M}=u({...o,...S}),N={},k=typeof y=="string"?y.split("+"):y;let L=A,P=v;const F=[a.DEFAULT,a.LSTM_ONLY].includes(A)&&!M.legacyCore;let Q,it;const nt=new Promise((ot,vt)=>{it=ot,Q=vt}),lt=ot=>{Q(ot.message)};let ht=l(M);ht.onerror=lt,p+=1;const gt=({id:ot,action:vt,payload:Rt})=>new Promise((It,fe)=>{e(`[${E}]: Start ${ot}, action=${vt}`);const ee=`${vt}-${ot}`;N[ee]={resolve:It,reject:fe},g(ht,{workerId:E,jobId:ot,action:vt,payload:Rt})}),yt=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),O=ot=>gt(t({id:ot,action:"load",payload:{options:{lstmOnly:F,corePath:M.corePath,logging:M.logging}}})),G=(ot,vt,Rt)=>gt(t({id:Rt,action:"FS",payload:{method:"writeFile",args:[ot,vt]}})),K=(ot,vt)=>gt(t({id:vt,action:"FS",payload:{method:"readFile",args:[ot,{encoding:"utf8"}]}})),X=(ot,vt)=>gt(t({id:vt,action:"FS",payload:{method:"unlink",args:[ot]}})),V=(ot,vt,Rt)=>gt(t({id:Rt,action:"FS",payload:{method:ot,args:vt}})),C=(ot,vt)=>gt(t({id:vt,action:"loadLanguage",payload:{langs:ot,options:{langPath:M.langPath,dataPath:M.dataPath,cachePath:M.cachePath,cacheMethod:M.cacheMethod,gzip:M.gzip,lstmOnly:[a.DEFAULT,a.LSTM_ONLY].includes(L)&&!M.legacyLang}}})),I=(ot,vt,Rt,It)=>gt(t({id:It,action:"initialize",payload:{langs:ot,oem:vt,config:Rt}})),B=(ot="eng",vt,Rt,It)=>{if(F&&[a.TESSERACT_ONLY,a.TESSERACT_LSTM_COMBINED].includes(vt))throw Error("Legacy model requested but code missing.");const fe=vt||L;L=fe;const ee=Rt||P;P=ee;const Fn=(typeof ot=="string"?ot.split("+"):ot).filter(ti=>!k.includes(ti));return k.push(...Fn),Fn.length>0?C(Fn,It).then(()=>I(ot,fe,ee,It)):I(ot,fe,ee,It)},$=(ot={},vt)=>gt(t({id:vt,action:"setParameters",payload:{params:ot}})),et=async(ot,vt={},Rt={text:!0},It)=>gt(t({id:It,action:"recognize",payload:{image:await f(ot),options:vt,output:Rt}})),rt=async(ot,vt)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return gt(t({id:vt,action:"detect",payload:{image:await f(ot)}}))},st=async()=>(ht!==null&&(h(ht),ht=null),Promise.resolve());d(ht,({workerId:ot,jobId:vt,status:Rt,action:It,data:fe})=>{const ee=`${It}-${vt}`;if(Rt==="resolve")e(`[${ot}]: Complete ${vt}`),N[ee].resolve({jobId:vt,data:fe}),delete N[ee];else if(Rt==="reject")if(N[ee].reject(fe),delete N[ee],It==="load"&&Q(fe),R)R(fe);else throw Error(fe);else Rt==="progress"&&x({...fe,userJobId:vt})});const ct={id:E,worker:ht,load:yt,writeText:G,readText:K,removeFile:X,FS:V,reinitialize:B,setParameters:$,recognize:et,detect:rt,terminate:st};return O().then(()=>C(y)).then(()=>I(y,A,v)).then(()=>it(ct)).catch(()=>{}),nt},ud}var hd,Ey;function JC(){if(Ey)return hd;Ey=1;const u=wv();return hd={recognize:async(s,a,o)=>{const l=await u(a,1,o);return l.recognize(s).finally(async()=>{await l.terminate()})},detect:async(s,a)=>{const o=await u("osd",0,a);return o.detect(s).finally(async()=>{await o.terminate()})}},hd}var dd,_y;function tT(){return _y||(_y=1,dd={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),dd}var fd,Cy;function eT(){return Cy||(Cy=1,fd={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),fd}var md,Ty;function nT(){if(Ty)return md;Ty=1,jC();const u=IC(),t=wv(),e=JC(),s=tT(),a=Av(),o=eT(),{setLogging:l}=of();return md={languages:s,OEM:a,PSM:o,createScheduler:u,createWorker:t,setLogging:l,...e},md}var iT=nT();const sT=Bd(iT);async function aT(u,t){try{const e=await sT.recognize(u,"jpn+eng",{logger:a=>{a.status==="recognizing text"&&t&&t(Math.round(a.progress*100))}}),s=e.data.blocks?.map(a=>({text:a.text,bbox:a.bbox,confidence:a.confidence}))||[];return{text:e.data.text,confidence:e.data.confidence,blocks:s}}catch(e){throw console.error("OCR failed:",e),new Error("OCR処理に失敗しました")}}function rT(u){const t=u.split(`
`).filter(f=>f.trim());let e=null;const s=[],a=[],o=[],l=["プラスチック","プラ","PET","PE","PP","PS","PVC","ガラス","アルミ","スチール","紙","段ボール","ポリエチレン","ポリプロピレン","ポリスチレン","金属","鉄","ステンレス","銅","木","布","綿","ナイロン","ゴム","シリコン","セラミック","陶器"],h=["火気","火気厳禁","高温","危険","注意","電池","バッテリー","可燃性","引火","スプレー","ガス","圧力","爆発"],d=["分別","リサイクル","資源","可燃","不燃","プラ","ペットボトル","缶","びん","紙"];for(const f of t){if(f.includes("商品名")||f.includes("品名")||f.includes("製品名")){const g=f.match(/[：:]\s*(.+)/);g&&(e=g[1].trim())}for(const g of l)f.includes(g)&&s.push(g);for(const g of h)if(f.includes(g)){a.push(f.trim());break}for(const g of[...l,...d])f.includes(g)&&!o.includes(g)&&o.push(g)}if(!e&&t.length>0){const f=t.find(g=>g.length>3&&g.length<50);f&&(e=f)}return{productName:e,materials:[...new Set(s)],warnings:[...new Set(a)],keywords:[...new Set(o)]}}function oT(u,t=1200,e=1200){return new Promise((s,a)=>{const o=new Image;o.onload=()=>{let{width:l,height:h}=o;l>t&&(h=h*t/l,l=t),h>e&&(l=l*e/h,h=e);const d=document.createElement("canvas");d.width=l,d.height=h;const f=d.getContext("2d");if(!f){a(new Error("Canvas context not available"));return}f.drawImage(o,0,0,l,h),s(d.toDataURL("image/jpeg",.85))},o.onerror=()=>a(new Error("Failed to load image")),o.src=u})}function lT({pdfData:u,municipality:t,onSearch:e,onCategorize:s,searchResults:a,onReset:o}){const[l,h]=z.useState(""),[d,f]=z.useState("search"),[g,p]=z.useState(null),[y,A]=z.useState(!1),[S,v]=z.useState(!1),[E,x]=z.useState(!1),[R,M]=z.useState(0),[N,k]=z.useState(null),[L,P]=z.useState(null),[F,Q]=z.useState(!1),it=z.useRef(null),nt=z.useRef(null),lt=z.useRef(null),ht=z.useCallback(()=>{l.trim()&&(A(!0),setTimeout(()=>{const C=s(l);p(C),e(l),A(!1)},300))},[l,e,s]),gt=z.useCallback(C=>{h(C.name),A(!0),setTimeout(()=>{const I=s(C.name);p(I),e(C.name),A(!1)},300)},[e,s]),yt=z.useCallback(async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});it.current&&(it.current.srcObject=C,lt.current=C,v(!0))}catch(C){console.error("Camera access failed:",C),Vr.error("カメラへのアクセスができませんでした")}},[]),O=z.useCallback(()=>{lt.current&&(lt.current.getTracks().forEach(C=>C.stop()),lt.current=null),v(!1)},[]),G=z.useCallback(async()=>{if(!it.current)return;const C=document.createElement("canvas");C.width=it.current.videoWidth,C.height=it.current.videoHeight;const I=C.getContext("2d");if(!I)return;I.drawImage(it.current,0,0);const B=C.toDataURL("image/jpeg",.8);k(B),O(),await X(B)},[O]),K=z.useCallback(async C=>{const I=C.target.files?.[0];if(!I)return;const B=new FileReader;B.onload=async()=>{const $=B.result,et=await oT($);k(et),await X(et)},B.readAsDataURL(I)},[]),X=async C=>{x(!0),M(0);try{const I=await aT(C,M),B=rT(I.text);if(P({text:I.text,keywords:B.keywords}),B.keywords.length>0){const $=B.keywords[0];h($);const et=s($);p(et),e($)}else if(B.productName){h(B.productName);const $=s(B.productName);p($),e(B.productName)}Vr.success("スキャンが完了しました")}catch{Vr.error("テキストの読み取りに失敗しました")}finally{x(!1)}},V=z.useCallback(()=>{k(null),P(null),p(null)},[]);return T.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-[#faf9f7] to-[#f5f3ef]",children:[T.jsxs("div",{className:"flex-shrink-0 px-4 pt-4 pb-3 glass sticky top-0 z-10",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#2d9d78] to-[#059669] flex items-center justify-center shadow-md",children:T.jsx("span",{className:"text-lg",children:"♻️"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-base font-bold text-gray-800",children:"ゴミ分別"}),T.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[T.jsx(Gl,{className:"w-3 h-3"}),t?.name]})]})]}),T.jsxs(CE,{children:[T.jsx(TE,{asChild:!0,children:T.jsx(gn,{variant:"ghost",size:"icon",className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100",children:T.jsx(sw,{className:"w-5 h-5"})})}),T.jsxs(O0,{side:"bottom",className:"bg-white border-gray-200",children:[T.jsx(L0,{children:T.jsx(B0,{className:"text-gray-800",children:"設定を変更"})}),T.jsxs("div",{className:"py-4 space-y-4",children:[T.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[T.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"現在のPDF"}),T.jsx("div",{className:"text-gray-800 font-medium",children:u?.fileName})]}),T.jsx(gn,{variant:"destructive",className:"w-full",onClick:o,children:"PDFを再設定"})]})]})]})]}),T.jsxs("div",{className:"tab-nav",children:[T.jsxs("button",{className:`tab-btn ${d==="search"?"active":""}`,onClick:()=>{f("search"),O()},children:[T.jsx(ql,{className:"w-4 h-4 inline mr-2"}),"検索"]}),T.jsxs("button",{className:`tab-btn ${d==="camera"?"active":""}`,onClick:()=>f("camera"),children:[T.jsx(Il,{className:"w-4 h-4 inline mr-2"}),"スキャン"]})]})]}),T.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pb-8",children:[d==="search"&&T.jsxs("div",{className:"animate-fade-in",children:[T.jsx("div",{className:"mt-4 mb-6",children:T.jsxs("div",{className:"relative",children:[T.jsx(ql,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),T.jsx(Xl,{type:"text",placeholder:"品目名を入力（例：フライパン）",value:l,onChange:C=>h(C.target.value),onKeyDown:C=>C.key==="Enter"&&ht(),className:"pl-12 pr-24 h-14 bg-white border-gray-200 rounded-xl text-gray-800 text-base placeholder:text-gray-400 shadow-sm"}),T.jsx(gn,{onClick:ht,disabled:y||!l.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 h-10 px-4 bg-[#2d9d78] hover:bg-[#269d70] text-white rounded-lg",children:y?T.jsx(gd,{className:"w-4 h-4 animate-spin"}):"検索"})]})}),!g&&T.jsxs("div",{className:"mb-8",children:[T.jsx("div",{className:"flex items-center justify-between mb-3",children:T.jsxs("h2",{className:"text-sm font-medium text-gray-500 flex items-center gap-2",children:[T.jsx(yw,{className:"w-4 h-4 text-amber-500"}),"よくある危険物・注意品目"]})}),T.jsx("div",{className:"quick-action-grid",children:yS.map(C=>T.jsxs("button",{onClick:()=>gt(C),className:"quick-action-btn",children:[T.jsx("span",{className:"text-2xl",children:C.icon}),T.jsx("span",{children:C.name})]},C.id))})]}),g&&T.jsx(My,{category:g,searchQuery:l,onShowSource:()=>Q(!0)}),a.length>0&&T.jsxs("div",{className:"mt-6",children:[T.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["PDFから ",a.length," 件の関連箇所を発見"]}),T.jsx("div",{className:"space-y-3",children:a.map((C,I)=>T.jsx(cT,{result:C},I))})]}),g?.type==="unknown"&&a.length===0&&T.jsxs("div",{className:"mt-8 text-center p-6 bg-white rounded-xl border border-gray-100 shadow-sm",children:[T.jsx(ky,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),T.jsx("h3",{className:"text-gray-800 font-medium mb-2",children:"該当する情報が見つかりませんでした"}),T.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"別のキーワードで検索するか、自治体に直接お問い合わせください"}),T.jsx(gn,{variant:"outline",className:"border-gray-200 text-gray-600",onClick:()=>p(null),children:"別のキーワードで検索"})]})]}),d==="camera"&&T.jsx("div",{className:"animate-fade-in mt-4",children:N?T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"relative aspect-[4/3] bg-gray-100 rounded-2xl overflow-hidden border border-gray-200 shadow-sm",children:[T.jsx("img",{src:N,alt:"Captured",className:"w-full h-full object-cover"}),E&&T.jsxs("div",{className:"absolute inset-0 bg-white/90 flex flex-col items-center justify-center",children:[T.jsx(gd,{className:"w-12 h-12 text-[#2d9d78] animate-spin mb-4"}),T.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"テキストを読み取り中..."}),T.jsx("div",{className:"w-48 h-2 bg-gray-200 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-[#2d9d78] transition-all duration-300",style:{width:`${R}%`}})}),T.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[R,"%"]})]}),T.jsx(gn,{onClick:V,size:"icon",variant:"ghost",className:"absolute top-3 right-3 bg-white/90 text-gray-600 hover:bg-white shadow-sm",children:T.jsx(jd,{className:"w-5 h-5"})})]}),L&&T.jsx("div",{className:"mt-4",children:L.keywords.length>0&&T.jsxs("div",{className:"mb-4",children:[T.jsx("h3",{className:"text-sm text-gray-500 mb-2",children:"検出されたキーワード"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:L.keywords.map((C,I)=>T.jsx(gn,{variant:"outline",size:"sm",className:"border-[#2d9d78]/30 text-[#2d9d78] hover:bg-[#e8f5f0] bg-white",onClick:()=>{h(C);const B=s(C);p(B),e(C)},children:C},I))})]})}),g&&T.jsx(My,{category:g,searchQuery:l,onShowSource:()=>Q(!0)})]}):T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"relative aspect-[4/3] bg-gray-100 rounded-2xl overflow-hidden border border-gray-200 shadow-sm",children:S?T.jsxs(T.Fragment,{children:[T.jsx("video",{ref:it,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),T.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[T.jsxs("div",{className:"absolute inset-8 border-2 border-[#2d9d78]/40 rounded-lg",children:[T.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-2 border-l-2 border-[#2d9d78] rounded-tl-lg"}),T.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-2 border-r-2 border-[#2d9d78] rounded-tr-lg"}),T.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-2 border-l-2 border-[#2d9d78] rounded-bl-lg"}),T.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-2 border-r-2 border-[#2d9d78] rounded-br-lg"})]}),T.jsx("div",{className:"absolute left-8 right-8 h-0.5 bg-gradient-to-r from-transparent via-[#2d9d78] to-transparent animate-scan opacity-60"})]})]}):T.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[T.jsx(Il,{className:"w-16 h-16 text-gray-300 mb-4"}),T.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"製品ラベルを撮影"}),T.jsx(gn,{onClick:yt,className:"bg-[#2d9d78] hover:bg-[#269d70] text-white",children:"カメラを起動"})]})}),S&&T.jsxs("div",{className:"mt-4 flex gap-3",children:[T.jsx(gn,{onClick:O,variant:"outline",className:"flex-1 h-12 border-gray-200 text-gray-600 bg-white",children:"キャンセル"}),T.jsxs(gn,{onClick:G,className:"flex-1 h-12 bg-[#2d9d78] hover:bg-[#269d70] text-white",children:[T.jsx(Il,{className:"w-5 h-5 mr-2"}),"撮影"]})]}),!S&&T.jsxs("div",{className:"mt-4",children:[T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"absolute inset-0 flex items-center",children:T.jsx("div",{className:"w-full border-t border-gray-200"})}),T.jsx("div",{className:"relative flex justify-center text-xs",children:T.jsx("span",{className:"px-2 bg-[#faf9f7] text-gray-400",children:"または"})})]}),T.jsx(gn,{onClick:()=>nt.current?.click(),variant:"outline",className:"w-full mt-4 h-12 border-gray-200 text-gray-600 bg-white",children:"画像を選択"}),T.jsx("input",{ref:nt,type:"file",accept:"image/*",onChange:K,className:"hidden"})]})]})})]}),T.jsx(NE,{open:F,onOpenChange:Q,children:T.jsxs(z0,{className:"bg-white border-gray-200 max-h-[80vh] overflow-y-auto",children:[T.jsx(j0,{children:T.jsxs(I0,{className:"text-gray-800 flex items-center gap-2",children:[T.jsx(Ny,{className:"w-5 h-5 text-[#2d9d78]"}),"根拠（PDF該当箇所）"]})}),T.jsxs("div",{className:"mt-4",children:[g?.sourceText&&T.jsx("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-100",children:T.jsx("p",{className:"text-sm text-gray-600 leading-relaxed whitespace-pre-wrap",children:g.sourceText})}),T.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["※ これは ",u?.fileName," からの抜粋です"]})]})]})})]})}function My({category:u,searchQuery:t,onShowSource:e}){const s=bS[u.type],o={high:{icon:Z1,color:"text-[#2d9d78]",label:"確信度: 高"},medium:{icon:ky,color:"text-amber-500",label:"確信度: 中"},low:{icon:fw,color:"text-red-500",label:"確信度: 低"}}[u.confidence],l=o.icon;return T.jsxs("div",{className:"result-card animate-slide-up",children:[T.jsxs("div",{className:"p-5 border-b border-gray-100",children:[T.jsxs("div",{className:"flex items-start justify-between mb-4",children:[T.jsxs("div",{children:[T.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["「",t,"」の分別"]}),T.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-3",children:[T.jsx("span",{className:"text-3xl",children:s.icon}),u.labelJp]})]}),T.jsx("span",{className:`category-badge category-${u.type}`,children:u.label})]}),T.jsxs("div",{className:`flex items-center gap-2 text-sm ${o.color}`,children:[T.jsx(l,{className:"w-4 h-4"}),T.jsx("span",{children:o.label})]})]}),T.jsxs("div",{className:"p-5 border-b border-gray-100",children:[T.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"出し方"}),T.jsx("p",{className:"text-gray-800",children:u.disposalMethod}),u.notes.length>0&&T.jsx("ul",{className:"mt-3 space-y-2",children:u.notes.map((h,d)=>T.jsxs("li",{className:"text-sm text-gray-500 flex items-start gap-2",children:[T.jsx("span",{className:"text-[#2d9d78] mt-0.5",children:"•"}),h]},d))})]}),T.jsxs("button",{onClick:e,className:"w-full p-4 flex items-center justify-between text-left hover:bg-gray-50 transition-colors",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Ny,{className:"w-5 h-5 text-[#2d9d78]"}),T.jsx("span",{className:"text-sm text-gray-600",children:"根拠を確認"})]}),T.jsx(pd,{className:"w-5 h-5 text-gray-300"})]})]})}function cT({result:u}){return T.jsxs("div",{className:"p-4 bg-white rounded-xl border border-gray-100 shadow-sm",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[T.jsx(Gl,{className:"w-4 h-4 text-[#2d9d78]"}),T.jsxs("span",{className:"text-xs text-gray-500",children:["ページ ",u.pageNumber]}),T.jsx("span",{className:"text-xs text-gray-300",children:"•"}),T.jsxs("span",{className:"text-xs text-[#2d9d78]",children:[Math.round(u.relevance*100),"% 関連"]})]}),T.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",dangerouslySetInnerHTML:{__html:PC(u.context,u.matchedKeywords)}})]})}var uT=(u,t,e,s,a,o,l,h)=>{let d=document.documentElement,f=["light","dark"];function g(A){(Array.isArray(u)?u:[u]).forEach(S=>{let v=S==="class",E=v&&o?a.map(x=>o[x]||x):a;v?(d.classList.remove(...E),d.classList.add(o&&o[A]?o[A]:A)):d.setAttribute(S,A)}),p(A)}function p(A){h&&f.includes(A)&&(d.style.colorScheme=A)}function y(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(s)g(s);else try{let A=localStorage.getItem(t)||e,S=l&&A==="system"?y():A;g(S)}catch{}},hT=z.createContext(void 0),dT={setTheme:u=>{},themes:[]},fT=()=>{var u;return(u=z.useContext(hT))!=null?u:dT};z.memo(({forcedTheme:u,storageKey:t,attribute:e,enableSystem:s,enableColorScheme:a,defaultTheme:o,value:l,themes:h,nonce:d,scriptProps:f})=>{let g=JSON.stringify([e,t,o,u,h,l,s,a]).slice(1,-1);return z.createElement("script",{...f,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${uT.toString()})(${g})`}})});const mT=({...u})=>{const{theme:t="system"}=fT();return T.jsx(YS,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...u})};function pT(){const[u,t]=z.useState(null),[e,s]=z.useState(!1),[a,o]=z.useState([]),[l,h]=z.useState(null),[d,f]=z.useState(!1);z.useEffect(()=>{const S=localStorage.getItem("gomi-pdf-data"),v=localStorage.getItem("gomi-municipality");if(S&&v)try{t(JSON.parse(S)),h(JSON.parse(v)),f(!0)}catch(E){console.error("Failed to parse saved data",E)}},[]);const g=z.useCallback(async(S,v)=>{s(!0);try{const E=await NC(S),x={fileName:S.name,extractedText:E.text,pages:E.pages,uploadedAt:new Date().toISOString(),municipalityName:v.name};t(x),h(v),f(!0),localStorage.setItem("gomi-pdf-data",JSON.stringify(x)),localStorage.setItem("gomi-municipality",JSON.stringify(v))}catch(E){console.error("PDF extraction failed:",E)}finally{s(!1)}},[]),p=z.useCallback(S=>{if(!u)return[];const v=kC(u.extractedText,S,u.pages);return o(v),v},[u]),y=z.useCallback(S=>u?LC(u.extractedText,S):null,[u]),A=z.useCallback(()=>{t(null),h(null),o([]),f(!1),localStorage.removeItem("gomi-pdf-data"),localStorage.removeItem("gomi-municipality")},[]);return T.jsxs("div",{className:"app-container",children:[d?T.jsx(lT,{pdfData:u,municipality:l,onSearch:p,onCategorize:y,searchResults:a,onReset:A}):T.jsx(XS,{onPDFUpload:g,isLoading:e}),T.jsx(mT,{position:"top-center",richColors:!0})]})}H1.createRoot(document.getElementById("root")).render(T.jsx(z.StrictMode,{children:T.jsx(pT,{})}));</script>
    <style rel="stylesheet" crossorigin>@import"https://fonts.googleapis.com/css2?family=Zen+Kaku+Gothic+New:wght@400;500;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap";*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}:root{--background: 0 0% 100%;--foreground: 0 0% 3.9%;--card: 0 0% 100%;--card-foreground: 0 0% 3.9%;--popover: 0 0% 100%;--popover-foreground: 0 0% 3.9%;--primary: 0 0% 9%;--primary-foreground: 0 0% 98%;--secondary: 0 0% 96.1%;--secondary-foreground: 0 0% 9%;--muted: 0 0% 96.1%;--muted-foreground: 0 0% 45.1%;--accent: 0 0% 96.1%;--accent-foreground: 0 0% 9%;--destructive: 0 84.2% 60.2%;--destructive-foreground: 0 0% 98%;--border: 0 0% 89.8%;--input: 0 0% 89.8%;--ring: 0 0% 3.9%;--radius: .5rem}*{border-color:hsl(var(--border))}body{background-color:hsl(var(--background));color:hsl(var(--foreground))}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{inset:0}.inset-8{inset:2rem}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.-bottom-12{bottom:-3rem}.-bottom-2{bottom:-.5rem}.-left-12{left:-3rem}.-right-12{right:-3rem}.-right-2{right:-.5rem}.-top-12{top:-3rem}.bottom-0{bottom:0}.left-0{left:0}.left-1\/2{left:50%}.left-2{left:.5rem}.left-4{left:1rem}.left-8{left:2rem}.left-\[50\%\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.right-4{right:1rem}.right-8{right:2rem}.top-0{top:0}.top-1{top:.25rem}.top-1\/2{top:50%}.top-3{top:.75rem}.top-4{top:1rem}.top-\[1px\]{top:1px}.top-\[50\%\]{top:50%}.top-\[60\%\]{top:60%}.top-full{top:100%}.z-10{z-index:10}.z-50{z-index:50}.z-\[100\]{z-index:100}.z-\[1\]{z-index:1}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-ml-4{margin-left:-1rem}.-mt-4{margin-top:-1rem}.mb-0{margin-bottom:0}.mb-0\.5{margin-bottom:.125rem}.mb-1{margin-bottom:.25rem}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-auto{margin-left:auto}.mr-2{margin-right:.5rem}.mt-0{margin-top:0}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-1\.5{margin-top:.375rem}.mt-2{margin-top:.5rem}.mt-24{margin-top:6rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-8{margin-top:2rem}.mt-auto{margin-top:auto}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-\[4\/3\]{aspect-ratio:4/3}.aspect-square{aspect-ratio:1 / 1}.size-4{width:1rem;height:1rem}.size-\[--cell-size\]{width:var(--cell-size);height:var(--cell-size)}.h-0{height:0px}.h-0\.5{height:.125rem}.h-1{height:.25rem}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\.5{height:.625rem}.h-24{height:6rem}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-32{height:8rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\[--cell-size\]{height:var(--cell-size)}.h-\[1px\]{height:1px}.h-\[var\(--radix-navigation-menu-viewport-height\)\]{height:var(--radix-navigation-menu-viewport-height)}.h-\[var\(--radix-select-trigger-height\)\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.max-h-64{max-height:16rem}.max-h-\[--radix-context-menu-content-available-height\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\[--radix-select-content-available-height\]{max-height:var(--radix-select-content-available-height)}.max-h-\[300px\]{max-height:300px}.max-h-\[80vh\]{max-height:80vh}.max-h-\[var\(--radix-dropdown-menu-content-available-height\)\]{max-height:var(--radix-dropdown-menu-content-available-height)}.max-h-screen{max-height:100vh}.min-h-\[60px\]{min-height:60px}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\.5{width:.625rem}.w-24{width:6rem}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-3\/4{width:75%}.w-32{width:8rem}.w-4{width:1rem}.w-48{width:12rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-64{width:16rem}.w-72{width:18rem}.w-8{width:2rem}.w-9{width:2.25rem}.w-\[--cell-size\]{width:var(--cell-size)}.w-\[100px\]{width:100px}.w-\[1px\]{width:1px}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-max{width:-moz-max-content;width:max-content}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-8{min-width:2rem}.min-w-9{min-width:2.25rem}.min-w-\[--cell-size\]{min-width:var(--cell-size)}.min-w-\[12rem\]{min-width:12rem}.min-w-\[8rem\]{min-width:8rem}.min-w-\[var\(--radix-select-trigger-width\)\]{min-width:var(--radix-select-trigger-width)}.max-w-lg{max-width:32rem}.max-w-max{max-width:-moz-max-content;max-width:max-content}.max-w-xs{max-width:20rem}.flex-1{flex:1 1 0%}.flex-shrink-0,.shrink-0{flex-shrink:0}.grow{flex-grow:1}.grow-0{flex-grow:0}.basis-full{flex-basis:100%}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\[--radix-context-menu-content-transform-origin\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\[--radix-dropdown-menu-content-transform-origin\]{transform-origin:var(--radix-dropdown-menu-content-transform-origin)}.origin-\[--radix-hover-card-content-transform-origin\]{transform-origin:var(--radix-hover-card-content-transform-origin)}.origin-\[--radix-menubar-content-transform-origin\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-\[--radix-popover-content-transform-origin\]{transform-origin:var(--radix-popover-content-transform-origin)}.origin-\[--radix-select-content-transform-origin\]{transform-origin:var(--radix-select-content-transform-origin)}.origin-\[--radix-tooltip-content-transform-origin\]{transform-origin:var(--radix-tooltip-content-transform-origin)}.-translate-x-1\/2{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\[-50\%\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\[-50\%\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-12{--tw-rotate: 12deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-45{--tw-rotate: 45deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-default{cursor:default}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.list-none{list-style-type:none}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.break-words{overflow-wrap:break-word}.rounded-2xl{border-radius:1rem}.rounded-\[inherit\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-none{border-radius:0}.rounded-sm{border-radius:calc(var(--radius) - 4px)}.rounded-xl{border-radius:.75rem}.rounded-l-md{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.rounded-r-md{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.rounded-t-\[10px\]{border-top-left-radius:10px;border-top-right-radius:10px}.rounded-bl-lg{border-bottom-left-radius:var(--radius)}.rounded-br-lg{border-bottom-right-radius:var(--radius)}.rounded-tl-lg{border-top-left-radius:var(--radius)}.rounded-tl-sm{border-top-left-radius:calc(var(--radius) - 4px)}.rounded-tr-lg{border-top-right-radius:var(--radius)}.border{border-width:1px}.border-0{border-width:0px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-l-2{border-left-width:2px}.border-r{border-right-width:1px}.border-r-2{border-right-width:2px}.border-t{border-top-width:1px}.border-t-2{border-top-width:2px}.border-dashed{border-style:dashed}.border-\[\#2d9d78\]{--tw-border-opacity: 1;border-color:rgb(45 157 120 / var(--tw-border-opacity))}.border-\[\#2d9d78\]\/30{border-color:#2d9d784d}.border-\[\#2d9d78\]\/40{border-color:#2d9d7866}.border-amber-100{--tw-border-opacity: 1;border-color:rgb(254 243 199 / var(--tw-border-opacity))}.border-blue-100{--tw-border-opacity: 1;border-color:rgb(219 234 254 / var(--tw-border-opacity))}.border-destructive{border-color:hsl(var(--destructive))}.border-destructive\/50{border-color:hsl(var(--destructive) / .5)}.border-emerald-100{--tw-border-opacity: 1;border-color:rgb(209 250 229 / var(--tw-border-opacity))}.border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity))}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity))}.border-input{border-color:hsl(var(--input))}.border-primary{border-color:hsl(var(--primary))}.border-primary\/50{border-color:hsl(var(--primary) / .5)}.border-purple-100{--tw-border-opacity: 1;border-color:rgb(243 232 255 / var(--tw-border-opacity))}.border-transparent{border-color:transparent}.border-l-transparent{border-left-color:transparent}.border-t-transparent{border-top-color:transparent}.bg-\[\#2d9d78\]{--tw-bg-opacity: 1;background-color:rgb(45 157 120 / var(--tw-bg-opacity))}.bg-\[\#e8f5f0\]{--tw-bg-opacity: 1;background-color:rgb(232 245 240 / var(--tw-bg-opacity))}.bg-\[\#faf9f7\]{--tw-bg-opacity: 1;background-color:rgb(250 249 247 / var(--tw-bg-opacity))}.bg-accent{background-color:hsl(var(--accent))}.bg-amber-100{--tw-bg-opacity: 1;background-color:rgb(254 243 199 / var(--tw-bg-opacity))}.bg-amber-50{--tw-bg-opacity: 1;background-color:rgb(255 251 235 / var(--tw-bg-opacity))}.bg-background{background-color:hsl(var(--background))}.bg-black\/80{background-color:#000c}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity))}.bg-border{background-color:hsl(var(--border))}.bg-card{background-color:hsl(var(--card))}.bg-destructive{background-color:hsl(var(--destructive))}.bg-emerald-50{--tw-bg-opacity: 1;background-color:rgb(236 253 245 / var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.bg-muted{background-color:hsl(var(--muted))}.bg-muted\/50{background-color:hsl(var(--muted) / .5)}.bg-popover{background-color:hsl(var(--popover))}.bg-primary{background-color:hsl(var(--primary))}.bg-primary\/10{background-color:hsl(var(--primary) / .1)}.bg-primary\/20{background-color:hsl(var(--primary) / .2)}.bg-purple-50{--tw-bg-opacity: 1;background-color:rgb(250 245 255 / var(--tw-bg-opacity))}.bg-secondary{background-color:hsl(var(--secondary))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.bg-white\/90{background-color:#ffffffe6}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right,var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right,var(--tw-gradient-stops))}.from-\[\#2d9d78\]{--tw-gradient-from: #2d9d78 var(--tw-gradient-from-position);--tw-gradient-to: rgb(45 157 120 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-\[\#2d9d78\]\/20{--tw-gradient-from: rgb(45 157 120 / .2) var(--tw-gradient-from-position);--tw-gradient-to: rgb(45 157 120 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-\[\#e8f5f0\]{--tw-gradient-from: #e8f5f0 var(--tw-gradient-from-position);--tw-gradient-to: rgb(232 245 240 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-\[\#faf9f7\]{--tw-gradient-from: #faf9f7 var(--tw-gradient-from-position);--tw-gradient-to: rgb(250 249 247 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-transparent{--tw-gradient-from: transparent var(--tw-gradient-from-position);--tw-gradient-to: rgb(0 0 0 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.via-\[\#2d9d78\]{--tw-gradient-to: rgb(45 157 120 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), #2d9d78 var(--tw-gradient-via-position), var(--tw-gradient-to)}.to-\[\#059669\]{--tw-gradient-to: #059669 var(--tw-gradient-to-position)}.to-\[\#059669\]\/20{--tw-gradient-to: rgb(5 150 105 / .2) var(--tw-gradient-to-position)}.to-\[\#d1fae5\]{--tw-gradient-to: #d1fae5 var(--tw-gradient-to-position)}.to-\[\#f5f3ef\]{--tw-gradient-to: #f5f3ef var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to: transparent var(--tw-gradient-to-position)}.fill-current{fill:currentColor}.fill-primary{fill:hsl(var(--primary))}.object-cover{-o-object-fit:cover;object-fit:cover}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\[1px\]{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.px-\[--cell-size\]{padding-left:var(--cell-size);padding-right:var(--cell-size)}.py-0{padding-top:0;padding-bottom:0}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pb-8{padding-bottom:2rem}.pl-12{padding-left:3rem}.pl-2{padding-left:.5rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-1{padding-right:.25rem}.pr-2{padding-right:.5rem}.pr-24{padding-right:6rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-4{padding-top:1rem}.pt-6{padding-top:1.5rem}.pt-8{padding-top:2rem}.text-left{text-align:left}.text-center{text-align:center}.align-middle{vertical-align:middle}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-\[0\.8rem\]{font-size:.8rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.tracking-tight{letter-spacing:-.025em}.tracking-widest{letter-spacing:.1em}.text-\[\#2d9d78\]{--tw-text-opacity: 1;color:rgb(45 157 120 / var(--tw-text-opacity))}.text-accent-foreground{color:hsl(var(--accent-foreground))}.text-amber-500{--tw-text-opacity: 1;color:rgb(245 158 11 / var(--tw-text-opacity))}.text-amber-600{--tw-text-opacity: 1;color:rgb(217 119 6 / var(--tw-text-opacity))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity))}.text-card-foreground{color:hsl(var(--card-foreground))}.text-current{color:currentColor}.text-destructive{color:hsl(var(--destructive))}.text-destructive-foreground{color:hsl(var(--destructive-foreground))}.text-emerald-600{--tw-text-opacity: 1;color:rgb(5 150 105 / var(--tw-text-opacity))}.text-foreground{color:hsl(var(--foreground))}.text-foreground\/50{color:hsl(var(--foreground) / .5)}.text-gray-300{--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity))}.text-muted-foreground{color:hsl(var(--muted-foreground))}.text-popover-foreground{color:hsl(var(--popover-foreground))}.text-primary{color:hsl(var(--primary))}.text-primary-foreground{color:hsl(var(--primary-foreground))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity))}.text-secondary-foreground{color:hsl(var(--secondary-foreground))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-90{opacity:.9}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\[\#2d9d78\]\/20{--tw-shadow-color: rgb(45 157 120 / .2);--tw-shadow: var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background))}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.zoom-in-95{--tw-enter-scale: .95}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.\[--cell-size\:2rem\]{--cell-size: 2rem}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-transparent::file-selector-button{background-color:transparent}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-medium::file-selector-button{font-weight:500}.file\:text-foreground::file-selector-button{color:hsl(var(--foreground))}.placeholder\:text-gray-400::-moz-placeholder{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.placeholder\:text-gray-400::placeholder{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity))}.placeholder\:text-muted-foreground::-moz-placeholder{color:hsl(var(--muted-foreground))}.placeholder\:text-muted-foreground::placeholder{color:hsl(var(--muted-foreground))}.hover\:border-\[\#2d9d78\]:hover{--tw-border-opacity: 1;border-color:rgb(45 157 120 / var(--tw-border-opacity))}.hover\:border-\[\#2d9d78\]\/30:hover{border-color:#2d9d784d}.hover\:bg-\[\#269d70\]:hover{--tw-bg-opacity: 1;background-color:rgb(38 157 112 / var(--tw-bg-opacity))}.hover\:bg-\[\#e8f5f0\]:hover{--tw-bg-opacity: 1;background-color:rgb(232 245 240 / var(--tw-bg-opacity))}.hover\:bg-\[\#faf9f7\]:hover{--tw-bg-opacity: 1;background-color:rgb(250 249 247 / var(--tw-bg-opacity))}.hover\:bg-accent:hover{background-color:hsl(var(--accent))}.hover\:bg-destructive\/80:hover{background-color:hsl(var(--destructive) / .8)}.hover\:bg-destructive\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}.hover\:bg-muted:hover{background-color:hsl(var(--muted))}.hover\:bg-muted\/50:hover{background-color:hsl(var(--muted) / .5)}.hover\:bg-primary\/80:hover{background-color:hsl(var(--primary) / .8)}.hover\:bg-primary\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\:bg-secondary:hover{background-color:hsl(var(--secondary))}.hover\:bg-secondary\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\:bg-white:hover{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.hover\:from-\[\#269d70\]:hover{--tw-gradient-from: #269d70 var(--tw-gradient-from-position);--tw-gradient-to: rgb(38 157 112 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.hover\:to-\[\#048a5e\]:hover{--tw-gradient-to: #048a5e var(--tw-gradient-to-position)}.hover\:text-accent-foreground:hover{color:hsl(var(--accent-foreground))}.hover\:text-foreground:hover{color:hsl(var(--foreground))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.hover\:text-muted-foreground:hover{color:hsl(var(--muted-foreground))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.focus\:border-\[\#2d9d78\]:focus{--tw-border-opacity: 1;border-color:rgb(45 157 120 / var(--tw-border-opacity))}.focus\:bg-accent:focus{background-color:hsl(var(--accent))}.focus\:text-accent-foreground:focus{color:hsl(var(--accent-foreground))}.focus\:opacity-100:focus{opacity:1}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-\[\#2d9d78\]\/20:focus{--tw-ring-color: rgb(45 157 120 / .2)}.focus\:ring-ring:focus{--tw-ring-color: hsl(var(--ring))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-ring:focus-visible{--tw-ring-color: hsl(var(--ring))}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\:ring-offset-background:focus-visible{--tw-ring-offset-color: hsl(var(--background))}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:opacity-50:disabled{opacity:.5}.group:hover .group-hover\:bg-\[\#e8f5f0\]{--tw-bg-opacity: 1;background-color:rgb(232 245 240 / var(--tw-bg-opacity))}.group:hover .group-hover\:text-\[\#2d9d78\]{--tw-text-opacity: 1;color:rgb(45 157 120 / var(--tw-text-opacity))}.group:hover .group-hover\:opacity-100{opacity:1}.group.destructive .group-\[\.destructive\]\:border-muted\/40{border-color:hsl(var(--muted) / .4)}.group.toaster .group-\[\.toaster\]\:border-border{border-color:hsl(var(--border))}.group.toast .group-\[\.toast\]\:bg-muted{background-color:hsl(var(--muted))}.group.toast .group-\[\.toast\]\:bg-primary{background-color:hsl(var(--primary))}.group.toaster .group-\[\.toaster\]\:bg-background{background-color:hsl(var(--background))}.group.destructive .group-\[\.destructive\]\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity))}.group.toast .group-\[\.toast\]\:text-muted-foreground{color:hsl(var(--muted-foreground))}.group.toast .group-\[\.toast\]\:text-primary-foreground{color:hsl(var(--primary-foreground))}.group.toaster .group-\[\.toaster\]\:text-foreground{color:hsl(var(--foreground))}.group.toaster .group-\[\.toaster\]\:shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.group.destructive .group-\[\.destructive\]\:hover\:border-destructive\/30:hover{border-color:hsl(var(--destructive) / .3)}.group.destructive .group-\[\.destructive\]\:hover\:bg-destructive:hover{background-color:hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:hover\:text-destructive-foreground:hover{color:hsl(var(--destructive-foreground))}.group.destructive .group-\[\.destructive\]\:hover\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity))}.group.destructive .group-\[\.destructive\]\:focus\:ring-destructive:focus{--tw-ring-color: hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:focus\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity))}.group.destructive .group-\[\.destructive\]\:focus\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer:disabled~.peer-disabled\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\:opacity-70{opacity:.7}.aria-disabled\:opacity-50[aria-disabled=true]{opacity:.5}.aria-selected\:text-muted-foreground[aria-selected=true]{color:hsl(var(--muted-foreground))}.data-\[disabled\=true\]\:pointer-events-none[data-disabled=true],.data-\[disabled\]\:pointer-events-none[data-disabled]{pointer-events:none}.data-\[side\=bottom\]\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=left\]\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=right\]\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=top\]\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=checked\]\:translate-x-4[data-state=checked]{--tw-translate-x: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=unchecked\]\:translate-x-0[data-state=unchecked],.data-\[swipe\=cancel\]\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=end\]\:translate-x-\[var\(--radix-toast-swipe-end-x\)\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=move\]\:translate-x-\[var\(--radix-toast-swipe-move-x\)\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes accordion-up{0%{height:var(--radix-accordion-content-height)}to{height:0}}.data-\[state\=closed\]\:animate-accordion-up[data-state=closed]{animation:accordion-up .2s ease-out}@keyframes accordion-down{0%{height:0}to{height:var(--radix-accordion-content-height)}}.data-\[state\=open\]\:animate-accordion-down[data-state=open]{animation:accordion-down .2s ease-out}.data-\[range-end\=true\]\:rounded-md[data-range-end=true]{border-radius:calc(var(--radius) - 2px)}.data-\[range-middle\=true\]\:rounded-none[data-range-middle=true]{border-radius:0}.data-\[range-start\=true\]\:rounded-md[data-range-start=true]{border-radius:calc(var(--radius) - 2px)}.data-\[selected\=true\]\:rounded-none[data-selected=true]{border-radius:0}.data-\[range-end\=true\]\:bg-primary[data-range-end=true]{background-color:hsl(var(--primary))}.data-\[range-middle\=true\]\:bg-accent[data-range-middle=true]{background-color:hsl(var(--accent))}.data-\[range-start\=true\]\:bg-primary[data-range-start=true],.data-\[selected-single\=true\]\:bg-primary[data-selected-single=true]{background-color:hsl(var(--primary))}.data-\[selected\=true\]\:bg-accent[data-selected=true]{background-color:hsl(var(--accent))}.data-\[state\=active\]\:bg-background[data-state=active]{background-color:hsl(var(--background))}.data-\[state\=checked\]\:bg-primary[data-state=checked]{background-color:hsl(var(--primary))}.data-\[state\=on\]\:bg-accent[data-state=on],.data-\[state\=open\]\:bg-accent[data-state=open]{background-color:hsl(var(--accent))}.data-\[state\=open\]\:bg-accent\/50[data-state=open]{background-color:hsl(var(--accent) / .5)}.data-\[state\=open\]\:bg-secondary[data-state=open]{background-color:hsl(var(--secondary))}.data-\[state\=selected\]\:bg-muted[data-state=selected]{background-color:hsl(var(--muted))}.data-\[state\=unchecked\]\:bg-input[data-state=unchecked]{background-color:hsl(var(--input))}.data-\[placeholder\]\:text-muted-foreground[data-placeholder]{color:hsl(var(--muted-foreground))}.data-\[range-end\=true\]\:text-primary-foreground[data-range-end=true]{color:hsl(var(--primary-foreground))}.data-\[range-middle\=true\]\:text-accent-foreground[data-range-middle=true]{color:hsl(var(--accent-foreground))}.data-\[range-start\=true\]\:text-primary-foreground[data-range-start=true],.data-\[selected-single\=true\]\:text-primary-foreground[data-selected-single=true]{color:hsl(var(--primary-foreground))}.data-\[selected\=true\]\:text-accent-foreground[data-selected=true]{color:hsl(var(--accent-foreground))}.data-\[state\=active\]\:text-foreground[data-state=active]{color:hsl(var(--foreground))}.data-\[state\=checked\]\:text-primary-foreground[data-state=checked]{color:hsl(var(--primary-foreground))}.data-\[state\=on\]\:text-accent-foreground[data-state=on],.data-\[state\=open\]\:text-accent-foreground[data-state=open]{color:hsl(var(--accent-foreground))}.data-\[state\=open\]\:text-muted-foreground[data-state=open]{color:hsl(var(--muted-foreground))}.data-\[disabled\=true\]\:opacity-50[data-disabled=true],.data-\[disabled\]\:opacity-50[data-disabled]{opacity:.5}.data-\[state\=active\]\:shadow[data-state=active]{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\[swipe\=move\]\:transition-none[data-swipe=move]{transition-property:none}.data-\[state\=closed\]\:duration-300[data-state=closed]{transition-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{transition-duration:.5s}.data-\[motion\^\=from-\]\:animate-in[data-motion^=from-],.data-\[state\=open\]\:animate-in[data-state=open],.data-\[state\=visible\]\:animate-in[data-state=visible]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\[motion\^\=to-\]\:animate-out[data-motion^=to-],.data-\[state\=closed\]\:animate-out[data-state=closed],.data-\[state\=hidden\]\:animate-out[data-state=hidden],.data-\[swipe\=end\]\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\[motion\^\=from-\]\:fade-in[data-motion^=from-]{--tw-enter-opacity: 0}.data-\[motion\^\=to-\]\:fade-out[data-motion^=to-],.data-\[state\=closed\]\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\[state\=closed\]\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\[state\=hidden\]\:fade-out[data-state=hidden]{--tw-exit-opacity: 0}.data-\[state\=open\]\:fade-in-0[data-state=open],.data-\[state\=visible\]\:fade-in[data-state=visible]{--tw-enter-opacity: 0}.data-\[state\=closed\]\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\[state\=open\]\:zoom-in-90[data-state=open]{--tw-enter-scale: .9}.data-\[state\=open\]\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\[motion\=from-end\]\:slide-in-from-right-52[data-motion=from-end]{--tw-enter-translate-x: 13rem}.data-\[motion\=from-start\]\:slide-in-from-left-52[data-motion=from-start]{--tw-enter-translate-x: -13rem}.data-\[motion\=to-end\]\:slide-out-to-right-52[data-motion=to-end]{--tw-exit-translate-x: 13rem}.data-\[motion\=to-start\]\:slide-out-to-left-52[data-motion=to-start]{--tw-exit-translate-x: -13rem}.data-\[side\=bottom\]\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\[side\=left\]\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\[side\=right\]\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\[side\=top\]\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\[state\=closed\]\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\[state\=closed\]\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\[state\=closed\]\:slide-out-to-left-1\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\[state\=closed\]\:slide-out-to-right[data-state=closed],.data-\[state\=closed\]\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\[state\=closed\]\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\[state\=closed\]\:slide-out-to-top-\[48\%\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\[state\=open\]\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\[state\=open\]\:slide-in-from-left-1\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\[state\=open\]\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\[state\=open\]\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=open\]\:slide-in-from-top-\[48\%\][data-state=open]{--tw-enter-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=closed\]\:duration-300[data-state=closed]{animation-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{animation-duration:.5s}.data-\[state\=open\]\:hover\:bg-accent:hover[data-state=open]{background-color:hsl(var(--accent))}.data-\[state\=open\]\:focus\:bg-accent:focus[data-state=open]{background-color:hsl(var(--accent))}.group\/day[data-focused=true] .group-data-\[focused\=true\]\/day\:relative{position:relative}.group\/day[data-focused=true] .group-data-\[focused\=true\]\/day\:z-10{z-index:10}.group[data-state=open] .group-data-\[state\=open\]\:rotate-180{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group\/day[data-focused=true] .group-data-\[focused\=true\]\/day\:border-ring{border-color:hsl(var(--ring))}.group\/day[data-focused=true] .group-data-\[focused\=true\]\/day\:ring-\[3px\]{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.group\/day[data-focused=true] .group-data-\[focused\=true\]\/day\:ring-ring\/50{--tw-ring-color: hsl(var(--ring) / .5)}:is(.dark .dark\:border-destructive){border-color:hsl(var(--destructive))}@media(min-width:640px){.sm\:bottom-0{bottom:0}.sm\:right-0{right:0}.sm\:top-auto{top:auto}.sm\:max-w-sm{max-width:24rem}.sm\:flex-row{flex-direction:row}.sm\:flex-col{flex-direction:column}.sm\:justify-end{justify-content:flex-end}.sm\:gap-2{gap:.5rem}.sm\:gap-2\.5{gap:.625rem}.sm\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\:rounded-lg{border-radius:var(--radius)}.sm\:text-left{text-align:left}.data-\[state\=open\]\:sm\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media(min-width:768px){.md\:absolute{position:absolute}.md\:w-\[var\(--radix-navigation-menu-viewport-width\)\]{width:var(--radix-navigation-menu-viewport-width)}.md\:w-auto{width:auto}.md\:max-w-\[420px\]{max-width:420px}.md\:flex-row{flex-direction:row}.md\:text-sm{font-size:.875rem;line-height:1.25rem}}.\[\&\+div\]\:text-xs+div{font-size:.75rem;line-height:1rem}.\[\&\:first-child\[data-selected\=true\]_button\]\:rounded-l-md:first-child[data-selected=true] button{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.\[\&\:has\(\[role\=checkbox\]\)\]\:pr-0:has([role=checkbox]){padding-right:0}.\[\&\:last-child\[data-selected\=true\]_button\]\:rounded-r-md:last-child[data-selected=true] button{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\[\&\>\[role\=checkbox\]\]\:translate-y-\[2px\]>[role=checkbox]{--tw-translate-y: 2px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\>span\]\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\[\&\>span\]\:text-xs>span{font-size:.75rem;line-height:1rem}.\[\&\>span\]\:opacity-70>span{opacity:.7}.\[\&\>svg\+div\]\:translate-y-\[-3px\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\>svg\]\:absolute>svg{position:absolute}.\[\&\>svg\]\:left-4>svg{left:1rem}.\[\&\>svg\]\:top-4>svg{top:1rem}.\[\&\>svg\]\:size-3\.5>svg{width:.875rem;height:.875rem}.\[\&\>svg\]\:size-4>svg{width:1rem;height:1rem}.\[\&\>svg\]\:h-3\.5>svg{height:.875rem}.\[\&\>svg\]\:w-3\.5>svg{width:.875rem}.\[\&\>svg\]\:shrink-0>svg{flex-shrink:0}.\[\&\>svg\]\:text-destructive>svg{color:hsl(var(--destructive))}.\[\&\>svg\]\:text-foreground>svg{color:hsl(var(--foreground))}.\[\&\>svg\]\:text-muted-foreground>svg{color:hsl(var(--muted-foreground))}.\[\&\>svg\~\*\]\:pl-7>svg~*{padding-left:1.75rem}.\[\&\>tr\]\:last\:border-b-0:last-child>tr{border-bottom-width:0px}.\[\&\[data-state\=open\]\>svg\]\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&_\[cmdk-group-heading\]\]\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-group-heading\]\]\:py-1\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\[\&_\[cmdk-group-heading\]\]\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\[\&_\[cmdk-group-heading\]\]\:font-medium [cmdk-group-heading]{font-weight:500}.\[\&_\[cmdk-group-heading\]\]\:text-muted-foreground [cmdk-group-heading]{color:hsl(var(--muted-foreground))}.\[\&_\[cmdk-group\]\:not\(\[hidden\]\)_\~\[cmdk-group\]\]\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\[\&_\[cmdk-group\]\]\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\[\&_\[cmdk-input\]\]\:h-12 [cmdk-input]{height:3rem}.\[\&_\[cmdk-item\]\]\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-item\]\]\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\[\&_\[cmdk-item\]_svg\]\:h-5 [cmdk-item] svg{height:1.25rem}.\[\&_\[cmdk-item\]_svg\]\:w-5 [cmdk-item] svg{width:1.25rem}.\[\&_p\]\:leading-relaxed p{line-height:1.625}.\[\&_svg\]\:pointer-events-none svg{pointer-events:none}.\[\&_svg\]\:size-4 svg{width:1rem;height:1rem}.\[\&_svg\]\:shrink-0 svg{flex-shrink:0}.\[\&_tr\:last-child\]\:border-0 tr:last-child{border-width:0px}.\[\&_tr\]\:border-b tr{border-bottom-width:1px}[data-slot=card-content] .\[\[data-slot\=card-content\]_\&\]\:bg-transparent,[data-slot=popover-content] .\[\[data-slot\=popover-content\]_\&\]\:bg-transparent{background-color:transparent}:root{--app-bg: #faf9f7;--card-bg: #ffffff;--card-border: #e8e4df;--accent-green: #2d9d78;--accent-green-light: #e8f5f0;--accent-amber: #d97706;--accent-red: #dc2626;--accent-blue: #2563eb;--text-primary: #1f2937;--text-secondary: #4b5563;--text-muted: #9ca3af;--cream: #f5f3ef;--warm-white: #fffcf9}*{box-sizing:border-box}html,body,#root{height:100%;margin:0;padding:0}body{font-family:Noto Sans JP,Zen Kaku Gothic New,-apple-system,BlinkMacSystemFont,sans-serif;background:var(--app-bg);color:var(--text-primary);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app-container{min-height:100vh;background:linear-gradient(180deg,#faf9f7,#f5f3ef)}::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#d1ccc4;border-radius:3px}::-webkit-scrollbar-thumb:hover{background:#b8b2a8}.glass{background:#fffffff2;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid rgba(0,0,0,.06)}.soft-shadow{box-shadow:0 2px 8px #0000000a,0 4px 16px #0000000a}@keyframes float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes pulse-glow{0%,to{opacity:1}50%{opacity:.6}}@keyframes slide-up{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes scan-line{0%{transform:translateY(-100%)}to{transform:translateY(400%)}}@keyframes shimmer{0%{background-position:-200% 0}to{background-position:200% 0}}.animate-float{animation:float 3s ease-in-out infinite}.animate-pulse-glow{animation:pulse-glow 2s ease-in-out infinite}.animate-slide-up{animation:slide-up .5s ease-out forwards}.animate-fade-in{animation:fade-in .3s ease-out forwards}.animate-scan{animation:scan-line 2s linear infinite}.category-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:13px;font-weight:600;letter-spacing:.02em}.category-burnable{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.category-non-burnable{background:#eff6ff;color:#2563eb;border:1px solid #bfdbfe}.category-recyclable{background:#ecfdf5;color:#059669;border:1px solid #a7f3d0}.category-hazardous{background:#fffbeb;color:#d97706;border:1px solid #fde68a}.category-oversized{background:#faf5ff;color:#7c3aed;border:1px solid #ddd6fe}.category-unknown{background:#f3f4f6;color:#6b7280;border:1px solid #e5e7eb}.highlight{background:linear-gradient(120deg,#2d9d7833,#2d9d781a);padding:2px 4px;border-radius:4px;color:#047857;font-weight:500}@supports (padding-bottom: env(safe-area-inset-bottom)){.safe-area-bottom{padding-bottom:env(safe-area-inset-bottom)}}.gradient-text{background:linear-gradient(135deg,#2d9d78,#059669,#0d9488);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}input[type=text],input[type=search]{background:#fff;border:1px solid #e5e7eb;color:var(--text-primary);transition:all .2s ease}input[type=text]:focus,input[type=search]:focus{border-color:#2d9d78;box-shadow:0 0 0 3px #2d9d781a;outline:none}input::-moz-placeholder{color:var(--text-muted)}input::placeholder{color:var(--text-muted)}.btn-primary{background:linear-gradient(135deg,#2d9d78,#059669);color:#fff;font-weight:600;border:none;cursor:pointer;transition:all .2s ease}.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px #2d9d7840}.btn-primary:active{transform:translateY(0)}.result-card{background:#fff;border:1px solid #e8e4df;border-radius:16px;overflow:hidden;transition:all .3s ease;box-shadow:0 2px 8px #0000000a}.result-card:hover{border-color:#2d9d78;box-shadow:0 4px 16px #00000014}.quick-action-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px}.quick-action-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;padding:16px 12px;background:#fff;border:1px solid #e8e4df;border-radius:14px;color:var(--text-secondary);font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;box-shadow:0 1px 3px #0000000a}.quick-action-btn:hover{background:var(--accent-green-light);border-color:#2d9d78;color:#047857;transform:translateY(-2px);box-shadow:0 4px 12px #0000000f}.quick-action-btn svg{opacity:.8}.quick-action-btn:hover svg{opacity:1}.shimmer{background:linear-gradient(90deg,#0000,#00000008,#0000);background-size:200% 100%;animation:shimmer 1.5s infinite}.tab-nav{display:flex;background:#f3f1ed;border-radius:12px;padding:4px;gap:4px}.tab-btn{flex:1;padding:10px 16px;background:transparent;border:none;border-radius:8px;color:var(--text-muted);font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.tab-btn.active{background:#fff;color:#2d9d78;box-shadow:0 1px 3px #00000014}.tab-btn:hover:not(.active){color:var(--text-secondary)}</style>
    <style>
      :root {
        --app-bg: #f7efe6;
        --card-bg: #fffaf2;
        --card-border: rgba(42, 36, 68, 0.12);
        --accent-green: #7fa67a;
        --accent-green-light: rgba(127, 166, 122, 0.16);
        --accent-amber: #c4a42b;
        --accent-red: #d65a4a;
        --accent-blue: #1f1c6b;
        --text-primary: #1f1c6b;
        --text-secondary: #514a63;
        --text-muted: #7a748a;
        --cream: #f3e7d6;
        --warm-white: #fffdf8;
        --radius: 22px;
        --shadow-soft: 0 16px 30px rgba(42, 36, 68, 0.08), 0 6px 12px rgba(42, 36, 68, 0.06);
        --shadow-lift: 0 24px 48px rgba(42, 36, 68, 0.14), 0 10px 24px rgba(42, 36, 68, 0.1);
      }

      body {
        font-family: "Avenir Next", "Avenir", "Hiragino Sans", "Hiragino Kaku Gothic ProN",
          "Yu Gothic UI", "Noto Sans JP", sans-serif;
        color: var(--text-primary);
        background: var(--app-bg);
        letter-spacing: 0.014em;
      }

      body::before,
      body::after {
        content: "";
        position: fixed;
        pointer-events: none;
        z-index: 0;
        inset: -10% -10% auto -10%;
        height: 65vh;
        background:
          radial-gradient(280px 280px at 12% 28%, rgba(127, 166, 122, 0.9), rgba(127, 166, 122, 0.9) 40%, transparent 41%),
          radial-gradient(220px 220px at 14% 30%, rgba(247, 239, 230, 1), rgba(247, 239, 230, 1) 28%, transparent 29%),
          radial-gradient(200px 200px at 82% 18%, rgba(196, 164, 43, 0.95) 0 50%, transparent 51%),
          radial-gradient(200px 200px at 88% 12%, rgba(255, 255, 255, 0.9) 0 50%, transparent 51%),
          radial-gradient(140px 140px at 18% 70%, rgba(196, 164, 43, 0.9) 0 50%, transparent 51%),
          radial-gradient(140px 140px at 22% 64%, rgba(127, 166, 122, 0.9) 0 50%, transparent 51%),
          radial-gradient(420px 420px at 84% 74%, rgba(127, 166, 122, 0.12), rgba(127, 166, 122, 0.12) 30%, transparent 31%);
        opacity: 0.9;
      }

      body::after {
        inset: auto -10% -10% -10%;
        height: 55vh;
        background:
          radial-gradient(520px 300px at 20% 80%, rgba(255, 255, 255, 0.7), transparent 60%),
          radial-gradient(620px 360px at 85% 90%, rgba(127, 166, 122, 0.18), transparent 65%),
          radial-gradient(circle, rgba(127, 166, 122, 0.6) 2px, transparent 2.5px);
        background-size: auto, auto, 22px 22px;
        background-position: center, center, 0 0;
        opacity: 0.6;
      }

      #root,
      .app-container {
        position: relative;
        z-index: 1;
      }

      .app-container {
        min-height: 100vh;
        background: transparent;
        animation: app-reveal 700ms cubic-bezier(0.2, 0.8, 0.2, 1) both;
      }

      @keyframes app-reveal {
        0% { opacity: 0; transform: translateY(10px); }
        100% { opacity: 1; transform: translateY(0); }
      }

      @keyframes item-reveal {
        0% { opacity: 0; transform: translateY(14px) scale(0.98); }
        100% { opacity: 1; transform: translateY(0) scale(1); }
      }

      .glass {
        background: rgba(255, 250, 242, 0.85);
        backdrop-filter: blur(16px) saturate(140%);
        -webkit-backdrop-filter: blur(16px) saturate(140%);
        border-bottom: 1px solid rgba(42, 36, 68, 0.1);
        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.8) inset;
      }

      .soft-shadow {
        box-shadow: var(--shadow-soft);
      }

      .result-card {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: 26px;
        box-shadow: var(--shadow-soft);
        transition: transform 240ms ease, box-shadow 240ms ease, border-color 240ms ease;
      }

      .result-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lift);
        border-color: rgba(42, 36, 68, 0.2);
      }

      .quick-action-grid > * {
        animation: item-reveal 500ms cubic-bezier(0.2, 0.8, 0.2, 1) both;
      }

      .quick-action-grid > *:nth-child(1) { animation-delay: 60ms; }
      .quick-action-grid > *:nth-child(2) { animation-delay: 120ms; }
      .quick-action-grid > *:nth-child(3) { animation-delay: 180ms; }
      .quick-action-grid > *:nth-child(4) { animation-delay: 240ms; }

      .quick-action-btn {
        background: rgba(255, 250, 242, 0.95);
        border: 1px solid rgba(42, 36, 68, 0.12);
        border-radius: 22px;
        box-shadow: 0 10px 22px rgba(42, 36, 68, 0.08);
        transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease, background 220ms ease;
      }

      .quick-action-btn:hover {
        background: rgba(255, 255, 255, 0.98);
        border-color: rgba(42, 36, 68, 0.2);
        box-shadow: 0 18px 32px rgba(42, 36, 68, 0.14);
        transform: translateY(-2px);
      }

      .btn-primary {
        background: linear-gradient(180deg, #1f1c6b 0%, #15124e 100%);
        border-radius: 999px;
        box-shadow: 0 12px 24px rgba(31, 28, 107, 0.28);
        transition: transform 200ms ease, box-shadow 200ms ease, filter 200ms ease;
      }

      .btn-primary:hover {
        filter: brightness(1.03);
        transform: translateY(-1px);
        box-shadow: 0 16px 30px rgba(27, 127, 107, 0.34);
      }

      input[type="text"],
      input[type="search"] {
        background: rgba(255, 250, 242, 0.98);
        border: 1px solid rgba(42, 36, 68, 0.14);
        border-radius: 18px;
        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.9) inset, 0 8px 18px rgba(42, 36, 68, 0.06);
        transition: border-color 200ms ease, box-shadow 200ms ease;
      }

      input[type="text"]:focus,
      input[type="search"]:focus {
        border-color: rgba(31, 28, 107, 0.5);
        box-shadow: 0 0 0 4px rgba(31, 28, 107, 0.14), 0 10px 22px rgba(42, 36, 68, 0.08);
      }

      .tab-nav {
        background: rgba(255, 250, 242, 0.88);
        border: 1px solid rgba(42, 36, 68, 0.12);
        border-radius: 18px;
        box-shadow: 0 10px 20px rgba(42, 36, 68, 0.1);
      }

      .tab-btn {
        border-radius: 12px;
        transition: transform 200ms ease, color 200ms ease, background 200ms ease, box-shadow 200ms ease;
      }

      .tab-btn.active {
        background: #ffffff;
        color: var(--accent-blue);
        box-shadow: 0 10px 18px rgba(42, 36, 68, 0.16);
      }

      .tab-btn:hover:not(.active) {
        color: var(--text-secondary);
        transform: translateY(-1px);
      }

      .category-badge {
        border-radius: 999px;
        font-weight: 600;
        letter-spacing: 0.01em;
        box-shadow: 0 8px 16px rgba(42, 36, 68, 0.1);
      }

      .category-burnable {
        background: rgba(214, 90, 74, 0.16);
        color: #b04436;
        border: 1px solid rgba(214, 90, 74, 0.2);
      }

      .category-non-burnable {
        background: rgba(31, 28, 107, 0.12);
        color: #1f1c6b;
        border: 1px solid rgba(31, 28, 107, 0.22);
      }

      .category-recyclable {
        background: rgba(127, 166, 122, 0.18);
        color: #3f6d4b;
        border: 1px solid rgba(127, 166, 122, 0.28);
      }

      .category-hazardous {
        background: rgba(196, 164, 43, 0.16);
        color: #8a7100;
        border: 1px solid rgba(196, 164, 43, 0.28);
      }

      .category-oversized {
        background: rgba(151, 133, 189, 0.16);
        color: #6a5299;
        border: 1px solid rgba(151, 133, 189, 0.26);
      }

      .category-unknown {
        background: rgba(122, 116, 138, 0.16);
        color: #5a5466;
        border: 1px solid rgba(122, 116, 138, 0.26);
      }

      .highlight {
        background: linear-gradient(120deg, rgba(31, 28, 107, 0.16), rgba(31, 28, 107, 0.06));
        color: #1f1c6b;
      }

      .gradient-text {
        background: linear-gradient(135deg, #1f1c6b 0%, #7fa67a 100%);
        -webkit-background-clip: text;
        background-clip: text;
      }

      .shimmer {
        background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(42, 36, 68, 0.08), rgba(255, 255, 255, 0));
        background-size: 200% 100%;
      }

      .setup-overlay {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
        background: rgba(247, 239, 230, 0.78);
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        z-index: 50;
      }

      .setup-overlay.hidden {
        display: none;
      }

      .setup-modal {
        width: min(940px, 100%);
        max-height: min(92vh, 860px);
        overflow: auto;
        background: var(--card-bg);
        border: 1px solid rgba(42, 36, 68, 0.12);
        border-radius: 28px;
        box-shadow: var(--shadow-lift);
        padding: 28px;
        position: relative;
      }

      .setup-modal::before {
        content: "";
        position: absolute;
        inset: 16px 16px auto auto;
        width: 180px;
        height: 180px;
        background: radial-gradient(circle, rgba(127, 166, 122, 0.5) 2px, transparent 2.5px);
        background-size: 18px 18px;
        opacity: 0.45;
        pointer-events: none;
      }

      .setup-header h2 {
        font-size: 22px;
        margin: 10px 0 8px;
      }

      .setup-badge {
        display: inline-flex;
        align-items: center;
        padding: 4px 12px;
        border-radius: 999px;
        background: rgba(127, 166, 122, 0.2);
        color: #3f6d4b;
        font-size: 12px;
        font-weight: 600;
        letter-spacing: 0.02em;
      }

      .setup-meta {
        margin-top: 10px;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 1.6;
      }

      .setup-meta span {
        display: block;
      }

      .setup-status {
        margin-top: 12px;
        padding: 10px 14px;
        border-radius: 14px;
        background: rgba(127, 166, 122, 0.12);
        color: var(--text-secondary);
        font-size: 13px;
      }

      .setup-status[data-state="error"] {
        background: rgba(214, 90, 74, 0.16);
        color: #9d3b2f;
      }

      .setup-status[data-state="progress"] {
        background: rgba(31, 28, 107, 0.12);
        color: #1f1c6b;
      }

      .setup-actions {
        display: flex;
        gap: 12px;
        margin-top: 18px;
      }

      .setup-secondary {
        border: 1px solid rgba(42, 36, 68, 0.18);
        background: rgba(255, 255, 255, 0.9);
        color: var(--text-secondary);
        padding: 10px 18px;
        border-radius: 999px;
        font-weight: 600;
        cursor: pointer;
      }

      .setup-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 16px;
        margin-top: 24px;
      }

      .setup-card {
        background: rgba(255, 255, 255, 0.7);
        border: 1px solid rgba(42, 36, 68, 0.12);
        border-radius: 20px;
        padding: 16px;
        box-shadow: var(--shadow-soft);
      }

      .setup-card h3 {
        font-size: 15px;
        margin: 0 0 10px;
      }

      .setup-card ul {
        margin: 0;
        padding-left: 18px;
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 1.6;
      }

      .setup-field {
        margin-top: 12px;
        display: grid;
        gap: 8px;
      }

      .setup-field label {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-secondary);
      }

      .setup-input {
        border: 1px solid rgba(42, 36, 68, 0.14);
        border-radius: 14px;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.9);
        color: var(--text-primary);
        font-size: 14px;
      }

      .setup-suggestions {
        display: grid;
        gap: 6px;
      }

      .setup-suggestion {
        text-align: left;
        border: 1px dashed rgba(42, 36, 68, 0.18);
        background: rgba(255, 255, 255, 0.8);
        border-radius: 12px;
        padding: 8px 10px;
        font-size: 13px;
        color: var(--text-secondary);
        cursor: pointer;
      }

      .setup-divider {
        margin: 12px 0;
        height: 1px;
        background: rgba(42, 36, 68, 0.12);
      }

      .setup-choice {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }

      .setup-chip {
        border: 1px solid rgba(31, 28, 107, 0.2);
        background: rgba(255, 255, 255, 0.9);
        color: var(--text-primary);
        padding: 8px 12px;
        border-radius: 999px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
      }

      .setup-link {
        margin-top: 12px;
        background: none;
        border: none;
        color: var(--accent-blue);
        font-weight: 600;
        cursor: pointer;
      }

      .setup-muted {
        font-size: 12px;
        color: var(--text-muted);
        margin-top: 6px;
      }

      ::selection {
        background: rgba(127, 166, 122, 0.3);
      }

      @media (prefers-reduced-motion: reduce) {
        .app-container,
        .quick-action-grid > *,
        .result-card,
        .quick-action-btn {
          animation: none !important;
          transition: none !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <div id="setup-overlay" class="setup-overlay hidden" role="dialog" aria-modal="true">
      <div class="setup-modal">
        <div class="setup-header">
          <span class="setup-badge">準備中</span>
          <h2 id="setup-title">（例）◯◯市のごみ分別データを準備します</h2>
          <p class="setup-source" id="setup-source">出典：◯◯市 公式サイト（PDF）</p>
          <div class="setup-meta">
            <span id="setup-size">サイズ：約 12.4MB</span>
            <span>端末内に保存して、オフラインでも検索できるようにします。</span>
            <span>ダウンロードしますか？</span>
          </div>
          <div class="setup-status" id="setup-status" data-state="idle">自治体を選択すると自動で候補を探します。</div>
          <div class="setup-actions">
            <button class="btn-primary setup-download">ダウンロード</button>
            <button class="setup-secondary">あとで</button>
          </div>
        </div>
        <div class="setup-sections">
          <div class="setup-card">
            <h3>自治体判定</h3>
            <p>位置情報（許可制）or 郵便番号</p>
            <div class="setup-choice">
              <button class="setup-chip" data-action="location">位置情報を使う</button>
              <button class="setup-chip" data-action="postal">郵便番号を入力</button>
            </div>
            <div class="setup-field">
              <label for="setup-municipality">自治体名</label>
              <input id="setup-municipality" class="setup-input" type="text" placeholder="例：札幌市" />
              <div id="setup-suggestions" class="setup-suggestions"></div>
            </div>
            <div class="setup-field">
              <label for="setup-postal">郵便番号</label>
              <input id="setup-postal" class="setup-input" type="text" placeholder="例：100-0001" inputmode="numeric" />
            </div>
            <p class="setup-muted">位置情報は端末でのみ使用し、保存しません。</p>
          </div>
        </div>
      </div>
    </div>
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const overlay = document.getElementById("setup-overlay");
        if (!overlay) return;

        const statusEl = overlay.querySelector("#setup-status");
        const titleEl = overlay.querySelector("#setup-title");
        const sourceEl = overlay.querySelector("#setup-source");
        const sizeEl = overlay.querySelector("#setup-size");
        const municipalityInput = overlay.querySelector("#setup-municipality");
        const postalInput = overlay.querySelector("#setup-postal");
        const suggestionsEl = overlay.querySelector("#setup-suggestions");
        const downloadBtn = overlay.querySelector(".setup-download");
        const laterBtn = overlay.querySelector(".setup-secondary");
        const locationBtn = overlay.querySelector('[data-action="location"]');
        const postalBtn = overlay.querySelector('[data-action="postal"]');
        const manualBtn = overlay.querySelector(".setup-manual");
        const manualFileInput = overlay.querySelector("#setup-manual-file");
        const openOfficialBtn = overlay.querySelector(".setup-link");

        const CITY_LIST = [
          "東京都", "渋谷区", "札幌市", "仙台市", "さいたま市", "千葉市", "横浜市", "川崎市", "相模原市",
          "名古屋市", "京都市", "大阪市", "神戸市", "広島市", "北九州市", "福岡市"
        ];

        const CKAN_SEARCH_ENDPOINT = "https://search.ckan.jp/api/3/action/package_search";
        const CKAN_SHOW_ENDPOINT = "https://search.ckan.jp/api/3/action/package_show";
        const CKAN_ALT_SEARCH = "https://search.ckan.jp/ckan/api/3/action/package_search";
        const CKAN_ALT_SHOW = "https://search.ckan.jp/ckan/api/3/action/package_show";
        const CKAN_RESOURCE_SEARCH = "https://search.ckan.jp/api/3/action/resource_search";
        const CKAN_ALT_RESOURCE_SEARCH = "https://search.ckan.jp/ckan/api/3/action/resource_search";
        const CKAN_FALLBACK_RESOURCE_SEARCH = "https://www.data.go.jp/data/api/3/action/resource_search";
        const CKAN_FALLBACK_SEARCH = "https://www.data.go.jp/data/api/3/action/package_search";
        const CKAN_FALLBACK_SHOW = "https://www.data.go.jp/data/api/3/action/package_show";
        const PROXY_ENDPOINT = location.protocol === "file:" ? "" : `${location.origin}/api/fetch`;

        const proxyFetch = async (url, options = {}) => {
          if (!PROXY_ENDPOINT) {
            throw new Error("プロキシが未設定です。Vercelにデプロイしてください。");
          }
          const method = (options.method || "GET").toUpperCase();
          const proxyUrl = `${PROXY_ENDPOINT}?url=${encodeURIComponent(url)}&method=${method}`;
          return fetch(proxyUrl);
        };

        const setStatus = (message, state = "idle") => {
          if (!statusEl) return;
          statusEl.textContent = message;
          statusEl.setAttribute("data-state", state);
        };

        const hideOverlay = () => {
          overlay.classList.add("hidden");
          localStorage.setItem("gomi-setup-dismissed", "1");
        };

        const getMunicipalityName = () => {
          const stored = localStorage.getItem("gomi-municipality");
          if (stored) {
            try {
              const parsed = JSON.parse(stored);
              if (parsed?.name) return parsed.name;
            } catch {
              return "";
            }
          }
          return municipalityInput?.value?.trim() || "";
        };

        const setMunicipalityName = (name) => {
          if (!name) return;
          if (municipalityInput) {
            municipalityInput.value = name;
          }
          localStorage.setItem("gomi-municipality", JSON.stringify({ name }));
        };

        const updateHeader = (name) => {
          const municipality = name || "◯◯市";
          titleEl.textContent = `（例）${municipality}のごみ分別データを準備します`;
        };

        const updateSource = (source) => {
          if (!sourceEl) return;
          sourceEl.textContent = `出典：${source}`;
        };

        const updateSize = (sizeText) => {
          if (!sizeEl) return;
          sizeEl.textContent = `サイズ：約 ${sizeText}`;
        };

        const showSuggestions = (input) => {
          if (!suggestionsEl) return;
          suggestionsEl.innerHTML = "";
          if (!input) return;
          const matches = CITY_LIST.filter((city) => city.includes(input)).slice(0, 3);
          matches.forEach((city) => {
            const btn = document.createElement("button");
            btn.className = "setup-suggestion";
            btn.type = "button";
            btn.textContent = city;
            btn.addEventListener("click", () => {
              setMunicipalityName(city);
              updateHeader(city);
              suggestionsEl.innerHTML = "";
              setStatus("自治体が選択されました。候補データを探します。", "progress");
              lookupDataSources(city);
            });
            suggestionsEl.append(btn);
          });
        };

        const reverseGeocode = async (lat, lon) => {
          const url = `https://nominatim.openstreetmap.org/reverse?format=json&accept-language=ja&lat=${lat}&lon=${lon}`;
          const res = await proxyFetch(url);
          if (!res.ok) throw new Error("位置情報の逆引きに失敗しました。");
          const data = await res.json();
          const address = data.address || {};
          return address.city || address.town || address.village || address.county || "";
        };

        const lookupPostalCode = async (postalCode) => {
          const zip = postalCode.replace(/[^0-9]/g, "");
          if (zip.length !== 7) throw new Error("郵便番号を7桁で入力してください。");
          const res = await proxyFetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${zip}`);
          if (!res.ok) throw new Error("郵便番号検索に失敗しました。");
          const data = await res.json();
          if (data.status !== 200 || !data.results?.length) {
            throw new Error("自治体が見つかりませんでした。");
          }
          return data.results[0].address2 || "";
        };

        const extractMunicipalityFromText = (text) => {
          if (!text) return "";
          const lines = text.split("\n").map((line) => line.trim()).filter(Boolean);
          const candidates = lines.filter((line) => /[都道府県].*[市区町村]/.test(line));
          if (candidates.length) return candidates[0];
          const inline = text.match(/[都道府県].{0,6}[市区町村]/);
          return inline ? inline[0] : "";
        };

        const fetchCkanCandidates = async (endpoint, query) => {
          const url = `${endpoint}?rows=20&q=${encodeURIComponent(query)}`;
          const res = await proxyFetch(url);
          if (!res.ok) throw new Error("CKAN検索に失敗しました。");
          const data = await res.json();
          if (!data.success || !data.result?.results?.length) return [];
          return data.result.results;
        };

        const fetchCkanPackageShow = async (endpoint, packageId) => {
          const url = `${endpoint}?id=${encodeURIComponent(packageId)}`;
          const res = await proxyFetch(url);
          if (!res.ok) throw new Error("CKAN詳細取得に失敗しました。");
          const data = await res.json();
          if (!data.success || !data.result) return null;
          return data.result;
        };

        const fetchCkanResourceSearch = async (endpoint, query) => {
          const url = `${endpoint}?rows=20&query=${encodeURIComponent(query)}`;
          const res = await proxyFetch(url);
          if (!res.ok) throw new Error("CKANリソース検索に失敗しました。");
          const data = await res.json();
          if (!data.success || !data.result?.results?.length) return [];
          return data.result.results;
        };

        const pickResourceFromResults = (resources) => {
          const csv = resources.find((r) => (r.format || "").toLowerCase() === "csv");
          const json = resources.find((r) => (r.format || "").toLowerCase() === "json");
          const pdf = resources.find((r) => (r.format || "").toLowerCase() === "pdf");
          if (csv) return { resource: csv, type: "csv" };
          if (json) return { resource: json, type: "json" };
          if (pdf) return { resource: pdf, type: "pdf" };
          return null;
        };

        const pickResource = (datasets) => {
          for (const dataset of datasets) {
            const resources = dataset.resources || [];
            const csv = resources.find((r) => (r.format || "").toLowerCase() === "csv");
            const json = resources.find((r) => (r.format || "").toLowerCase() === "json");
            const pdf = resources.find((r) => (r.format || "").toLowerCase() === "pdf");
            if (csv) return { dataset, resource: csv, type: "csv" };
            if (json) return { dataset, resource: json, type: "json" };
            if (pdf) return { dataset, resource: pdf, type: "pdf" };
          }
          return null;
        };

        const extractPdfText = async (arrayBuffer) => {
          if (!window.pdfjsLib?.getDocument) {
            throw new Error("PDF解析ライブラリが読み込めませんでした。");
          }
          const pdf = await window.pdfjsLib.getDocument({ data: arrayBuffer }).promise;
          const pages = [];
          let fullText = "";
          for (let i = 1; i <= pdf.numPages; i += 1) {
            const page = await pdf.getPage(i);
            const content = await page.getTextContent();
            const text = content.items
              .map((item) => item.str)
              .join(" ")
              .replace(/\s+/g, " ")
              .trim();
            pages.push({ pageNumber: i, text });
            fullText += `${text}\n`;
          }
          return { text: fullText.trim(), pages };
        };

        const storeData = ({ municipality, fileName, extractedText, pages, source }) => {
          const payload = {
            fileName,
            extractedText,
            pages,
            uploadedAt: new Date().toISOString(),
            municipalityName: municipality,
          };
          try {
            localStorage.setItem("gomi-pdf-data", JSON.stringify(payload));
            localStorage.setItem("gomi-municipality", JSON.stringify({ name: municipality }));
            if (source) {
              localStorage.setItem("gomi-source-meta", JSON.stringify(source));
            }
            localStorage.setItem("gomi-setup-dismissed", "1");
          } catch {
            throw new Error("端末の保存容量が不足しています。");
          }
        };

        const lookupDataSources = async (municipality) => {
          try {
            setStatus("オープンデータを検索しています…", "progress");
            const queries = [
              `${municipality} ごみ 分別`,
              `${municipality} ゴミ 分別`,
              `${municipality} ごみ`,
              `${municipality} 廃棄物`,
              `${municipality} 資源`,
            ];
            const endpoints = [
              { search: CKAN_SEARCH_ENDPOINT, show: CKAN_SHOW_ENDPOINT },
              { search: CKAN_ALT_SEARCH, show: CKAN_ALT_SHOW },
              { search: CKAN_FALLBACK_SEARCH, show: CKAN_FALLBACK_SHOW },
            ];
            let picked = null;
            let pickedSource = null;
            for (const endpoint of endpoints) {
              for (const query of queries) {
                const datasets = await fetchCkanCandidates(endpoint.search, query);
                if (!datasets.length) continue;
                const detailed = [];
                for (const dataset of datasets) {
                  if (!dataset?.name) continue;
                  const detail = await fetchCkanPackageShow(endpoint.show, dataset.name);
                  if (detail) detailed.push(detail);
                }
                picked = pickResource(detailed.length ? detailed : datasets);
                if (picked) {
                  pickedSource = { dataset: picked.dataset, resource: picked.resource };
                  break;
                }
              }
              if (picked) break;
            }

            if (!picked) {
              const resourceQueries = [
                `${municipality} ごみ`,
                `${municipality} ゴミ`,
                `${municipality} 分別`,
                `${municipality} 廃棄物`,
              ];
              const resourceEndpoints = [
                CKAN_RESOURCE_SEARCH,
                CKAN_ALT_RESOURCE_SEARCH,
                CKAN_FALLBACK_RESOURCE_SEARCH,
              ];
              for (const endpoint of resourceEndpoints) {
                for (const query of resourceQueries) {
                  const results = await fetchCkanResourceSearch(endpoint, query);
                  if (!results.length) continue;
                  const pickedResource = pickResourceFromResults(results);
                  if (!pickedResource) continue;
                  let dataset = null;
                  const packageId = pickedResource.resource.package_id;
                  if (packageId) {
                    const showEndpoint = endpoint.includes("data.go.jp")
                      ? CKAN_FALLBACK_SHOW
                      : endpoint.includes("/ckan/")
                        ? CKAN_ALT_SHOW
                        : CKAN_SHOW_ENDPOINT;
                    dataset = await fetchCkanPackageShow(showEndpoint, packageId);
                  }
                  picked = {
                    dataset: dataset || { title: pickedResource.resource.name },
                    resource: pickedResource.resource,
                    type: pickedResource.type,
                  };
                  pickedSource = { dataset, resource: pickedResource.resource };
                  break;
                }
                if (picked) break;
              }
            }
            if (!picked) {
              setStatus("オープンデータが見つかりません。公式ページで探します。", "progress");
              updateSource(`${municipality} 公式サイト`);
              updateSize("不明");
              return null;
            }
            const updatedAt = picked.dataset?.metadata_modified || "";
            const sourceLabel = picked.dataset?.title || municipality;
            updateSource(`${sourceLabel}（${picked.type.toUpperCase()}）`);
            return {
              municipality,
              type: picked.type,
              url: picked.resource.url,
              name: picked.resource.name || picked.resource.url,
              updatedAt,
            };
          } catch (error) {
            setStatus(error.message, "error");
            return null;
          }
        };

        const downloadAndApply = async () => {
          const municipality = getMunicipalityName();
          if (!municipality) {
            setStatus("自治体名を入力してください。", "error");
            return;
          }

          let source = await lookupDataSources(municipality);
          if (!source) {
            setStatus("見つかりませんでした。公式ページで確認してください。", "error");
            return;
          }

          try {
            setStatus("データをダウンロードしています…", "progress");
            const res = await proxyFetch(source.url);
            if (!res.ok) throw new Error("ダウンロードに失敗しました。");

            const contentLength = res.headers.get("content-length");
            if (contentLength) {
              const sizeMb = (Number(contentLength) / (1024 * 1024)).toFixed(1);
              updateSize(`${sizeMb}MB`);
            }

            if (source.type === "pdf") {
              const arrayBuffer = await res.arrayBuffer();
              setStatus("PDFを解析しています…", "progress");
              const extracted = await extractPdfText(arrayBuffer);
              storeData({
                municipality,
                fileName: `${municipality}-gomi.pdf`,
                extractedText: extracted.text,
                pages: extracted.pages,
                source: {
                  municipality,
                  url: source.url,
                  updatedAt: source.updatedAt,
                  type: source.type,
                },
              });
            } else {
              const text = await res.text();
              storeData({
                municipality,
                fileName: `${municipality}-gomi.${source.type}`,
                extractedText: text,
                pages: [{ pageNumber: 1, text }],
                source: {
                  municipality,
                  url: source.url,
                  updatedAt: source.updatedAt,
                  type: source.type,
                },
              });
            }

            setStatus("端末内に保存しました。再読み込みして反映します。", "progress");
            setTimeout(() => {
              window.location.reload();
            }, 800);
          } catch (error) {
            setStatus(error.message, "error");
          }
        };

        const handleManualImport = async (file) => {
          if (!file) return;
          const municipality = getMunicipalityName() || "未設定";
          try {
            setStatus("ファイルを解析しています…", "progress");
            if (file.name.endsWith(".pdf")) {
              const arrayBuffer = await file.arrayBuffer();
              const extracted = await extractPdfText(arrayBuffer);
              storeData({
                municipality,
                fileName: file.name,
                extractedText: extracted.text,
                pages: extracted.pages,
                source: { municipality, url: "manual-import", updatedAt: "", type: "pdf" },
              });
            } else {
              const text = await file.text();
              storeData({
                municipality,
                fileName: file.name,
                extractedText: text,
                pages: [{ pageNumber: 1, text }],
                source: { municipality, url: "manual-import", updatedAt: "", type: "csv/json" },
              });
            }
            setStatus("取り込み完了。再読み込みして反映します。", "progress");
            setTimeout(() => {
              window.location.reload();
            }, 800);
          } catch (error) {
            setStatus(error.message, "error");
          }
        };

        const maybeCheckForUpdates = async () => {
          const metaRaw = localStorage.getItem("gomi-source-meta");
          if (!metaRaw) return;
          const lastCheck = localStorage.getItem("gomi-source-last-check");
          const lastCheckDate = lastCheck ? new Date(lastCheck) : null;
          const now = new Date();
          if (lastCheckDate && now - lastCheckDate < 1000 * 60 * 60 * 24 * 30) return;

          try {
            const meta = JSON.parse(metaRaw);
            if (!meta.url || meta.url === "manual-import") return;
            const res = await proxyFetch(meta.url, { method: "HEAD" });
            if (!res.ok) return;
            const lastModified = res.headers.get("last-modified") || "";
            if (lastModified && meta.updatedAt && lastModified !== meta.updatedAt) {
              updateHeader(meta.municipality);
              updateSource(`${meta.municipality} 公式サイト`);
              setStatus("新しい更新が見つかりました。再ダウンロードしますか？", "progress");
              overlay.classList.remove("hidden");
            }
            localStorage.setItem("gomi-source-last-check", now.toISOString());
          } catch {
            localStorage.setItem("gomi-source-last-check", now.toISOString());
          }
        };

        const setInitialMunicipality = () => {
          const existing = getMunicipalityName();
          if (existing) {
            setMunicipalityName(existing);
            updateHeader(existing);
          }
        };

        municipalityInput?.addEventListener("input", (event) => {
          const value = event.target.value.trim();
          updateHeader(value);
          showSuggestions(value);
        });

        postalInput?.addEventListener("input", async () => {
          try {
            const value = postalInput.value.trim();
            if (value.replace(/[^0-9]/g, "").length !== 7) return;
            setStatus("郵便番号から自治体を取得しています…", "progress");
            const name = await lookupPostalCode(value);
            if (!name) throw new Error("自治体が特定できませんでした。");
            setMunicipalityName(name);
            updateHeader(name);
            setStatus("自治体が特定されました。候補データを探します。", "progress");
            lookupDataSources(name);
          } catch (error) {
            setStatus(error.message, "error");
          }
        });

        locationBtn?.addEventListener("click", () => {
          if (!navigator.geolocation) {
            setStatus("位置情報が利用できません。", "error");
            return;
          }
          setStatus("位置情報を取得しています…", "progress");
          navigator.geolocation.getCurrentPosition(
            async (pos) => {
              try {
                const name = await reverseGeocode(pos.coords.latitude, pos.coords.longitude);
                if (!name) throw new Error("自治体が特定できませんでした。");
                setMunicipalityName(name);
                updateHeader(name);
                setStatus("自治体が特定されました。候補データを探します。", "progress");
                lookupDataSources(name);
              } catch (error) {
                setStatus(error.message, "error");
              }
            },
            () => {
              setStatus("位置情報の取得に失敗しました。", "error");
            }
          );
        });

        postalBtn?.addEventListener("click", () => {
          postalInput?.focus();
        });

        downloadBtn?.addEventListener("click", downloadAndApply);
        laterBtn?.addEventListener("click", hideOverlay);

        manualBtn?.addEventListener("click", () => {
          manualFileInput?.click();
        });

        manualFileInput?.addEventListener("change", (event) => {
          const file = event.target.files?.[0];
          handleManualImport(file);
        });

        openOfficialBtn?.addEventListener("click", () => {
          const municipality = getMunicipalityName() || "自治体";
          const url = `https://www.google.com/search?q=${encodeURIComponent(
            `${municipality} ごみ 分別 公式`
          )}`;
          window.open(url, "_blank", "noopener");
        });

        const hasPdf = () => Boolean(localStorage.getItem("gomi-pdf-data"));
        const isDismissed = () => localStorage.getItem("gomi-setup-dismissed") === "1";

        const isOnboardingStepVisible = () => {
          if (document.querySelector('input[placeholder*="自治体"]')) return true;
          if (document.querySelector('[aria-label*="自治体"]')) return true;
          return false;
        };

        const showOverlay = (selectedName = "") => {
          if (hasPdf()) return;
          if (!overlay.classList.contains("hidden")) return;
          setInitialMunicipality();
          overlay.classList.remove("hidden");
          if (selectedName) {
            setStatus("自治体が選択されました。候補データを探します。", "progress");
            lookupDataSources(selectedName);
          } else {
            setStatus("郵便番号か自治体名で検索できます。", "progress");
          }
        };

        const startMunicipalityWatcher = () => {
          let lastName = getMunicipalityName();
          if (lastName && isOnboardingStepVisible()) showOverlay(lastName);
          const timer = setInterval(() => {
            if (hasPdf()) {
              clearInterval(timer);
              return;
            }
            const current = getMunicipalityName();
            if (current && current !== lastName && isOnboardingStepVisible()) {
              lastName = current;
              showOverlay(current);
            }
          }, 800);
        };

        const wireOnboardingTriggers = () => {
          const startButtons = Array.from(document.querySelectorAll("button, [role='button']"))
            .filter((el) => el.textContent?.trim() === "はじめる");
          startButtons.forEach((btn) => {
            if (btn.dataset.setupBound) return;
            btn.dataset.setupBound = "1";
            btn.addEventListener("click", () => {
              showOverlay(getMunicipalityName());
            });
          });

          const municipalityInputs = Array.from(document.querySelectorAll("input, select"))
            .filter((el) => {
              const placeholder = el.getAttribute("placeholder") || "";
              const name = el.getAttribute("name") || "";
              const id = el.getAttribute("id") || "";
              return (
                placeholder.includes("自治体") ||
                name.toLowerCase().includes("municipality") ||
                id.toLowerCase().includes("municipality")
              );
            });
          municipalityInputs.forEach((input) => {
            if (input.dataset.setupBound) return;
            input.dataset.setupBound = "1";
            input.addEventListener("focus", () => showOverlay(getMunicipalityName()));
            input.addEventListener("input", async () => {
              if (!isOnboardingStepVisible()) return;
              const value = input.value || "";
              const numeric = value.replace(/[^0-9]/g, "");
              if (numeric.length !== 7) return;
              try {
                setStatus("郵便番号から自治体を取得しています…", "progress");
                const name = await lookupPostalCode(numeric);
                if (!name) throw new Error("自治体が特定できませんでした。");
                setMunicipalityName(name);
                updateHeader(name);
                showOverlay(name);
              } catch (error) {
                setStatus(error.message, "error");
              }
            });
          });
        };

        document.addEventListener("click", (event) => {
          if (!isOnboardingStepVisible() || hasPdf()) return;
          const target = event.target.closest("button, [role='button'], li");
          if (!target) return;
          const text = target.innerText?.trim() || "";
          if (text.length === 0 || text.length > 40) return;
          const municipality = extractMunicipalityFromText(text);
          if (!municipality) return;
          setMunicipalityName(municipality);
          updateHeader(municipality);
          showOverlay(municipality);
        });

        if (!hasPdf() && isOnboardingStepVisible()) {
          showOverlay(getMunicipalityName());
        }

        const observer = new MutationObserver(() => {
          wireOnboardingTriggers();
          if (!hasPdf() && !isDismissed() && isOnboardingStepVisible()) {
            showOverlay(getMunicipalityName());
          }
        });
        observer.observe(document.body, { childList: true, subtree: true });

        wireOnboardingTriggers();
        startMunicipalityWatcher();
        maybeCheckForUpdates();
      });
    </script>
  </body>
</html>
